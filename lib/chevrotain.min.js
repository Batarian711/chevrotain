/*! chevrotain - v0.8.0 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("chevrotain",[],t):"object"==typeof exports?exports.chevrotain=t():e.chevrotain=t()}(this,function(){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(e,t,n){"use strict";var r=n(1),i=n(11),o=n(10),a=n(5),s=n(7),c=n(21),u={};u.VERSION="0.8.0",u.Parser=r.Parser,u.ParserDefinitionErrorType=r.ParserDefinitionErrorType,u.Lexer=i.Lexer,u.LexerDefinitionErrorType=i.LexerDefinitionErrorType,u.Token=o.Token,u.VirtualToken=o.VirtualToken,u.EOF=o.EOF,u.extendToken=o.extendToken,u.tokenName=o.tokenName,u.tokenLabel=o.tokenLabel,u.EMPTY_ALT=r.EMPTY_ALT,u.exceptions={},u.exceptions.isRecognitionException=a.exceptions.isRecognitionException,u.exceptions.EarlyExitException=a.exceptions.EarlyExitException,u.exceptions.MismatchedTokenException=a.exceptions.MismatchedTokenException,u.exceptions.NotAllInputParsedException=a.exceptions.NotAllInputParsedException,u.exceptions.NoViableAltException=a.exceptions.NoViableAltException,u.gast={},u.gast.GAstVisitor=s.gast.GAstVisitor,u.gast.Flat=s.gast.Flat,u.gast.Repetition=s.gast.Repetition,u.gast.RepetitionWithSeparator=s.gast.RepetitionWithSeparator,u.gast.RepetitionMandatory=s.gast.RepetitionMandatory,u.gast.RepetitionMandatoryWithSeparator=s.gast.RepetitionMandatoryWithSeparator,u.gast.Option=s.gast.Option,u.gast.Alternation=s.gast.Alternation,u.gast.NonTerminal=s.gast.NonTerminal,u.gast.Terminal=s.gast.Terminal,u.gast.Rule=s.gast.Rule,u.clearCache=c.clearCache,e.exports=u},function(e,t,n){"use strict";function EMPTY_ALT(e){return void 0===e&&(e=void 0),function(){return e}}function InRuleRecoveryException(e){this.name=o.functionName(InRuleRecoveryException),this.message=e}var r=n(2),i=n(5),o=n(3),a=n(6),s=n(8),c=n(4),u=n(14),l=n(10),p=n(17),f=n(19),h=n(18),d=n(16);!function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT"}(t.ParserDefinitionErrorType||(t.ParserDefinitionErrorType={}));var E=(t.ParserDefinitionErrorType,Object.freeze({recoveryEnabled:!1})),T=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0});t.EMPTY_ALT=EMPTY_ALT;var A={},y=function(){function Parser(e,t,n){if(void 0===n&&(n=E),this.errors=[],this._input=[],this.inputIdx=-1,this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.tokensMap=void 0,this.definedRulesNames=[],this._input=e,this.recoveryEnabled=c.has(n,"recoveryEnabled")?n.recoveryEnabled:E.recoveryEnabled,this.className=o.classNameFromInstance(this),this.firstAfterRepMap=r.getFirstAfterRepForClass(this.className),this.classLAFuncs=r.getLookaheadFuncsForClass(this.className),r.CLASS_TO_DEFINITION_ERRORS.containsKey(this.className)?this.definitionErrors=r.CLASS_TO_DEFINITION_ERRORS.get(this.className):(this.definitionErrors=[],r.CLASS_TO_DEFINITION_ERRORS.put(this.className,this.definitionErrors)),c.isArray(t))this.tokensMap=c.reduce(t,function(e,t){return e[l.tokenName(t)]=t,e},{});else{if(!c.isObject(t))throw new Error("'tokensMapOrArr' argument must be An Array of Token constructors or a Dictionary of Tokens.");this.tokensMap=c.cloneObj(t)}this.tokensMap[l.tokenName(l.EOF)]=l.EOF,void 0===r.CLASS_TO_OR_LA_CACHE[this.className]&&r.initLookAheadKeyCache(this.className),this.orLookaheadKeys=r.CLASS_TO_OR_LA_CACHE[this.className],this.manyLookaheadKeys=r.CLASS_TO_MANY_LA_CACHE[this.className],this.manySepLookaheadKeys=r.CLASS_TO_MANY_SEP_LA_CACHE[this.className],this.atLeastOneLookaheadKeys=r.CLASS_TO_AT_LEAST_ONE_LA_CACHE[this.className],this.atLeastOneSepLookaheadKeys=r.CLASS_TO_AT_LEAST_ONE_SEP_LA_CACHE[this.className],this.optionLookaheadKeys=r.CLASS_TO_OPTION_LA_CACHE[this.className]}return Parser.performSelfAnalysis=function(e){var t,n=[],i=o.classNameFromInstance(e);if(""===i)throw Error("A Parser's constructor may not be an anonymous Function, it must be a named function\nThe constructor's name is used at runtime for performance (caching) purposes.");if(!r.CLASS_TO_SELF_ANALYSIS_DONE.containsKey(i)){var l=r.getProductionsForClass(i);n=r.CLASS_TO_DEFINITION_ERRORS.get(i);var p=a.resolveGrammar(l);n.push.apply(n,p),r.CLASS_TO_SELF_ANALYSIS_DONE.put(i,!0);var f=s.validateGrammar(l.values());if(n.push.apply(n,f),!c.isEmpty(n)&&!Parser.DEFER_DEFINITION_ERRORS_HANDLING)throw t=c.map(n,function(e){return e.message}),new Error("Parser Definition Errors detected\n: "+t.join("\n-------------------------------\n"));if(c.isEmpty(n)){var h=u.computeAllProdsFollows(l.values());r.setResyncFollowsForClass(i,h)}}if(!c.isEmpty(r.CLASS_TO_DEFINITION_ERRORS.get(i))&&!Parser.DEFER_DEFINITION_ERRORS_HANDLING)throw t=c.map(r.CLASS_TO_DEFINITION_ERRORS.get(i),function(e){return e.message}),new Error("Parser Definition Errors detected\n: "+t.join("\n-------------------------------\n"))},Object.defineProperty(Parser.prototype,"input",{get:function(){return c.cloneArr(this._input)},set:function(e){this.reset(),this._input=e},enumerable:!0,configurable:!0}),Parser.prototype.reset=function(){this.isBackTrackingStack=[],this.errors=[],this._input=[],this.inputIdx=-1,this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[]},Parser.prototype.isAtEndOfInput=function(){return this.LA(1)instanceof l.EOF},Parser.prototype.getGAstProductions=function(){return r.getProductionsForClass(this.className)},Parser.prototype.isBackTracking=function(){return!c.isEmpty(this.isBackTrackingStack)},Parser.prototype.SAVE_ERROR=function(e){if(i.exceptions.isRecognitionException(e))return e.context={ruleStack:c.cloneArr(this.RULE_STACK),ruleOccurrenceStack:c.cloneArr(this.RULE_OCCURRENCE_STACK)},this.errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")},Parser.prototype.NEXT_TOKEN=function(){return this.LA(1)},Parser.prototype.LA=function(e){return this._input.length<=this.inputIdx+e?new l.EOF:this._input[this.inputIdx+e]},Parser.prototype.isNextRule=function(e){var t=r.getLookaheadFuncsForClass(this.className),n=t.get(e);if(void 0===n){var i=this.getGAstProductions().get(e);n=p.buildLookaheadForTopLevel(i),t.put(e,n)}return n.call(this)},Parser.prototype.BACKTRACK=function(e,t){var n=this;return function(){n.isBackTrackingStack.push(1);var r=n.saveRecogState();try{var o=e.call(n);return t(o)}catch(a){if(i.exceptions.isRecognitionException(a))return!1;throw a}finally{n.reloadRecogState(r),n.isBackTrackingStack.pop()}}},Parser.prototype.SKIP_TOKEN=function(){return this.inputIdx<=this._input.length-2?(this.inputIdx++,this.NEXT_TOKEN()):new l.EOF},Parser.prototype.CONSUME=function(e){return this.CONSUME1(e)},Parser.prototype.CONSUME1=function(e){return this.consumeInternal(e,1)},Parser.prototype.CONSUME2=function(e){return this.consumeInternal(e,2)},Parser.prototype.CONSUME3=function(e){return this.consumeInternal(e,3)},Parser.prototype.CONSUME4=function(e){return this.consumeInternal(e,4)},Parser.prototype.CONSUME5=function(e){return this.consumeInternal(e,5)},Parser.prototype.SUBRULE=function(e,t){return void 0===t&&(t=[]),this.SUBRULE1(e,t)},Parser.prototype.SUBRULE1=function(e,t){return void 0===t&&(t=[]),e.call(this,1,t)},Parser.prototype.SUBRULE2=function(e,t){return void 0===t&&(t=[]),e.call(this,2,t)},Parser.prototype.SUBRULE3=function(e,t){return void 0===t&&(t=[]),e.call(this,3,t)},Parser.prototype.SUBRULE4=function(e,t){return void 0===t&&(t=[]),e.call(this,4,t)},Parser.prototype.SUBRULE5=function(e,t){return void 0===t&&(t=[]),e.call(this,5,t)},Parser.prototype.OPTION=function(e,t){return this.OPTION1.call(this,e,t)},Parser.prototype.OPTION1=function(e,t){return void 0===t&&(t=e,e=this.getLookaheadFuncForOption(1)),this.optionInternal(e,t)},Parser.prototype.OPTION2=function(e,t){return void 0===t&&(t=e,e=this.getLookaheadFuncForOption(2)),this.optionInternal(e,t)},Parser.prototype.OPTION3=function(e,t){return void 0===t&&(t=e,e=this.getLookaheadFuncForOption(3)),this.optionInternal(e,t)},Parser.prototype.OPTION4=function(e,t){return void 0===t&&(t=e,e=this.getLookaheadFuncForOption(4)),this.optionInternal(e,t)},Parser.prototype.OPTION5=function(e,t){return void 0===t&&(t=e,e=this.getLookaheadFuncForOption(5)),this.optionInternal(e,t)},Parser.prototype.OR=function(e,t,n){return void 0===n&&(n=!1),this.OR1(e,t,n)},Parser.prototype.OR1=function(e,t,n){return void 0===n&&(n=!1),this.orInternal(e,t,1,n)},Parser.prototype.OR2=function(e,t,n){return void 0===n&&(n=!1),this.orInternal(e,t,2,n)},Parser.prototype.OR3=function(e,t,n){return void 0===n&&(n=!1),this.orInternal(e,t,3,n)},Parser.prototype.OR4=function(e,t,n){return void 0===n&&(n=!1),this.orInternal(e,t,4,n)},Parser.prototype.OR5=function(e,t,n){return void 0===n&&(n=!1),this.orInternal(e,t,5,n)},Parser.prototype.MANY=function(e,t){return this.MANY1.call(this,e,t)},Parser.prototype.MANY1=function(e,t){this.manyInternal(this.MANY1,"MANY1",1,e,t)},Parser.prototype.MANY2=function(e,t){this.manyInternal(this.MANY2,"MANY2",2,e,t)},Parser.prototype.MANY3=function(e,t){this.manyInternal(this.MANY3,"MANY3",3,e,t)},Parser.prototype.MANY4=function(e,t){this.manyInternal(this.MANY4,"MANY4",4,e,t)},Parser.prototype.MANY5=function(e,t){this.manyInternal(this.MANY5,"MANY5",5,e,t)},Parser.prototype.MANY_SEP=function(e,t,n){return this.MANY_SEP1.call(this,e,t,n)},Parser.prototype.MANY_SEP1=function(e,t,n){return this.manySepFirstInternal(this.MANY_SEP1,"MANY_SEP1",1,e,t,n)},Parser.prototype.MANY_SEP2=function(e,t,n){return this.manySepFirstInternal(this.MANY_SEP2,"MANY_SEP2",2,e,t,n)},Parser.prototype.MANY_SEP3=function(e,t,n){return this.manySepFirstInternal(this.MANY_SEP3,"MANY_SEP3",3,e,t,n)},Parser.prototype.MANY_SEP4=function(e,t,n){return this.manySepFirstInternal(this.MANY_SEP4,"MANY_SEP4",4,e,t,n)},Parser.prototype.MANY_SEP5=function(e,t,n){return this.manySepFirstInternal(this.MANY_SEP5,"MANY_SEP5",5,e,t,n)},Parser.prototype.AT_LEAST_ONE=function(e,t,n){return this.AT_LEAST_ONE1.call(this,e,t,n)},Parser.prototype.AT_LEAST_ONE1=function(e,t,n){this.atLeastOneInternal(this.AT_LEAST_ONE1,"AT_LEAST_ONE1",1,e,t,n)},Parser.prototype.AT_LEAST_ONE2=function(e,t,n){this.atLeastOneInternal(this.AT_LEAST_ONE2,"AT_LEAST_ONE2",2,e,t,n)},Parser.prototype.AT_LEAST_ONE3=function(e,t,n){this.atLeastOneInternal(this.AT_LEAST_ONE3,"AT_LEAST_ONE3",3,e,t,n)},Parser.prototype.AT_LEAST_ONE4=function(e,t,n){this.atLeastOneInternal(this.AT_LEAST_ONE4,"AT_LEAST_ONE4",4,e,t,n)},Parser.prototype.AT_LEAST_ONE5=function(e,t,n){this.atLeastOneInternal(this.AT_LEAST_ONE5,"AT_LEAST_ONE5",5,e,t,n)},Parser.prototype.AT_LEAST_ONE_SEP=function(e,t,n,r){return this.AT_LEAST_ONE_SEP1.call(this,e,t,n,r)},Parser.prototype.AT_LEAST_ONE_SEP1=function(e,t,n,r){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,"AT_LEAST_ONE_SEP1",1,e,t,n,r)},Parser.prototype.AT_LEAST_ONE_SEP2=function(e,t,n,r){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,"AT_LEAST_ONE_SEP2",2,e,t,n,r)},Parser.prototype.AT_LEAST_ONE_SEP3=function(e,t,n,r){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,"AT_LEAST_ONE_SEP3",3,e,t,n,r)},Parser.prototype.AT_LEAST_ONE_SEP4=function(e,t,n,r){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,"AT_LEAST_ONE_SEP4",4,e,t,n,r)},Parser.prototype.AT_LEAST_ONE_SEP5=function(e,t,n,r){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,"AT_LEAST_ONE_SEP5",5,e,t,n,r)},Parser.prototype.RULE=function(e,t,n){void 0===n&&(n=T);var i=s.validateRuleName(e,this.className);i=i.concat(s.validateRuleDoesNotAlreadyExist(e,this.definedRulesNames,this.className)),this.definedRulesNames.push(e),this.definitionErrors.push.apply(this.definitionErrors,i);var o=r.getProductionsForClass(this.className);if(!o.containsKey(e)){var a=f.buildTopProduction(t.toString(),e,this.tokensMap);o.put(e,a)}return this.defineRule(e,t,n)},Parser.prototype.OVERRIDE_RULE=function(e,t,n){void 0===n&&(n=T);var i=s.validateRuleName(e,this.className);i=i.concat(s.validateRuleIsOverridden(e,this.definedRulesNames,this.className)),this.definitionErrors.push.apply(this.definitionErrors,i);var o=r.getProductionsForClass(this.className),a=f.buildTopProduction(t.toString(),e,this.tokensMap);return o.put(e,a),this.defineRule(e,t,n)},Parser.prototype.ruleInvocationStateUpdate=function(e,t){this.RULE_OCCURRENCE_STACK.push(t),this.RULE_STACK.push(e)},Parser.prototype.ruleFinallyStateUpdate=function(){this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop();var e=this._input.length-1;if(0===this.RULE_STACK.length&&this.inputIdx<e){var t=this.NEXT_TOKEN();this.SAVE_ERROR(new i.exceptions.NotAllInputParsedException("Redundant input, expecting EOF but found: "+t.image,t))}},Parser.prototype.getTokenToInsert=function(e){return new e(-1,-1)},Parser.prototype.canTokenTypeBeInsertedInRecovery=function(e){return!0},Parser.prototype.getMisMatchTokenErrorMessage=function(e,t){var n=l.hasTokenLabel(e),r=n?"--> "+l.tokenLabel(e)+" <--":"token of type --> "+l.tokenName(e)+" <--",i="Expecting "+r+" but found --> '"+t.image+"' <--";return i},Parser.prototype.defineRule=function(e,t,n){var r=c.has(n,"resyncEnabled")?n.resyncEnabled:T.resyncEnabled,o=c.has(n,"recoveryValueFunc")?n.recoveryValueFunc:T.recoveryValueFunc,a=function(n,a){void 0===n&&(n=1),void 0===a&&(a=[]),this.ruleInvocationStateUpdate(e,n);try{return t.apply(this,a)}catch(s){var c=1===this.RULE_STACK.length,u=c||r&&!this.isBackTracking()&&this.recoveryEnabled;if(u&&i.exceptions.isRecognitionException(s)){var l=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(l))return s.resyncedTokens=this.reSyncTo(l),o();throw s}throw s}finally{this.ruleFinallyStateUpdate()}},s="ruleName";return a[s]=e,a},Parser.prototype.tryInRepetitionRecovery=function(e,t,n,r){for(var o=this,a=this.findReSyncTokenType(),s=this.inputIdx,u=[],l=!1,p=this.NEXT_TOKEN(),f=this.NEXT_TOKEN(),h=function(){var e=o.getMisMatchTokenErrorMessage(r,p),t=new i.exceptions.MismatchedTokenException(e,p);t.resyncedTokens=c.dropRight(u),o.SAVE_ERROR(t)};!l;){if(f instanceof r)return void h();if(n.call(this))return h(),void e.apply(this,t);f instanceof a?l=!0:(f=this.SKIP_TOKEN(),this.addToResyncTokens(f,u))}this.inputIdx=s},Parser.prototype.shouldInRepetitionRecoveryBeTried=function(e,t){return void 0===e||void 0===t?!1:this.NEXT_TOKEN()instanceof e?!1:this.isBackTracking()?!1:!this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t))},Parser.prototype.getFollowsForInRuleRecovery=function(e,t){var n=c.cloneArr(this.RULE_STACK),r=c.cloneArr(this.RULE_OCCURRENCE_STACK),i={ruleStack:n,occurrenceStack:r,lastTok:e,lastTokOccurrence:t},o=c.first(n),a=this.getGAstProductions(),s=a.get(o),u=new h.NextAfterTokenWalker(s,i).startWalking();return u},Parser.prototype.tryInRuleRecovery=function(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t)){var n=this.getTokenToInsert(e);return n.isInsertedInRecovery=!0,n}if(this.canRecoverWithSingleTokenDeletion(e)){var r=this.SKIP_TOKEN();return this.inputIdx++,r}throw new InRuleRecoveryException("sad sad panda")},Parser.prototype.canPerformInRuleRecovery=function(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)},Parser.prototype.canRecoverWithSingleTokenInsertion=function(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e))return!1;if(c.isEmpty(t))return!1;var n=this.NEXT_TOKEN(),r=void 0!==c.find(t,function(e){return n instanceof e});return r},Parser.prototype.canRecoverWithSingleTokenDeletion=function(e){var t=this.LA(2)instanceof e;return t},Parser.prototype.isInCurrentRuleReSyncSet=function(e){var t=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(t);return c.contains(n,e)},Parser.prototype.findReSyncTokenType=function(){for(var e=this.flattenFollowSet(),t=this.NEXT_TOKEN(),n=2;;){var r=t.constructor;if(c.contains(e,r))return r;t=this.LA(n),n++}},Parser.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return A;var e=this.RULE_STACK.length-1,t=e,n=e-1;return{ruleName:this.RULE_STACK[e],idxInCallingRule:this.RULE_OCCURRENCE_STACK[t],inRule:this.RULE_STACK[n]}},Parser.prototype.buildFullFollowKeyStack=function(){var e=this;return c.map(this.RULE_STACK,function(t,n){return 0===n?A:{ruleName:t,idxInCallingRule:e.RULE_OCCURRENCE_STACK[n],inRule:e.RULE_STACK[n-1]}})},Parser.prototype.flattenFollowSet=function(){var e=this,t=c.map(this.buildFullFollowKeyStack(),function(t){return e.getFollowSetFromFollowKey(t)});return c.flatten(t)},Parser.prototype.getFollowSetFromFollowKey=function(e){if(e===A)return[l.EOF];var t=e.ruleName+e.idxInCallingRule+d.IN+e.inRule;return r.getResyncFollowsForClass(this.className).get(t)},Parser.prototype.addToResyncTokens=function(e,t){return e instanceof l.EOF||t.push(e),t},Parser.prototype.reSyncTo=function(e){for(var t=[],n=this.NEXT_TOKEN();n instanceof e==!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,t);return c.dropRight(t)},Parser.prototype.attemptInRepetitionRecovery=function(e,t,n,r,i,o,a){var s=this.getKeyForAutomaticLookahead(r,a,i),u=this.firstAfterRepMap.get(s);if(void 0===u){var p=c.last(this.RULE_STACK),f=this.getGAstProductions().get(p),h=new o(f,i);u=h.startWalking(),this.firstAfterRepMap.put(s,u)}var d=u.token,E=u.occurrence,T=u.isEndOfRule;1===this.RULE_STACK.length&&T&&void 0===d&&(d=l.EOF,E=1),this.shouldInRepetitionRecoveryBeTried(d,E)&&this.tryInRepetitionRecovery(e,t,n,d)},Parser.prototype.optionInternal=function(e,t){return e.call(this)?(t.call(this),!0):!1},Parser.prototype.atLeastOneInternal=function(e,t,n,r,i,o){if(c.isFunction(i)||(o=i,i=r,r=this.getLookaheadFuncForAtLeastOne(n)),!r.call(this))throw this.raiseEarlyExitException(n,h.NextInsideAtLeastOneWalker,o);for(i.call(this);r.call(this);)i.call(this);this.recoveryEnabled&&this.attemptInRepetitionRecovery(e,[r,i,o],r,t,n,h.NextTerminalAfterAtLeastOneWalker,this.atLeastOneLookaheadKeys)},Parser.prototype.atLeastOneSepFirstInternal=function(e,t,n,r,i,o,a){var s=this,u=[];if(c.isFunction(o)||(a=o,o=i,i=this.getLookaheadFuncForAtLeastOneSep(n)),!i.call(this))throw this.raiseEarlyExitException(n,h.NextInsideAtLeastOneSepWalker,a);o.call(this);for(var l=function(){return s.NEXT_TOKEN()instanceof r};l();)u.push(this.CONSUME(r)),o.call(this);return this.recoveryEnabled&&this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,n,r,l,o,u,this.atLeastOneSepLookaheadKeys,h.NextTerminalAfterAtLeastOneSepWalker],l,t,n,h.NextTerminalAfterAtLeastOneSepWalker,this.atLeastOneSepLookaheadKeys),u},Parser.prototype.manyInternal=function(e,t,n,r,i){for(void 0===i&&(i=r,r=this.getLookaheadFuncForMany(n));r.call(this);)i.call(this);this.recoveryEnabled&&this.attemptInRepetitionRecovery(e,[r,i],r,t,n,h.NextTerminalAfterManyWalker,this.manyLookaheadKeys)},Parser.prototype.manySepFirstInternal=function(e,t,n,r,i,o){var a=this,s=[];if(void 0===o&&(o=i,i=this.getLookaheadFuncForManySep(n)),i.call(this)){o.call(this);for(var c=function(){return a.NEXT_TOKEN()instanceof r};c();)s.push(this.CONSUME(r)),o.call(this);this.recoveryEnabled&&this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,n,r,c,o,s,this.manySepLookaheadKeys,h.NextTerminalAfterManySepWalker],c,t,n,h.NextTerminalAfterManySepWalker,this.manySepLookaheadKeys)}return s},Parser.prototype.repetitionSepSecondInternal=function(e,t,n,r,i,o,a,s){for(;r();)o.push(this.CONSUME(n)),i.call(this);this.recoveryEnabled&&this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,n,r,i,o,a,s],r,e,t,s,a)},Parser.prototype.orInternal=function(e,t,n,r){if(void 0!==e[0].WHEN){for(var i=0;i<e.length;i++)if(e[i].WHEN.call(this)){var o=e[i].THEN_DO();return o}this.raiseNoAltException(n,t)}var a=this.getLookaheadFuncForOr(n,r),s=a.call(this);return-1!==s?e[s].ALT.call(this):void this.raiseNoAltException(n,t)},Parser.prototype.consumeInternal=function(e,t){try{return this.consumeInternalOptimized(e)}catch(n){if(!(this.recoveryEnabled&&n instanceof i.exceptions.MismatchedTokenException)||this.isBackTracking())throw n;var r=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,r)}catch(a){throw a.name===o.functionName(InRuleRecoveryException)?n:a}}},Parser.prototype.consumeInternalOptimized=function(e){var t=this.NEXT_TOKEN();if(this.NEXT_TOKEN()instanceof e)return this.inputIdx++,t;var n=this.getMisMatchTokenErrorMessage(e,t);throw this.SAVE_ERROR(new i.exceptions.MismatchedTokenException(n,t))},Parser.prototype.getKeyForAutomaticLookahead=function(e,t,n){var r=t[n-1],i=c.last(this.RULE_STACK),o=r[i];return void 0===o&&(o=e+n+d.IN+i,r[i]=o),o},Parser.prototype.getLookaheadFuncForOption=function(e){var t=this.getKeyForAutomaticLookahead("OPTION",this.optionLookaheadKeys,e);return this.getLookaheadFuncFor(t,e,p.buildLookaheadForOption)},Parser.prototype.getLookaheadFuncForOr=function(e,t){var n=this.getKeyForAutomaticLookahead("OR",this.orLookaheadKeys,e);return this.getLookaheadFuncFor(n,e,p.buildLookaheadForOr,[t])},Parser.prototype.getLookaheadFuncForMany=function(e){var t=this.getKeyForAutomaticLookahead("MANY",this.manyLookaheadKeys,e);return this.getLookaheadFuncFor(t,e,p.buildLookaheadForMany)},Parser.prototype.getLookaheadFuncForManySep=function(e){var t=this.getKeyForAutomaticLookahead("MANY_SEP",this.manySepLookaheadKeys,e);return this.getLookaheadFuncFor(t,e,p.buildLookaheadForManySep)},Parser.prototype.getLookaheadFuncForAtLeastOne=function(e){var t=this.getKeyForAutomaticLookahead("AT_LEAST_ONE",this.atLeastOneLookaheadKeys,e);return this.getLookaheadFuncFor(t,e,p.buildLookaheadForAtLeastOne)},Parser.prototype.getLookaheadFuncForAtLeastOneSep=function(e){var t=this.getKeyForAutomaticLookahead("AT_LEAST_ONE_SEP",this.atLeastOneSepLookaheadKeys,e);return this.getLookaheadFuncFor(t,e,p.buildLookaheadForAtLeastOneSep)},Parser.prototype.getLookaheadFuncFor=function(e,t,n,r){void 0===r&&(r=[]);var i=c.last(this.RULE_STACK),o=this.classLAFuncs.get(e);if(void 0===o){var a=this.getGAstProductions().get(i);o=n.apply(null,[t,a].concat(r)),this.classLAFuncs.put(e,o)}return o},Parser.prototype.saveRecogState=function(){var e=c.cloneArr(this.errors),t=c.cloneArr(this.RULE_STACK);return{errors:e,inputIdx:this.inputIdx,RULE_STACK:t}},Parser.prototype.reloadRecogState=function(e){this.errors=e.errors,this.inputIdx=e.inputIdx,this.RULE_STACK=e.RULE_STACK},Parser.prototype.raiseNoAltException=function(e,t){var n=" but found: '"+this.NEXT_TOKEN().image+"'";if(void 0===t){var r=c.last(this.RULE_STACK),o=this.getGAstProductions().get(r),a=new h.NextInsideOrWalker(o,e).startWalking(),s=c.flatten(a),u=c.map(s,function(e){return l.tokenLabel(e)});t="one of: <"+u.join(" ,")+">"}throw this.SAVE_ERROR(new i.exceptions.NoViableAltException("Expecting: "+t+" "+n,this.NEXT_TOKEN()))},Parser.prototype.raiseEarlyExitException=function(e,t,n){var r=" but found: '"+this.NEXT_TOKEN().image+"'";if(void 0===n){var o=c.last(this.RULE_STACK),a=this.getGAstProductions().get(o),s={ruleStack:this.RULE_STACK,occurrenceStack:this.RULE_OCCURRENCE_STACK,occurrence:e},u=new t(a,s).startWalking(),p=c.flatten(u),f=c.map(p,function(e){return l.tokenLabel(e)});n="expecting at least one iteration which starts with one of: <"+f.join(" ,")+">"}else n="Expecting at least one "+n;throw this.SAVE_ERROR(new i.exceptions.EarlyExitException(n+r,this.NEXT_TOKEN()))},Parser.IGNORE_AMBIGUITIES=!0,Parser.NO_RESYNC=!1,Parser.DEFER_DEFINITION_ERRORS_HANDLING=!1,Parser}();t.Parser=y,InRuleRecoveryException.prototype=Error.prototype},function(e,t,n){"use strict";function getProductionsForClass(e){return getFromNestedHashTable(e,t.CLASS_TO_GRAMMAR_PRODUCTIONS)}function getResyncFollowsForClass(e){return getFromNestedHashTable(e,t.CLASS_TO_RESYNC_FOLLOW_SETS)}function setResyncFollowsForClass(e,n){t.CLASS_TO_RESYNC_FOLLOW_SETS.put(e,n)}function getLookaheadFuncsForClass(e){return getFromNestedHashTable(e,t.CLASS_TO_LOOKAHEAD_FUNCS)}function getFirstAfterRepForClass(e){return getFromNestedHashTable(e,t.CLASS_TO_FIRST_AFTER_REPETITION)}function initLookAheadKeyCache(e){t.CLASS_TO_OR_LA_CACHE[e]=new Array(t.MAX_OCCURRENCE_INDEX),t.CLASS_TO_MANY_LA_CACHE[e]=new Array(t.MAX_OCCURRENCE_INDEX),t.CLASS_TO_MANY_SEP_LA_CACHE[e]=new Array(t.MAX_OCCURRENCE_INDEX),t.CLASS_TO_AT_LEAST_ONE_LA_CACHE[e]=new Array(t.MAX_OCCURRENCE_INDEX),t.CLASS_TO_AT_LEAST_ONE_SEP_LA_CACHE[e]=new Array(t.MAX_OCCURRENCE_INDEX),t.CLASS_TO_OPTION_LA_CACHE[e]=new Array(t.MAX_OCCURRENCE_INDEX),initSingleLookAheadKeyCache(t.CLASS_TO_OR_LA_CACHE[e]),initSingleLookAheadKeyCache(t.CLASS_TO_MANY_LA_CACHE[e]),initSingleLookAheadKeyCache(t.CLASS_TO_MANY_SEP_LA_CACHE[e]),initSingleLookAheadKeyCache(t.CLASS_TO_AT_LEAST_ONE_LA_CACHE[e]),initSingleLookAheadKeyCache(t.CLASS_TO_AT_LEAST_ONE_SEP_LA_CACHE[e]),initSingleLookAheadKeyCache(t.CLASS_TO_OPTION_LA_CACHE[e])}function initSingleLookAheadKeyCache(e){for(var n=0;n<t.MAX_OCCURRENCE_INDEX;n++)e[n]=new r.HashTable}function getFromNestedHashTable(e,t){var n=t.get(e);return void 0===n&&(t.put(e,new r.HashTable),n=t.get(e)),n}function clearCache(){var t=i.filter(i.values(e.exports),function(e){return e instanceof r.HashTable});i.forEach(t,function(e){return e.clear()})}var r=n(3),i=n(4);t.CLASS_TO_DEFINITION_ERRORS=new r.HashTable,t.CLASS_TO_SELF_ANALYSIS_DONE=new r.HashTable,t.CLASS_TO_GRAMMAR_PRODUCTIONS=new r.HashTable,t.getProductionsForClass=getProductionsForClass,t.CLASS_TO_RESYNC_FOLLOW_SETS=new r.HashTable,t.getResyncFollowsForClass=getResyncFollowsForClass,t.setResyncFollowsForClass=setResyncFollowsForClass,t.CLASS_TO_LOOKAHEAD_FUNCS=new r.HashTable,t.getLookaheadFuncsForClass=getLookaheadFuncsForClass,t.CLASS_TO_FIRST_AFTER_REPETITION=new r.HashTable,t.getFirstAfterRepForClass=getFirstAfterRepForClass,t.CLASS_TO_OR_LA_CACHE=new r.HashTable,t.CLASS_TO_MANY_LA_CACHE=new r.HashTable,t.CLASS_TO_MANY_SEP_LA_CACHE=new r.HashTable,t.CLASS_TO_AT_LEAST_ONE_LA_CACHE=new r.HashTable,t.CLASS_TO_AT_LEAST_ONE_SEP_LA_CACHE=new r.HashTable,t.CLASS_TO_OPTION_LA_CACHE=new r.HashTable,t.MAX_OCCURRENCE_INDEX=5,t.initLookAheadKeyCache=initLookAheadKeyCache,t.clearCache=clearCache},function(e,t,n){"use strict";function classNameFromInstance(e){return functionName(e.constructor)}function functionName(e){if(o)return e.name;if(e.rdtFuncNameCache666)return e.rdtFuncNameCache666;var t=e.toString().match(i)[1];return e.rdtFuncNameCache666=t,t}var r=n(4),i=/^\s*function\s*(\S*)\s*\(/,o="undefined"!=typeof function(){}.name;t.classNameFromInstance=classNameFromInstance,t.functionName=functionName;var a=function(){function HashTable(){this._state={}}return HashTable.prototype.keys=function(){return r.keys(this._state)},HashTable.prototype.values=function(){return r.values(this._state)},HashTable.prototype.put=function(e,t){this._state[e]=t},HashTable.prototype.putAll=function(e){this._state=r.assign(this._state,e._state)},HashTable.prototype.get=function(e){return this._state[e]},HashTable.prototype.containsKey=function(e){return r.has(this._state,e)},HashTable.prototype.clear=function(){this._state={}},HashTable}();t.HashTable=a},function(e,t){"use strict";function isEmpty(e){return e&&0===e.length}function keys(e){return Object.keys(e)}function values(e){for(var t=[],n=Object.keys(e),r=0;r<n.length;r++)t.push(e[n[r]]);return t}function map(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t.call(null,e[r],r));return n}function flatten(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?t=t.concat(flatten(r)):t.push(r)}return t}function first(e){return isEmpty(e)?void 0:e[0]}function last(e){var t=e&&e.length;return t?e[t-1]:void 0}function forEach(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t.call(null,e[n],n);else{if(!isObject(e))throw Error("non exhaustive match");for(var r=keys(e),n=0;n<r.length;n++){var i=r[n],o=e[i];t.call(null,o,i)}}}function isString(e){return"string"==typeof e}function isUndefined(e){return void 0===e}function isFunction(e){return e instanceof Function}function drop(e,t){return void 0===t&&(t=1),e.slice(t,e.length)}function dropRight(e,t){return void 0===t&&(t=1),e.slice(0,e.length-t)}function filter(e,t){var n=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var i=e[r];t.call(null,i)&&n.push(i)}return n}function reject(e,t){return filter(e,function(e){return!t(e)})}function pick(e,t){for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],a=e[o];t(a)&&(r[o]=a)}return r}function has(e,t){return e.hasOwnProperty(t)}function contains(e,t){return void 0!==find(e,function(e){return e===t})}function cloneArr(e){return map(e,function(e){return e})}function cloneObj(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function find(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t.call(null,r))return r}}function reduce(e,t,n){for(var r=Array.isArray(e)?e:values(e),i=n,o=0;o<r.length;o++)i=t.call(null,i,r[o]);return i}function compact(e){return reject(e,function(e){return null===e||void 0===e})}function uniq(e,t){void 0===t&&(t=function(e){return e});var n=[];return reduce(e,function(e,r){var i=t(r);return contains(n,i)?e:(n.push(i),e.concat(r))},[])}function partial(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=[null],i=r.concat(t);return Function.bind.apply(e,i)}function isArray(e){return Array.isArray(e)}function isRegExp(e){return e instanceof RegExp}function isObject(e){return e instanceof Object}function every(e,t){for(var n=0;n<e.length;n++)if(!t(e[n]))return!1;return!0}function difference(e,t){return reject(e,function(e){return contains(t,e)})}function some(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function indexOf(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function sortBy(e,t){var n=cloneArr(e);return n.sort(function(e,n){return t(e)-t(n)}),n}function zipObject(e,t){if(e.length!==t.length)throw Error("can't zipObject with different number of keys and values!");for(var n={},r=0;r<e.length;r++)n[e[r]]=t[r];return n}function assign(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],o=keys(i),a=0;a<o.length;a++){var s=o[a];e[s]=i[s]}return e}function groupBy(e,t){var n={};return forEach(e,function(e){var r=t(e),i=n[r];i?i.push(e):n[r]=[e]}),n}function merge(e,t){for(var n=cloneObj(e),r=keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o];n[o]=a}return n}t.isEmpty=isEmpty,t.keys=keys,t.values=values,t.map=map,t.flatten=flatten,t.first=first,t.last=last,t.forEach=forEach,t.isString=isString,t.isUndefined=isUndefined,t.isFunction=isFunction,t.drop=drop,t.dropRight=dropRight,t.filter=filter,t.reject=reject,t.pick=pick,t.has=has,t.contains=contains,t.cloneArr=cloneArr,t.cloneObj=cloneObj,t.find=find,t.reduce=reduce,t.compact=compact,t.uniq=uniq,t.partial=partial,t.isArray=isArray,t.isRegExp=isRegExp,t.isObject=isObject,t.every=every,t.difference=difference,t.some=some,t.indexOf=indexOf,t.sortBy=sortBy,t.zipObject=zipObject,t.assign=assign,t.groupBy=groupBy,t.merge=merge},function(e,t,n){"use strict";var r,i=n(3),o=n(4);!function(e){function isRecognitionException(e){var t=[i.functionName(MismatchedTokenException),i.functionName(NoViableAltException),i.functionName(EarlyExitException),i.functionName(NotAllInputParsedException)];return o.contains(t,e.name)}function MismatchedTokenException(e,t){this.name=i.functionName(MismatchedTokenException),this.message=e,this.token=t,this.resyncedTokens=[]}function NoViableAltException(e,t){this.name=i.functionName(NoViableAltException),this.message=e,this.token=t,this.resyncedTokens=[]}function NotAllInputParsedException(e,t){this.name=i.functionName(NotAllInputParsedException),this.message=e,this.token=t,this.resyncedTokens=[];
}function EarlyExitException(e,t){this.name=i.functionName(EarlyExitException),this.message=e,this.token=t,this.resyncedTokens=[]}e.isRecognitionException=isRecognitionException,e.MismatchedTokenException=MismatchedTokenException,MismatchedTokenException.prototype=Error.prototype,e.NoViableAltException=NoViableAltException,NoViableAltException.prototype=Error.prototype,e.NotAllInputParsedException=NotAllInputParsedException,NotAllInputParsedException.prototype=Error.prototype,e.EarlyExitException=EarlyExitException,EarlyExitException.prototype=Error.prototype}(r=t.exceptions||(t.exceptions={}))},function(e,t,n){"use strict";function resolveGrammar(e){var t=new s(e);return t.resolveRefs(),t.errors}var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=n(1),o=n(7),a=n(4);t.resolveGrammar=resolveGrammar;var s=function(e){function GastRefResolverVisitor(t){e.call(this),this.nameToTopRule=t,this.errors=[]}return r(GastRefResolverVisitor,e),GastRefResolverVisitor.prototype.resolveRefs=function(){var e=this;a.forEach(this.nameToTopRule.values(),function(t){e.currTopLevel=t,t.accept(e)})},GastRefResolverVisitor.prototype.visitNonTerminal=function(e){var t=this.nameToTopRule.get(e.nonTerminalName);if(t)e.referencedRule=t;else{var n="Invalid grammar, reference to rule which is not defined --> "+e.nonTerminalName;this.errors.push({message:n,type:i.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}},GastRefResolverVisitor}(o.gast.GAstVisitor);t.GastRefResolverVisitor=s},function(e,t,n){"use strict";var r,i=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},o=n(4);!function(e){var t=function(){function AbstractProduction(e){this.definition=e,this.implicitOccurrenceIndex=!1}return AbstractProduction.prototype.accept=function(e){e.visit(this),o.forEach(this.definition,function(t){t.accept(e)})},AbstractProduction}();e.AbstractProduction=t;var n=function(e){function NonTerminal(t,n,r){void 0===n&&(n=void 0),void 0===r&&(r=1),e.call(this,[]),this.nonTerminalName=t,this.referencedRule=n,this.occurrenceInParent=r}return i(NonTerminal,e),Object.defineProperty(NonTerminal.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(e){},enumerable:!0,configurable:!0}),NonTerminal.prototype.accept=function(e){e.visit(this)},NonTerminal}(t);e.NonTerminal=n;var r=function(e){function Rule(t,n,r){void 0===r&&(r=""),e.call(this,n),this.name=t,this.orgText=r}return i(Rule,e),Rule}(t);e.Rule=r;var a=function(e){function Flat(t){e.call(this,t)}return i(Flat,e),Flat}(t);e.Flat=a;var s=function(e){function Option(t,n){void 0===n&&(n=1),e.call(this,t),this.occurrenceInParent=n}return i(Option,e),Option}(t);e.Option=s;var c=function(e){function RepetitionMandatory(t,n){void 0===n&&(n=1),e.call(this,t),this.occurrenceInParent=n}return i(RepetitionMandatory,e),RepetitionMandatory}(t);e.RepetitionMandatory=c;var u=function(e){function RepetitionMandatoryWithSeparator(t,n,r){void 0===r&&(r=1),e.call(this,t),this.separator=n,this.occurrenceInParent=r}return i(RepetitionMandatoryWithSeparator,e),RepetitionMandatoryWithSeparator}(t);e.RepetitionMandatoryWithSeparator=u;var l=function(e){function Repetition(t,n){void 0===n&&(n=1),e.call(this,t),this.occurrenceInParent=n}return i(Repetition,e),Repetition}(t);e.Repetition=l;var p=function(e){function RepetitionWithSeparator(t,n,r){void 0===r&&(r=1),e.call(this,t),this.separator=n,this.occurrenceInParent=r}return i(RepetitionWithSeparator,e),RepetitionWithSeparator}(t);e.RepetitionWithSeparator=p;var f=function(e){function Alternation(t,n){void 0===n&&(n=1),e.call(this,t),this.occurrenceInParent=n}return i(Alternation,e),Alternation}(t);e.Alternation=f;var h=function(){function Terminal(e,t){void 0===t&&(t=1),this.terminalType=e,this.occurrenceInParent=t,this.implicitOccurrenceIndex=!1}return Terminal.prototype.accept=function(e){e.visit(this)},Terminal}();e.Terminal=h;var d=function(){function GAstVisitor(){}return GAstVisitor.prototype.visit=function(e){if(e instanceof n)this.visitNonTerminal(e);else if(e instanceof a)this.visitFlat(e);else if(e instanceof s)this.visitOption(e);else if(e instanceof c)this.visitRepetitionMandatory(e);else if(e instanceof u)this.visitRepetitionMandatoryWithSeparator(e);else if(e instanceof p)this.visitRepetitionWithSeparator(e);else if(e instanceof l)this.visitRepetition(e);else if(e instanceof f)this.visitAlternation(e);else if(e instanceof h)this.visitTerminal(e);else{if(!(e instanceof r))throw Error("non exhaustive match");this.visitRule(e)}},GAstVisitor.prototype.visitNonTerminal=function(e){},GAstVisitor.prototype.visitFlat=function(e){},GAstVisitor.prototype.visitOption=function(e){},GAstVisitor.prototype.visitRepetition=function(e){},GAstVisitor.prototype.visitRepetitionMandatory=function(e){},GAstVisitor.prototype.visitRepetitionMandatoryWithSeparator=function(e){},GAstVisitor.prototype.visitRepetitionWithSeparator=function(e){},GAstVisitor.prototype.visitAlternation=function(e){},GAstVisitor.prototype.visitTerminal=function(e){},GAstVisitor.prototype.visitRule=function(e){},GAstVisitor}();e.GAstVisitor=d}(r=t.gast||(t.gast={}))},function(e,t,n){"use strict";function validateGrammar(e){var t=i.map(e,validateDuplicateProductions),n=i.map(e,function(e){return validateNoLeftRecursion(e,e)}),r=i.map(e,validateEmptyOrAlternative);return i.flatten(t.concat(n,r))}function validateDuplicateProductions(e){var t=new l;e.accept(t);var n=t.allProductions,r=i.groupBy(n,identifyProductionForDuplicates),a=i.pick(r,function(e){return e.length>1}),c=i.map(i.values(a),function(t){var n=i.first(t),r=createDuplicatesErrorMessage(t,e.name),a=s.getProductionDslName(n),c={message:r,type:o.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:a,occurrence:n.occurrenceInParent},u=getExtraProductionArgument(n);return u&&(c.parameter=u),c});return c}function createDuplicatesErrorMessage(e,t){var n=i.first(e),r=n.occurrenceInParent,o=s.getProductionDslName(n),a=getExtraProductionArgument(n),c="->"+o+"<- with occurrence index: ->"+r+"<-\n                  "+(a?"and argument: "+a:"")+"\n                  appears more than once ("+e.length+" times) in the top level rule: "+t+".\n                  "+(1===r?"note that "+o+" and "+o+"1 both have the same occurrence index 1}":"")+"}\n                  to fix this make sure each usage of "+o+" "+(a?"with the argument: "+a:"")+"\n                  in the rule "+t+" has a different occurrence index (1-5), as that combination acts as a unique\n                  position key in the grammar, which is needed by the parsing engine.";return c=c.replace(/[ \t]+/g," "),c=c.replace(/\s\s+/g,"\n")}function identifyProductionForDuplicates(e){return s.getProductionDslName(e)+"_#_"+e.occurrenceInParent+"_#_"+getExtraProductionArgument(e)}function getExtraProductionArgument(e){return e instanceof a.gast.Terminal?c.tokenName(e.terminalType):e instanceof a.gast.NonTerminal?e.nonTerminalName:""}function validateRuleName(e,t){var n,r=[];return e.match(p)||(n="Invalid Grammar rule name: ->"+e+"<- it must match the pattern: ->"+p.toString()+"<-",r.push({message:n,type:o.ParserDefinitionErrorType.INVALID_RULE_NAME,ruleName:e})),r}function validateRuleDoesNotAlreadyExist(e,t,n){var r,a=[];return i.contains(t,e)&&(r="Duplicate definition, rule: ->"+e+"<- is already defined in the grammar: ->"+n+"<-",a.push({message:r,type:o.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:e})),a}function validateRuleIsOverridden(e,t,n){var r,a=[];return i.contains(t,e)||(r="Invalid rule override, rule: ->"+e+"<- cannot be overridden in the grammar: ->"+n+"<-as it is not defined in any of the super grammars ",a.push({message:r,type:o.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:e})),a}function validateNoLeftRecursion(e,t,n){void 0===n&&(n=[]);var r=[],a=getFirstNoneTerminal(t.definition);if(i.isEmpty(a))return[];var s=e.name,c=i.contains(a,e),u=i.map(n,function(e){return e.name}),l=s+" --> "+u.concat([s]).join(" --> ");if(c){var p="Left Recursion found in grammar.\n"+("rule: <"+s+"> can be invoked from itself (directly or indirectly)\n")+("without consuming any Tokens. The grammar path that causes this is: \n "+l+"\n")+" To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.";r.push({message:p,type:o.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:s})}var f=i.difference(a,n.concat([e])),h=i.map(f,function(t){var r=i.cloneArr(n);return r.push(t),validateNoLeftRecursion(e,t,r)});return r.concat(i.flatten(h))}function getFirstNoneTerminal(e){var t=[];if(i.isEmpty(e))return t;var n=i.first(e);if(n instanceof a.gast.NonTerminal){if(void 0===n.referencedRule)return t;t.push(n.referencedRule)}else if(n instanceof a.gast.Flat||n instanceof a.gast.Option||n instanceof a.gast.RepetitionMandatory||n instanceof a.gast.RepetitionMandatoryWithSeparator||n instanceof a.gast.RepetitionWithSeparator||n instanceof a.gast.Repetition)t=t.concat(getFirstNoneTerminal(n.definition));else if(n instanceof a.gast.Alternation)t=i.flatten(i.map(n.definition,function(e){return getFirstNoneTerminal(e.definition)}));else if(!(n instanceof a.gast.Terminal))throw Error("non exhaustive match");var r=s.isOptionalProd(n),o=e.length>1;if(r&&o){var c=i.drop(e);return t.concat(getFirstNoneTerminal(c))}return t}function validateEmptyOrAlternative(e){var t=new f;e.accept(t);var n=t.alternations,r=i.reduce(n,function(t,n){var r=i.dropRight(n.definition),a=i.map(r,function(t,r){return i.isEmpty(u.first(t))?{message:"Ambiguous empty alternative: <"+(r+1)+">"+(" in <OR"+n.occurrenceInParent+"> inside <"+e.name+"> Rule.\n")+"Only the last alternative may be an empty alternative.",type:o.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:n.occurrenceInParent,alternative:r+1}:null});return t.concat(i.compact(a))},[]);return r}var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=n(4),o=n(1),a=n(7),s=n(9),c=n(10),u=n(13);t.validateGrammar=validateGrammar,t.identifyProductionForDuplicates=identifyProductionForDuplicates;var l=function(e){function OccurrenceValidationCollector(){e.apply(this,arguments),this.allProductions=[]}return r(OccurrenceValidationCollector,e),OccurrenceValidationCollector.prototype.visitNonTerminal=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitOption=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitRepetition=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitAlternation=function(e){this.allProductions.push(e)},OccurrenceValidationCollector.prototype.visitTerminal=function(e){this.allProductions.push(e)},OccurrenceValidationCollector}(a.gast.GAstVisitor);t.OccurrenceValidationCollector=l;var p=/^[a-zA-Z_]\w*$/;t.validateRuleName=validateRuleName,t.validateRuleDoesNotAlreadyExist=validateRuleDoesNotAlreadyExist,t.validateRuleIsOverridden=validateRuleIsOverridden,t.validateNoLeftRecursion=validateNoLeftRecursion,t.getFirstNoneTerminal=getFirstNoneTerminal;var f=function(e){function OrCollector(){e.apply(this,arguments),this.alternations=[]}return r(OrCollector,e),OrCollector.prototype.visitAlternation=function(e){this.alternations.push(e)},OrCollector}(a.gast.GAstVisitor);t.validateEmptyOrAlternative=validateEmptyOrAlternative},function(e,t,n){"use strict";function isSequenceProd(e){return e instanceof r.gast.Flat||e instanceof r.gast.Option||e instanceof r.gast.Repetition||e instanceof r.gast.RepetitionMandatory||e instanceof r.gast.RepetitionMandatoryWithSeparator||e instanceof r.gast.RepetitionWithSeparator||e instanceof r.gast.Terminal||e instanceof r.gast.Rule}function isOptionalProd(e,t){void 0===t&&(t=[]);var n=e instanceof r.gast.Option||e instanceof r.gast.Repetition||e instanceof r.gast.RepetitionWithSeparator;return n?!0:e instanceof r.gast.Alternation?i.some(e.definition,function(e){return isOptionalProd(e,t)}):e instanceof r.gast.NonTerminal&&i.contains(t,e)?!1:e instanceof r.gast.AbstractProduction?(e instanceof r.gast.NonTerminal&&t.push(e),i.every(e.definition,function(e){return isOptionalProd(e,t)})):!1}function isBranchingProd(e){return e instanceof r.gast.Alternation}function getProductionDslName(e){var t=e.constructor,n=o.functionName(t);return a[n]}var r=n(7),i=n(4),o=n(3);t.isSequenceProd=isSequenceProd,t.isOptionalProd=isOptionalProd,t.isBranchingProd=isBranchingProd;var a={};a[o.functionName(r.gast.NonTerminal)]="SUBRULE",a[o.functionName(r.gast.Option)]="OPTION",a[o.functionName(r.gast.RepetitionMandatory)]="AT_LEAST_ONE",a[o.functionName(r.gast.RepetitionMandatoryWithSeparator)]="AT_LEAST_ONE_SEP",a[o.functionName(r.gast.RepetitionWithSeparator)]="MANY_SEP",a[o.functionName(r.gast.Repetition)]="MANY",a[o.functionName(r.gast.Alternation)]="OR",a[o.functionName(r.gast.Terminal)]="CONSUME",t.getProductionDslName=getProductionDslName},function(e,t,n){"use strict";function tokenLabel(e){return hasTokenLabel(e)?e.LABEL:tokenName(e)}function hasTokenLabel(e){return i.isString(e.LABEL)&&""!==e.LABEL}function tokenName(e){return i.isString(e.tokenName)?e.tokenName:o.functionName(e)}function extendToken(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=s);var r;i.isRegExp(t)||t===a.Lexer.SKIPPED||t===a.Lexer.NA?r=t:i.isFunction(t)&&(n=t,r=void 0);var o=function(){n.apply(this,arguments)};return o=i.assign(o,n),o.tokenName=e,o.prototype=Object.create(n.prototype),o.prototype.constructor=o,i.isUndefined(r)||(o.PATTERN=r),o}var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=n(4),o=n(3),a=n(11);t.tokenLabel=tokenLabel,t.hasTokenLabel=hasTokenLabel,t.tokenName=tokenName,t.extendToken=extendToken;var s=function(){function Token(e,t,n,r,i,o){void 0===i&&(i=n),void 0===o&&(o=r+e.length-1),this.image=e,this.offset=t,this.startLine=n,this.startColumn=r,this.endLine=i,this.endColumn=o,this.isInsertedInRecovery=!1}return Token.LABEL=void 0,Token}();t.Token=s;var c=function(e){function VirtualToken(){e.call(this,"",-1,-1,-1,-1,-1)}return r(VirtualToken,e),VirtualToken}(s);t.VirtualToken=c;var u=function(e){function EOF(){e.apply(this,arguments)}return r(EOF,e),EOF}(c);t.EOF=u},function(e,t,n){"use strict";var r=n(12),i=n(4);!function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST"}(t.LexerDefinitionErrorType||(t.LexerDefinitionErrorType={}));var o=(t.LexerDefinitionErrorType,function(){function Lexer(e,t){var n=this;void 0===t&&(t=!1),this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.modes=[],this.allPatterns={},this.patternIdxToClass={},this.patternIdxToGroup={},this.patternIdxToLongerAltIdx={},this.patternIdxToCanLineTerminator={},this.patternIdxToPushMode={},this.patternIdxToPopMode={},this.emptyGroups={},i.isArray(e)&&(e={default_mode:e});var o=i.keys(e);if(i.forEach(e,function(e,t){if(n.modes.push(t),n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(r.validatePatterns(e,o)),i.isEmpty(n.lexerDefinitionErrors)){var a=r.analyzeTokenClasses(e);n.allPatterns[t]=a.allPatterns,n.patternIdxToClass[t]=a.patternIdxToClass,n.patternIdxToGroup[t]=a.patternIdxToGroup,n.patternIdxToLongerAltIdx[t]=a.patternIdxToLongerAltIdx,n.patternIdxToCanLineTerminator[t]=a.patternIdxToCanLineTerminator,n.patternIdxToPushMode[t]=a.patternIdxToPushMode,n.patternIdxToPopMode[t]=a.patternIdxToPopMode,n.emptyGroups=i.merge(n.emptyGroups,a.emptyGroups)}}),!i.isEmpty(this.lexerDefinitionErrors)&&!t){var a=i.map(this.lexerDefinitionErrors,function(e){return e.message}),s=a.join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+s)}}return Lexer.prototype.tokenize=function(e,t){var n=this;if(void 0===t&&(t=i.first(this.modes)),!i.isEmpty(this.lexerDefinitionErrors)){var o=i.map(this.lexerDefinitionErrors,function(e){return e.message}),a=o.join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+a)}var s,c,u,l,p,f,h,d,E,T,A,y,O,N,R,_,m,g=e,v=0,S=[],P=[],L=1,k=1,I=i.cloneObj(this.emptyGroups),x=[],F=0,C=[],b=[],w=[],M=[],U=[],W=[],D=[],K=function(e){if(1===D.length){var t="Unable to pop Lexer Mode after encountering Token ->"+e.image+"<- The Mode Stack is empty";P.push({line:e.startLine,column:e.startColumn,length:e.image.length,message:t})}else{D.pop();var r=i.last(D);x=n.allPatterns[r],F=x.length,C=n.patternIdxToLongerAltIdx[r],b=n.patternIdxToGroup[r],w=n.patternIdxToClass[r],M=n.patternIdxToCanLineTerminator[r],U=n.patternIdxToPushMode[r],W=n.patternIdxToPopMode[r]}},G=function(e){D.push(e),x=n.allPatterns[e],F=x.length,C=n.patternIdxToLongerAltIdx[e],b=n.patternIdxToGroup[e],w=n.patternIdxToClass[e],M=n.patternIdxToCanLineTerminator[e],U=n.patternIdxToPushMode[e],W=n.patternIdxToPopMode[e]};for(G(t);e.length>0;){for(s=null,c=0;F>c;c++)if(s=x[c].exec(e),null!==s){p=C[c],p&&(l=x[p].exec(e),l&&l[0].length>s[0].length&&(s=l,c=p));break}if(null!==s){if(f=s[0],h=f.length,d=b[c],void 0!==d&&(E=w[c],T=new E(f,v,L,k),"default"===d?S.push(T):I[d].push(T)),e=e.slice(h),v+=h,k+=h,M[c]){var V=r.countLineTerminators(f);if(0!==V){for(L+=V,R=h-1;R>=0&&(O=f.charCodeAt(R),13!==O&&10!==O);)R--;k=h-R,void 0!==d&&(m=R===h-1,y=m?-1:0,1===V&&m||(T.endLine=L+y,T.endColumn=k-1+-y))}}W[c]&&K(T),U[c]&&G(U[c])}else{for(var H=v,Y=L,B=k,j=!1;!j&&e.length>0;)for(N=e.charCodeAt(0),10===N||13===N&&(1===e.length||e.length>1&&10!==e.charCodeAt(1))?(L++,k=1):k++,e=e.substr(1),v++,u=0;u<x.length&&!(j=x[u].test(e));u++);A=v-H,_="unexpected character: ->"+g.charAt(H)+"<- at offset: "+H+","+(" skipped "+(v-H)+" characters."),P.push({line:Y,column:B,length:A,message:_})}}return{tokens:S,groups:I,errors:P}},Lexer.SKIPPED={description:"This marks a skipped Token pattern, this means each token identified by it willbe consumed and then throw into oblivion, this can be used to for example: skip whitespace."},Lexer.NA=/NOT_APPLICABLE/,Lexer}());t.Lexer=o},function(e,t,n){"use strict";function analyzeTokenClasses(e){var t=o.reject(e,function(e){return e[a]===i.Lexer.NA}),n=o.map(t,function(e){return addStartOfInput(e[a])}),r=o.zipObject(n,t),s=o.map(n,function(e){return r[e.toString()]}),c=o.map(t,function(e){var t=e.GROUP;if(t!==i.Lexer.SKIPPED){if(o.isString(t))return t;if(o.isUndefined(t))return"default";throw Error("non exhaustive match")}}),u=o.map(t,function(e){var n=e.LONGER_ALT;if(n){var r=o.indexOf(t,n);return r}}),l=o.map(t,function(e){return e.PUSH_MODE}),p=o.map(t,function(e){return o.has(e,"POP_MODE")}),f=o.map(n,function(e){return/\\n|\\r|\\s/g.test(e.source)}),h=o.reduce(t,function(e,t){var n=t.GROUP;return o.isString(n)&&(e[n]=[]),e},{});return{allPatterns:n,patternIdxToClass:s,patternIdxToGroup:c,patternIdxToLongerAltIdx:u,patternIdxToCanLineTerminator:f,patternIdxToPushMode:l,patternIdxToPopMode:p,emptyGroups:h}}function validatePatterns(e,t){var n=[],r=findMissingPatterns(e),i=r.valid;n=n.concat(r.errors);var o=findInvalidPatterns(i);return i=o.valid,n=n.concat(o.errors),n=n.concat(findEndOfInputAnchor(i)),n=n.concat(findUnsupportedFlags(i)),n=n.concat(findDuplicatePatterns(i)),n=n.concat(findInvalidGroupType(i)),n=n.concat(findModesThatDoNotExist(i,t))}function findMissingPatterns(e){var t=o.filter(e,function(e){return!o.has(e,a)}),n=o.map(t,function(e){return{message:"Token class: ->"+r.tokenName(e)+"<- missing static 'PATTERN' property",type:i.LexerDefinitionErrorType.MISSING_PATTERN,tokenClasses:[e]}}),s=o.difference(e,t);return{errors:n,valid:s}}function findInvalidPatterns(e){var t=o.filter(e,function(e){var t=e[a];return!o.isRegExp(t)}),n=o.map(t,function(e){return{message:"Token class: ->"+r.tokenName(e)+"<- static 'PATTERN' can only be a RegExp",type:i.LexerDefinitionErrorType.INVALID_PATTERN,tokenClasses:[e]}}),s=o.difference(e,t);return{errors:n,valid:s}}function findEndOfInputAnchor(e){var t=o.filter(e,function(e){var t=e[a];return s.test(t.source)}),n=o.map(t,function(e){return{message:"Token class: ->"+r.tokenName(e)+"<- static 'PATTERN' cannot contain end of input anchor '$'",type:i.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenClasses:[e]}});return n}function findUnsupportedFlags(e){var t=o.filter(e,function(e){var t=e[a];return t instanceof RegExp&&(t.multiline||t.global)}),n=o.map(t,function(e){return{message:"Token class: ->"+r.tokenName(e)+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:i.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenClasses:[e]}});return n}function findDuplicatePatterns(e){var t=[],n=o.map(e,function(n){return o.reduce(e,function(e,r){return n.PATTERN.source!==r.PATTERN.source||o.contains(t,r)||r.PATTERN===i.Lexer.NA?e:(t.push(r),e.push(r),e)},[])});n=o.compact(n);var a=o.filter(n,function(e){return e.length>1}),s=o.map(a,function(e){var t=o.map(e,function(e){return r.tokenName(e)}),n=o.first(e).PATTERN;return{message:"The same RegExp pattern ->"+n+"<-"+("has been used in all the following classes: "+t.join(", ")+" <-"),type:i.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenClasses:e}});return s}function findInvalidGroupType(e){var t=o.filter(e,function(e){if(!o.has(e,"GROUP"))return!1;var t=e.GROUP;return t!==i.Lexer.SKIPPED&&t!==i.Lexer.NA&&!o.isString(t)}),n=o.map(t,function(e){return{message:"Token class: ->"+r.tokenName(e)+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:i.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenClasses:[e]}});return n}function findModesThatDoNotExist(e,t){var n=o.filter(e,function(e){return void 0!==e.PUSH_MODE&&!o.contains(t,e.PUSH_MODE)}),a=o.map(n,function(e){var t="Token class: ->"+r.tokenName(e)+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+e.PUSH_MODE+"<-which does not exist";return{message:t,type:i.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenClasses:[e]}});return a}function addStartOfInput(e){var t=e.ignoreCase?"i":"";return new RegExp("^(?:"+e.source+")",t)}function countLineTerminators(e){for(var t=0,n=0;n<e.length;){var r=e.charCodeAt(n);10===r?t++:13===r&&(n!==e.length-1&&10===e.charCodeAt(n+1)||t++),n++}return t}var r=n(10),i=n(11),o=n(4),a="PATTERN";t.analyzeTokenClasses=analyzeTokenClasses,t.validatePatterns=validatePatterns,t.findMissingPatterns=findMissingPatterns,t.findInvalidPatterns=findInvalidPatterns;var s=/[^\\][\$]/;t.findEndOfInputAnchor=findEndOfInputAnchor,t.findUnsupportedFlags=findUnsupportedFlags,t.findDuplicatePatterns=findDuplicatePatterns,t.findInvalidGroupType=findInvalidGroupType,t.findModesThatDoNotExist=findModesThatDoNotExist,t.addStartOfInput=addStartOfInput,t.countLineTerminators=countLineTerminators},function(e,t,n){"use strict";function first(e){if(e instanceof r.gast.NonTerminal)return first(e.referencedRule);if(e instanceof r.gast.Terminal)return firstForTerminal(e);if(i.isSequenceProd(e))return firstForSequence(e);if(i.isBranchingProd(e))return firstForBranching(e);throw Error("non exhaustive match")}function firstForSequence(e){for(var t,n=[],r=e.definition,a=0,s=r.length>a,c=!0;s&&c;)t=r[a],c=i.isOptionalProd(t),n=n.concat(first(t)),a+=1,s=r.length>a;return o.uniq(n)}function firstForBranching(e){var t=o.map(e.definition,function(e){return first(e)});return o.uniq(o.flatten(t))}function firstForTerminal(e){return[e.terminalType]}var r=n(7),i=n(9),o=n(4);t.first=first,t.firstForSequence=firstForSequence,t.firstForBranching=firstForBranching,t.firstForTerminal=firstForTerminal},function(e,t,n){"use strict";function computeAllProdsFollows(e){var t=new o.HashTable;return c.forEach(e,function(e){var n=new p(e).startWalking();t.putAll(n)}),t}function buildBetweenProdsFollowPrefix(e,t){return e.name+t+u.IN}function buildInProdFollowPrefix(e){var t=l.tokenName(e.terminalType);return t+e.occurrenceInParent+u.IN}var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=n(15),o=n(3),a=n(7),s=n(13),c=n(4),u=n(16),l=n(10),p=function(e){function ResyncFollowsWalker(t){e.call(this),this.topProd=t,this.follows=new o.HashTable}return r(ResyncFollowsWalker,e),ResyncFollowsWalker.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},ResyncFollowsWalker.prototype.walkTerminal=function(e,t,n){},ResyncFollowsWalker.prototype.walkProdRef=function(e,t,n){var r=buildBetweenProdsFollowPrefix(e.referencedRule,e.occurrenceInParent)+this.topProd.name,i=t.concat(n),o=new a.gast.Flat(i),c=s.first(o);this.follows.put(r,c)},ResyncFollowsWalker}(i.RestWalker);t.ResyncFollowsWalker=p,t.computeAllProdsFollows=computeAllProdsFollows,t.buildBetweenProdsFollowPrefix=buildBetweenProdsFollowPrefix,t.buildInProdFollowPrefix=buildInProdFollowPrefix},function(e,t,n){"use strict";function restForRepetitionWithSeparator(e,t,n){var i=[new r.gast.Option([new r.gast.Terminal(e.separator)].concat(e.definition))],o=i.concat(t,n);return o}var r=n(7),i=n(4),o=function(){function RestWalker(){}return RestWalker.prototype.walk=function(e,t){var n=this;void 0===t&&(t=[]),i.forEach(e.definition,function(o,a){var s=i.drop(e.definition,a+1);if(o instanceof r.gast.NonTerminal)n.walkProdRef(o,s,t);else if(o instanceof r.gast.Terminal)n.walkTerminal(o,s,t);else if(o instanceof r.gast.Flat)n.walkFlat(o,s,t);else if(o instanceof r.gast.Option)n.walkOption(o,s,t);else if(o instanceof r.gast.RepetitionMandatory)n.walkAtLeastOne(o,s,t);else if(o instanceof r.gast.RepetitionMandatoryWithSeparator)n.walkAtLeastOneSep(o,s,t);else if(o instanceof r.gast.RepetitionWithSeparator)n.walkManySep(o,s,t);else if(o instanceof r.gast.Repetition)n.walkMany(o,s,t);else{if(!(o instanceof r.gast.Alternation))throw Error("non exhaustive match");n.walkOr(o,s,t)}})},RestWalker.prototype.walkTerminal=function(e,t,n){},RestWalker.prototype.walkProdRef=function(e,t,n){},RestWalker.prototype.walkFlat=function(e,t,n){var r=t.concat(n);this.walk(e,r)},RestWalker.prototype.walkOption=function(e,t,n){var r=t.concat(n);this.walk(e,r)},RestWalker.prototype.walkAtLeastOne=function(e,t,n){var i=[new r.gast.Option(e.definition)].concat(t,n);this.walk(e,i)},RestWalker.prototype.walkAtLeastOneSep=function(e,t,n){var r=restForRepetitionWithSeparator(e,t,n);this.walk(e,r)},RestWalker.prototype.walkMany=function(e,t,n){var i=[new r.gast.Option(e.definition)].concat(t,n);this.walk(e,i)},RestWalker.prototype.walkManySep=function(e,t,n){var r=restForRepetitionWithSeparator(e,t,n);this.walk(e,r)},RestWalker.prototype.walkOr=function(e,t,n){var o=this,a=t.concat(n);i.forEach(e.definition,function(e){var t=new r.gast.Flat([e]);o.walk(t,a)})},RestWalker}();t.RestWalker=o},function(e,t){"use strict";t.IN="_~IN~_"},function(e,t,n){"use strict";function buildLookaheadForTopLevel(e){var t=new r.gast.Flat(e.definition),n=i.first(t);return getSimpleLookahead(n)}function buildLookaheadForOption(e,t){return buildLookAheadForGrammarProd(o.NextInsideOptionWalker,e,t)}function buildLookaheadForMany(e,t){return buildLookAheadForGrammarProd(o.NextInsideManyWalker,e,t)}function buildLookaheadForManySep(e,t){return buildLookAheadForGrammarProd(o.NextInsideManySepWalker,e,t)}function buildLookaheadForAtLeastOne(e,t){return buildLookAheadForGrammarProd(o.NextInsideAtLeastOneWalker,e,t)}function buildLookaheadForAtLeastOneSep(e,t){return buildLookAheadForGrammarProd(o.NextInsideAtLeastOneSepWalker,e,t)}function buildLookaheadForOr(e,t,n){void 0===n&&(n=!1);var r=new o.NextInsideOrWalker(t,e).startWalking();n||checkForOrAmbiguities(r,e,t);var i=a.isEmpty(a.last(r));if(i){var s=r.length-1;return function(){for(var e=this.NEXT_TOKEN(),t=0;s>t;t++)for(var n=r[t],i=0;i<n.length;i++)if(e instanceof n[i])return t;return s}}return function(){for(var e=this.NEXT_TOKEN(),t=0;t<r.length;t++)for(var n=r[t],i=0;i<n.length;i++)if(e instanceof n[i])return t;return-1}}function checkForOrAmbiguities(e,t,n){var r=checkAlternativesAmbiguities(e);if(!a.isEmpty(r)){var i=a.map(r,function(e){return"Ambiguous alternatives: <"+e.alts.join(" ,")+"> in <OR"+t+"> inside <"+n.name+"> "+("Rule, <"+s.tokenName(e.token)+"> may appears as the first Terminal in all these alternatives.\n")});throw new Error(i.join("\n ---------------- \n")+"To Resolve this, either: \n1. refactor your grammar to be LL(1)\n2. provide explicit lookahead functions in the form {WHEN:laFunc, THEN_DO:...}\n3. Add ignore arg to this OR Production:\nOR([], 'msg', recognizer.IGNORE_AMBIGUITIES)\nIn that case the parser will always pick the first alternative that matches and ignore all the others")}}function checkAlternativesAmbiguities(e){var t=a.flatten(e),n=a.uniq(t),r=a.map(n,function(t){var n=a.pick(e,function(e){return a.find(e,function(e){return e===t})}),r=a.map(a.keys(n),function(e){return parseInt(e,10)+1});return{token:t,alts:r}}),i=a.filter(r,function(e){return e.alts.length>1});return i}function buildLookAheadForGrammarProd(e,t,n){var r={ruleStack:[n.name],occurrenceStack:[1],occurrence:t},i=new e(n,r),o=i.startWalking();return getSimpleLookahead(o)}function getSimpleLookahead(e){return function(){for(var t=this.NEXT_TOKEN(),n=0;n<e.length;n++)if(t instanceof e[n])return!0;return!1}}var r=n(7),i=n(13),o=n(18),a=n(4),s=n(10);t.buildLookaheadForTopLevel=buildLookaheadForTopLevel,t.buildLookaheadForOption=buildLookaheadForOption,t.buildLookaheadForMany=buildLookaheadForMany,t.buildLookaheadForManySep=buildLookaheadForManySep,t.buildLookaheadForAtLeastOne=buildLookaheadForAtLeastOne,t.buildLookaheadForAtLeastOneSep=buildLookaheadForAtLeastOneSep,t.buildLookaheadForOr=buildLookaheadForOr,t.checkForOrAmbiguities=checkForOrAmbiguities,t.checkAlternativesAmbiguities=checkAlternativesAmbiguities},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},i=n(15),o=n(7),a=n(4),s=n(10),c=n(13),u=function(e){function AbstractNextPossibleTokensWalker(t,n){e.call(this),this.topProd=t,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}return r(AbstractNextPossibleTokensWalker,e),AbstractNextPossibleTokensWalker.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=a.cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=a.cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},AbstractNextPossibleTokensWalker.prototype.walk=function(t,n){void 0===n&&(n=[]),this.found||e.prototype.walk.call(this,t,n)},AbstractNextPossibleTokensWalker.prototype.walkProdRef=function(e,t,n){if(e.referencedRule.name===this.nextProductionName&&e.occurrenceInParent===this.nextProductionOccurrence){
var r=t.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,r)}},AbstractNextPossibleTokensWalker.prototype.updateExpectedNext=function(){a.isEmpty(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},AbstractNextPossibleTokensWalker}(i.RestWalker);t.AbstractNextPossibleTokensWalker=u;var l=function(e){function NextAfterTokenWalker(t,n){e.call(this,t,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=s.tokenName(this.path.lastTok),this.nextTerminalOccurrence=this.path.lastTokOccurrence}return r(NextAfterTokenWalker,e),NextAfterTokenWalker.prototype.walkTerminal=function(e,t,n){if(this.isAtEndOfPath&&s.tokenName(e.terminalType)===this.nextTerminalName&&e.occurrenceInParent===this.nextTerminalOccurrence&&!this.found){var r=t.concat(n),i=new o.gast.Flat(r);this.possibleTokTypes=c.first(i),this.found=!0}},NextAfterTokenWalker}(u);t.NextAfterTokenWalker=l;var p=function(e){function NextInsideOptionWalker(t,n){e.call(this,t,n),this.path=n,this.nextOptionOccurrence=0,this.nextOptionOccurrence=this.path.occurrence}return r(NextInsideOptionWalker,e),NextInsideOptionWalker.prototype.walkOption=function(t,n,r){if(this.isAtEndOfPath&&t.occurrenceInParent===this.nextOptionOccurrence&&!this.found){var i=new o.gast.Flat(t.definition);this.possibleTokTypes=c.first(i),this.found=!0}else e.prototype.walkOption.call(this,t,n,r)},NextInsideOptionWalker}(u);t.NextInsideOptionWalker=p;var f=function(e){function NextInsideManyWalker(t,n){e.call(this,t,n),this.path=n,this.nextOccurrence=0,this.nextOccurrence=this.path.occurrence}return r(NextInsideManyWalker,e),NextInsideManyWalker.prototype.walkMany=function(t,n,r){if(this.isAtEndOfPath&&t.occurrenceInParent===this.nextOccurrence&&!this.found){var i=new o.gast.Flat(t.definition);this.possibleTokTypes=c.first(i),this.found=!0}else e.prototype.walkMany.call(this,t,n,r)},NextInsideManyWalker}(u);t.NextInsideManyWalker=f;var h=function(e){function NextInsideManySepWalker(t,n){e.call(this,t,n),this.path=n,this.nextOccurrence=0,this.nextOccurrence=this.path.occurrence}return r(NextInsideManySepWalker,e),NextInsideManySepWalker.prototype.walkManySep=function(t,n,r){if(this.isAtEndOfPath&&t.occurrenceInParent===this.nextOccurrence&&!this.found){var i=new o.gast.Flat(t.definition);this.possibleTokTypes=c.first(i),this.found=!0}else e.prototype.walkManySep.call(this,t,n,r)},NextInsideManySepWalker}(u);t.NextInsideManySepWalker=h;var d=function(e){function NextInsideAtLeastOneWalker(t,n){e.call(this,t,n),this.path=n,this.nextOccurrence=0,this.nextOccurrence=this.path.occurrence}return r(NextInsideAtLeastOneWalker,e),NextInsideAtLeastOneWalker.prototype.walkAtLeastOne=function(t,n,r){if(this.isAtEndOfPath&&t.occurrenceInParent===this.nextOccurrence&&!this.found){var i=new o.gast.Flat(t.definition);this.possibleTokTypes=c.first(i),this.found=!0}else e.prototype.walkAtLeastOne.call(this,t,n,r)},NextInsideAtLeastOneWalker}(u);t.NextInsideAtLeastOneWalker=d;var E=function(e){function NextInsideAtLeastOneSepWalker(t,n){e.call(this,t,n),this.path=n,this.nextOccurrence=0,this.nextOccurrence=this.path.occurrence}return r(NextInsideAtLeastOneSepWalker,e),NextInsideAtLeastOneSepWalker.prototype.walkAtLeastOneSep=function(t,n,r){if(this.isAtEndOfPath&&t.occurrenceInParent===this.nextOccurrence&&!this.found){var i=new o.gast.Flat(t.definition);this.possibleTokTypes=c.first(i),this.found=!0}else e.prototype.walkAtLeastOneSep.call(this,t,n,r)},NextInsideAtLeastOneSepWalker}(u);t.NextInsideAtLeastOneSepWalker=E;var T=function(e){function NextInsideOrWalker(t,n){e.call(this),this.topRule=t,this.occurrence=n,this.result=[]}return r(NextInsideOrWalker,e),NextInsideOrWalker.prototype.startWalking=function(){return this.walk(this.topRule),this.result},NextInsideOrWalker.prototype.walkOr=function(t,n,r){t.occurrenceInParent===this.occurrence?this.result=a.map(t.definition,function(e){var t=new o.gast.Flat([e]);return c.first(t)}):e.prototype.walkOr.call(this,t,n,r)},NextInsideOrWalker}(i.RestWalker);t.NextInsideOrWalker=T;var A=function(e){function AbstractNextTerminalAfterProductionWalker(t,n){e.call(this),this.topRule=t,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}return r(AbstractNextTerminalAfterProductionWalker,e),AbstractNextTerminalAfterProductionWalker.prototype.startWalking=function(){return this.walk(this.topRule),this.result},AbstractNextTerminalAfterProductionWalker}(i.RestWalker);t.AbstractNextTerminalAfterProductionWalker=A;var y=function(e){function NextTerminalAfterManyWalker(){e.apply(this,arguments)}return r(NextTerminalAfterManyWalker,e),NextTerminalAfterManyWalker.prototype.walkMany=function(t,n,r){if(t.occurrenceInParent===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof o.gast.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.occurrenceInParent)}else e.prototype.walkMany.call(this,t,n,r)},NextTerminalAfterManyWalker}(A);t.NextTerminalAfterManyWalker=y;var O=function(e){function NextTerminalAfterManySepWalker(){e.apply(this,arguments)}return r(NextTerminalAfterManySepWalker,e),NextTerminalAfterManySepWalker.prototype.walkManySep=function(t,n,r){if(t.occurrenceInParent===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof o.gast.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.occurrenceInParent)}else e.prototype.walkManySep.call(this,t,n,r)},NextTerminalAfterManySepWalker}(A);t.NextTerminalAfterManySepWalker=O;var N=function(e){function NextTerminalAfterAtLeastOneWalker(){e.apply(this,arguments)}return r(NextTerminalAfterAtLeastOneWalker,e),NextTerminalAfterAtLeastOneWalker.prototype.walkAtLeastOne=function(t,n,r){if(t.occurrenceInParent===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof o.gast.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.occurrenceInParent)}else e.prototype.walkAtLeastOne.call(this,t,n,r)},NextTerminalAfterAtLeastOneWalker}(A);t.NextTerminalAfterAtLeastOneWalker=N;var R=function(e){function NextTerminalAfterAtLeastOneSepWalker(){e.apply(this,arguments)}return r(NextTerminalAfterAtLeastOneSepWalker,e),NextTerminalAfterAtLeastOneSepWalker.prototype.walkAtLeastOneSep=function(t,n,r){if(t.occurrenceInParent===this.occurrence){var i=a.first(n.concat(r));this.result.isEndOfRule=void 0===i,i instanceof o.gast.Terminal&&(this.result.token=i.terminalType,this.result.occurrence=i.occurrenceInParent)}else e.prototype.walkAtLeastOneSep.call(this,t,n,r)},NextTerminalAfterAtLeastOneSepWalker}(A);t.NextTerminalAfterAtLeastOneSepWalker=R},function(e,t,n){"use strict";function buildTopProduction(e,n,i){t.terminalNameToConstructor=i;var o=" "+e,a=removeComments(" "+o),s=removeStringLiterals(a),c=createRanges(s),u=new r.Range(0,e.length+2);return buildTopLevel(n,u,c,e)}function buildTopLevel(e,t,n,r){var o=new i.gast.Rule(e,[],r);return buildAbstractProd(o,t,n)}function buildProdGast(e,t){switch(e.type){case a.AT_LEAST_ONE:return buildAtLeastOneProd(e,t);case a.AT_LEAST_ONE_SEP:return buildAtLeastOneSepProd(e,t);case a.MANY_SEP:return buildManySepProd(e,t);case a.MANY:return buildManyProd(e,t);case a.OPTION:return buildOptionProd(e,t);case a.OR:return buildOrProd(e,t);case a.FLAT:return buildAbstractProd(new i.gast.Flat([]),e.range,t);case a.REF:return buildRefProd(e);case a.TERMINAL:return buildTerminalProd(e);default:throw Error("non exhaustive match")}}function buildRefProd(e){var t=u.exec(e.text),n=void 0===t[1],r=n?1:parseInt(t[1],10),o=t[2],a=new i.gast.NonTerminal(o,void 0,r);return a.implicitOccurrenceIndex=n,a}function buildTerminalProd(e){var n=s.exec(e.text),r=void 0===n[1],o=r?1:parseInt(n[1],10),a=n[2],c=t.terminalNameToConstructor[a];if(!c)throw Error("Terminal Token name: "+a+" not found");var u=new i.gast.Terminal(c,o);return u.implicitOccurrenceIndex=r,u}function buildProdWithOccurrence(e,t,n,r){var i=e.exec(n.text),o=void 0===i[1];return t.occurrenceInParent=o?1:parseInt(i[1],10),t.implicitOccurrenceIndex=o,buildAbstractProd(t,n.range,r)}function buildAtLeastOneProd(e,t){return buildProdWithOccurrence(O,new i.gast.RepetitionMandatory([]),e,t)}function buildAtLeastOneSepProd(e,t){return buildRepetitionWithSep(e,t,i.gast.RepetitionMandatoryWithSeparator,A)}function buildManyProd(e,t){return buildProdWithOccurrence(h,new i.gast.Repetition([]),e,t)}function buildManySepProd(e,t){return buildRepetitionWithSep(e,t,i.gast.RepetitionWithSeparator,E)}function buildRepetitionWithSep(e,n,r,i){var o=i.exec(e.text),a=void 0===o[1],s=a?1:parseInt(o[1],10),c=o[2],u=t.terminalNameToConstructor[c];if(!u)throw Error("Separator Terminal Token name: "+c+" not found");var l=new r([],u,s);return l.implicitOccurrenceIndex=a,buildAbstractProd(l,e.range,n)}function buildOptionProd(e,t){return buildProdWithOccurrence(p,new i.gast.Option([]),e,t)}function buildOrProd(e,t){return buildProdWithOccurrence(R,new i.gast.Alternation([]),e,t)}function buildAbstractProd(e,t,n){var r=getDirectlyContainedRanges(t,n),i=o.sortBy(r,function(e){return e.range.start}),a=[];return o.forEach(i,function(e){a.push(buildProdGast(e,n))}),e.definition=a,e}function getDirectlyContainedRanges(e,t){return o.filter(t,function(n){var r=e.strictlyContainsRange(n.range),i=o.every(t,function(t){var r=t.range.strictlyContainsRange(n.range),i=t.range.isStrictlyContainedInRange(e);return!(r&&i)});return r&&i})}function removeComments(e){var t=e.replace(g,""),n=t.replace(v,"");return n}function removeStringLiterals(e){var t=e.replace(S,""),n=t.replace(P,"");return n}function createRanges(e){var t=createTerminalRanges(e),n=createRefsRanges(e),r=createAtLeastOneRanges(e),i=createAtLeastOneSepRanges(e),o=createManyRanges(e),a=createManySepRanges(e),s=createOptionRanges(e),c=createOrRanges(e);return[].concat(t,n,r,i,o,a,s,c)}function createTerminalRanges(e){return createRefOrTerminalProdRangeInternal(e,a.TERMINAL,c)}function createRefsRanges(e){return createRefOrTerminalProdRangeInternal(e,a.REF,l)}function createAtLeastOneRanges(e){return createOperatorProdRangeParenthesis(e,a.AT_LEAST_ONE,N)}function createAtLeastOneSepRanges(e){return createOperatorProdRangeParenthesis(e,a.AT_LEAST_ONE_SEP,y)}function createManyRanges(e){return createOperatorProdRangeParenthesis(e,a.MANY,d)}function createManySepRanges(e){return createOperatorProdRangeParenthesis(e,a.MANY_SEP,T)}function createOptionRanges(e){return createOperatorProdRangeParenthesis(e,a.OPTION,f)}function createOrRanges(e){var t=createOperatorProdRangeParenthesis(e,a.OR,_),n=createOrPartRanges(t);return t.concat(n)}function createOrPartRanges(e){var t=[];o.forEach(e,function(e){var n=createOperatorProdRangeInternal(e.text,a.FLAT,m,L),r=e.range.start;o.forEach(n,function(e){e.range.start+=r,e.range.end+=r}),t=t.concat(n)});var n=o.uniq(t,function(e){return e.type+"~"+e.range.start+"~"+e.range.end+"~"+e.text});return n}function createRefOrTerminalProdRangeInternal(e,t,n){for(var i,o=[];i=n.exec(e);){var a=i.index,s=n.lastIndex,c=new r.Range(a,s),u=i[0];o.push({range:c,text:u,type:t})}return o}function createOperatorProdRangeParenthesis(e,t,n){return createOperatorProdRangeInternal(e,t,n,k)}function createOperatorProdRangeInternal(e,t,n,i){for(var o,a=[];o=n.exec(e);){var s=o.index,c=i(s+o[0].length,e),u=new r.Range(s,c),l=e.substr(s,c-s+1);a.push({range:u,text:l,type:t})}return a}function findClosingOffset(e,t,n,r){for(var i=[1],a=-1;!o.isEmpty(i)&&a+n<r.length;){a++;var s=r.charAt(n+a);s===e?i.push(1):s===t&&i.pop()}if(o.isEmpty(i))return a+n;throw new Error("INVALID INPUT TEXT, UNTERMINATED PARENTHESIS")}var r=n(20),i=n(7),o=n(4);!function(e){e[e.OPTION=0]="OPTION",e[e.OR=1]="OR",e[e.MANY=2]="MANY",e[e.MANY_SEP=3]="MANY_SEP",e[e.AT_LEAST_ONE=4]="AT_LEAST_ONE",e[e.AT_LEAST_ONE_SEP=5]="AT_LEAST_ONE_SEP",e[e.REF=6]="REF",e[e.TERMINAL=7]="TERMINAL",e[e.FLAT=8]="FLAT"}(t.ProdType||(t.ProdType={}));var a=t.ProdType,s=/\.\s*CONSUME(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,c=new RegExp(s.source,"g"),u=/\.\s*SUBRULE(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,l=new RegExp(u.source,"g"),p=/\.\s*OPTION(\d)?\s*\(/,f=new RegExp(p.source,"g"),h=/\.\s*MANY(\d)?\s*\(/,d=new RegExp(h.source,"g"),E=/\.\s*MANY_SEP(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,T=new RegExp(E.source,"g"),A=/\.\s*AT_LEAST_ONE_SEP(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,y=new RegExp(A.source,"g"),O=/\.\s*AT_LEAST_ONE(\d)?\s*\(/,N=new RegExp(O.source,"g"),R=/\.\s*OR(\d)?\s*\(/,_=new RegExp(R.source,"g"),m=/{\s*(WHEN|ALT)\s*:/g;t.terminalNameToConstructor={},t.buildTopProduction=buildTopProduction,t.buildProdGast=buildProdGast,t.getDirectlyContainedRanges=getDirectlyContainedRanges;var g=/\/\/.*/g,v=/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\//g,S=/"([^\\"]+|\\([bfnrtv"\\/]|u[0-9a-fA-F]{4}))*"/g,P=/'([^\\']+|\\([bfnrtv'\\/]|u[0-9a-fA-F]{4}))*'/g;t.removeComments=removeComments,t.removeStringLiterals=removeStringLiterals,t.createRanges=createRanges,t.createTerminalRanges=createTerminalRanges,t.createRefsRanges=createRefsRanges,t.createAtLeastOneRanges=createAtLeastOneRanges,t.createAtLeastOneSepRanges=createAtLeastOneSepRanges,t.createManyRanges=createManyRanges,t.createManySepRanges=createManySepRanges,t.createOptionRanges=createOptionRanges,t.createOrRanges=createOrRanges;var L=o.partial(findClosingOffset,"{","}"),k=o.partial(findClosingOffset,"(",")");t.createOrPartRanges=createOrPartRanges,t.findClosingOffset=findClosingOffset},function(e,t){"use strict";function isValidRange(e,t){return!(0>e||e>t)}var n=function(){function Range(e,t){if(this.start=e,this.end=t,!isValidRange(e,t))throw new Error("INVALID RANGE")}return Range.prototype.contains=function(e){return this.start<=e&&this.end>=e},Range.prototype.containsRange=function(e){return this.start<=e.start&&this.end>=e.end},Range.prototype.isContainedInRange=function(e){return e.containsRange(this)},Range.prototype.strictlyContainsRange=function(e){return this.start<e.start&&this.end>e.end},Range.prototype.isStrictlyContainedInRange=function(e){return e.strictlyContainsRange(this)},Range}();t.Range=n,t.isValidRange=isValidRange},function(e,t,n){"use strict";function clearCache(){r.clearCache()}var r=n(2);t.clearCache=clearCache}])});
/*! chevrotain - v0.5.15 - 2016-01-18 */
!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("chevrotain",[],factory):"object"==typeof exports?exports.chevrotain=factory():root.chevrotain=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){var parser_public_1=__webpack_require__(1),lexer_public_1=__webpack_require__(11),tokens_public_1=__webpack_require__(10),exceptions_public_1=__webpack_require__(5),gast_public_1=__webpack_require__(7),cache_public_1=__webpack_require__(21),API={};API.VERSION="0.5.15",API.Parser=parser_public_1.Parser,API.Lexer=lexer_public_1.Lexer,API.Token=tokens_public_1.Token,API.VirtualToken=tokens_public_1.VirtualToken,API.EOF=tokens_public_1.EOF,API.extendToken=tokens_public_1.extendToken,API.tokenName=tokens_public_1.tokenName,API.EMPTY_ALT=parser_public_1.EMPTY_ALT,API.exceptions={},API.exceptions.isRecognitionException=exceptions_public_1.exceptions.isRecognitionException,API.exceptions.EarlyExitException=exceptions_public_1.exceptions.EarlyExitException,API.exceptions.MismatchedTokenException=exceptions_public_1.exceptions.MismatchedTokenException,API.exceptions.NotAllInputParsedException=exceptions_public_1.exceptions.NotAllInputParsedException,API.exceptions.NoViableAltException=exceptions_public_1.exceptions.NoViableAltException,API.gast={},API.gast.GAstVisitor=gast_public_1.gast.GAstVisitor,API.gast.Flat=gast_public_1.gast.Flat,API.gast.Repetition=gast_public_1.gast.Repetition,API.gast.RepetitionWithSeparator=gast_public_1.gast.RepetitionWithSeparator,API.gast.RepetitionMandatory=gast_public_1.gast.RepetitionMandatory,API.gast.RepetitionMandatoryWithSeparator=gast_public_1.gast.RepetitionMandatoryWithSeparator,API.gast.Option=gast_public_1.gast.Option,API.gast.Alternation=gast_public_1.gast.Alternation,API.gast.NonTerminal=gast_public_1.gast.NonTerminal,API.gast.Terminal=gast_public_1.gast.Terminal,API.gast.Rule=gast_public_1.gast.Rule,API.clearCache=cache_public_1.clearCache,module.exports=API},function(module,exports,__webpack_require__){function EMPTY_ALT(value){return void 0===value&&(value=void 0),function(){return value}}function InRuleRecoveryException(message){this.name=lang_extensions_1.functionName(InRuleRecoveryException),this.message=message}var cache=__webpack_require__(2),exceptions_public_1=__webpack_require__(5),lang_extensions_1=__webpack_require__(3),resolver_1=__webpack_require__(6),checks_1=__webpack_require__(8),utils_1=__webpack_require__(4),follow_1=__webpack_require__(14),tokens_public_1=__webpack_require__(10),lookahead_1=__webpack_require__(17),gast_builder_1=__webpack_require__(19),interpreter_1=__webpack_require__(18),constants_1=__webpack_require__(16);!function(ParserDefinitionErrorType){ParserDefinitionErrorType[ParserDefinitionErrorType.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",ParserDefinitionErrorType[ParserDefinitionErrorType.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",ParserDefinitionErrorType[ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS=2]="DUPLICATE_PRODUCTIONS",ParserDefinitionErrorType[ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF=3]="UNRESOLVED_SUBRULE_REF",ParserDefinitionErrorType[ParserDefinitionErrorType.LEFT_RECURSION=4]="LEFT_RECURSION",ParserDefinitionErrorType[ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT=5]="NONE_LAST_EMPTY_ALT"}(exports.ParserDefinitionErrorType||(exports.ParserDefinitionErrorType={}));exports.ParserDefinitionErrorType;exports.EMPTY_ALT=EMPTY_ALT;var EOF_FOLLOW_KEY={},Parser=function(){function Parser(input,tokensMapOrArr,isErrorRecoveryEnabled){if(void 0===isErrorRecoveryEnabled&&(isErrorRecoveryEnabled=!0),this.errors=[],this._input=[],this.inputIdx=-1,this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.tokensMap=void 0,this.definedRulesNames=[],this._input=input,this.isErrorRecoveryEnabled=isErrorRecoveryEnabled,this.className=lang_extensions_1.classNameFromInstance(this),this.firstAfterRepMap=cache.getFirstAfterRepForClass(this.className),this.classLAFuncs=cache.getLookaheadFuncsForClass(this.className),cache.CLASS_TO_DEFINITION_ERRORS.containsKey(this.className)?this.definitionErrors=cache.CLASS_TO_DEFINITION_ERRORS.get(this.className):(this.definitionErrors=[],cache.CLASS_TO_DEFINITION_ERRORS.put(this.className,this.definitionErrors)),utils_1.isArray(tokensMapOrArr))this.tokensMap=utils_1.reduce(tokensMapOrArr,function(acc,tokenClazz){return acc[tokens_public_1.tokenName(tokenClazz)]=tokenClazz,acc},{});else{if(!utils_1.isObject(tokensMapOrArr))throw new Error("'tokensMapOrArr' argument must be An Array of Token constructors or a Dictionary of Tokens.");this.tokensMap=utils_1.cloneObj(tokensMapOrArr)}this.tokensMap[tokens_public_1.tokenName(tokens_public_1.EOF)]=tokens_public_1.EOF,void 0===cache.CLASS_TO_OR_LA_CACHE[this.className]&&cache.initLookAheadKeyCache(this.className),this.orLookaheadKeys=cache.CLASS_TO_OR_LA_CACHE[this.className],this.manyLookaheadKeys=cache.CLASS_TO_MANY_LA_CACHE[this.className],this.manySepLookaheadKeys=cache.CLASS_TO_MANY_SEP_LA_CACHE[this.className],this.atLeastOneLookaheadKeys=cache.CLASS_TO_AT_LEAST_ONE_LA_CACHE[this.className],this.atLeastOneSepLookaheadKeys=cache.CLASS_TO_AT_LEAST_ONE_SEP_LA_CACHE[this.className],this.optionLookaheadKeys=cache.CLASS_TO_OPTION_LA_CACHE[this.className]}return Parser.performSelfAnalysis=function(classInstance){var defErrorsMsgs,definitionErrors=[],className=lang_extensions_1.classNameFromInstance(classInstance);if(!cache.CLASS_TO_SELF_ANALYSIS_DONE.containsKey(className)){var grammarProductions=cache.getProductionsForClass(className);definitionErrors=cache.CLASS_TO_DEFINITION_ERRORS.get(className);var resolverErrors=resolver_1.resolveGrammar(grammarProductions);definitionErrors.push.apply(definitionErrors,resolverErrors),cache.CLASS_TO_SELF_ANALYSIS_DONE.put(className,!0);var validationErrors=checks_1.validateGrammar(grammarProductions.values());if(definitionErrors.push.apply(definitionErrors,validationErrors),!utils_1.isEmpty(definitionErrors)&&!Parser.DEFER_DEFINITION_ERRORS_HANDLING)throw defErrorsMsgs=utils_1.map(definitionErrors,function(defError){return defError.message}),new Error("Parser Definition Errors detected\n: "+defErrorsMsgs.join("\n-------------------------------\n"));if(utils_1.isEmpty(definitionErrors)){var allFollows=follow_1.computeAllProdsFollows(grammarProductions.values());cache.setResyncFollowsForClass(className,allFollows)}}if(!utils_1.isEmpty(cache.CLASS_TO_DEFINITION_ERRORS.get(className))&&!Parser.DEFER_DEFINITION_ERRORS_HANDLING)throw defErrorsMsgs=utils_1.map(cache.CLASS_TO_DEFINITION_ERRORS.get(className),function(defError){return defError.message}),new Error("Parser Definition Errors detected\n: "+defErrorsMsgs.join("\n-------------------------------\n"))},Object.defineProperty(Parser.prototype,"input",{get:function(){return utils_1.cloneArr(this._input)},set:function(newInput){this.reset(),this._input=newInput},enumerable:!0,configurable:!0}),Parser.prototype.reset=function(){this.isBackTrackingStack=[],this.errors=[],this._input=[],this.inputIdx=-1,this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[]},Parser.prototype.isAtEndOfInput=function(){return this.LA(1)instanceof tokens_public_1.EOF},Parser.prototype.getGAstProductions=function(){return cache.getProductionsForClass(this.className)},Parser.prototype.isBackTracking=function(){return!utils_1.isEmpty(this.isBackTrackingStack)},Parser.prototype.SAVE_ERROR=function(error){if(exceptions_public_1.exceptions.isRecognitionException(error))return this.errors.push(error),error;throw Error("trying to save an Error which is not a RecognitionException")},Parser.prototype.NEXT_TOKEN=function(){return this.LA(1)},Parser.prototype.LA=function(howMuch){return this._input.length<=this.inputIdx+howMuch?new tokens_public_1.EOF:this._input[this.inputIdx+howMuch]},Parser.prototype.isNextRule=function(ruleName){var classLAFuncs=cache.getLookaheadFuncsForClass(this.className),condition=classLAFuncs.get(ruleName);if(void 0===condition){var ruleGrammar=this.getGAstProductions().get(ruleName);condition=lookahead_1.buildLookaheadForTopLevel(ruleGrammar),classLAFuncs.put(ruleName,condition)}return condition.call(this)},Parser.prototype.BACKTRACK=function(grammarRule,isValid){var _this=this;return function(){_this.isBackTrackingStack.push(1);var orgState=_this.saveRecogState();try{var ruleResult=grammarRule.call(_this);return isValid(ruleResult)}catch(e){if(exceptions_public_1.exceptions.isRecognitionException(e))return!1;throw e}finally{_this.reloadRecogState(orgState),_this.isBackTrackingStack.pop()}}},Parser.prototype.SKIP_TOKEN=function(){return this.inputIdx<=this._input.length-2?(this.inputIdx++,this.NEXT_TOKEN()):new tokens_public_1.EOF},Parser.prototype.CONSUME=function(tokClass){return this.CONSUME1(tokClass)},Parser.prototype.CONSUME1=function(tokClass){return this.consumeInternal(tokClass,1)},Parser.prototype.CONSUME2=function(tokClass){return this.consumeInternal(tokClass,2)},Parser.prototype.CONSUME3=function(tokClass){return this.consumeInternal(tokClass,3)},Parser.prototype.CONSUME4=function(tokClass){return this.consumeInternal(tokClass,4)},Parser.prototype.CONSUME5=function(tokClass){return this.consumeInternal(tokClass,5)},Parser.prototype.SUBRULE=function(ruleToCall,args){return void 0===args&&(args=[]),this.SUBRULE1(ruleToCall,args)},Parser.prototype.SUBRULE1=function(ruleToCall,args){return void 0===args&&(args=[]),ruleToCall.call(this,1,args)},Parser.prototype.SUBRULE2=function(ruleToCall,args){return void 0===args&&(args=[]),ruleToCall.call(this,2,args)},Parser.prototype.SUBRULE3=function(ruleToCall,args){return void 0===args&&(args=[]),ruleToCall.call(this,3,args)},Parser.prototype.SUBRULE4=function(ruleToCall,args){return void 0===args&&(args=[]),ruleToCall.call(this,4,args)},Parser.prototype.SUBRULE5=function(ruleToCall,args){return void 0===args&&(args=[]),ruleToCall.call(this,5,args)},Parser.prototype.OPTION=function(laFuncOrAction,action){return this.OPTION1.call(this,laFuncOrAction,action)},Parser.prototype.OPTION1=function(laFuncOrAction,action){return void 0===action&&(action=laFuncOrAction,laFuncOrAction=this.getLookaheadFuncForOption(1)),this.optionInternal(laFuncOrAction,action)},Parser.prototype.OPTION2=function(laFuncOrAction,action){return void 0===action&&(action=laFuncOrAction,laFuncOrAction=this.getLookaheadFuncForOption(2)),this.optionInternal(laFuncOrAction,action)},Parser.prototype.OPTION3=function(laFuncOrAction,action){return void 0===action&&(action=laFuncOrAction,laFuncOrAction=this.getLookaheadFuncForOption(3)),this.optionInternal(laFuncOrAction,action)},Parser.prototype.OPTION4=function(laFuncOrAction,action){return void 0===action&&(action=laFuncOrAction,laFuncOrAction=this.getLookaheadFuncForOption(4)),this.optionInternal(laFuncOrAction,action)},Parser.prototype.OPTION5=function(laFuncOrAction,action){return void 0===action&&(action=laFuncOrAction,laFuncOrAction=this.getLookaheadFuncForOption(5)),this.optionInternal(laFuncOrAction,action)},Parser.prototype.OR=function(alts,errMsgTypes,ignoreAmbiguities){return void 0===ignoreAmbiguities&&(ignoreAmbiguities=!1),this.OR1(alts,errMsgTypes,ignoreAmbiguities)},Parser.prototype.OR1=function(alts,errMsgTypes,ignoreAmbiguities){return void 0===ignoreAmbiguities&&(ignoreAmbiguities=!1),this.orInternal(alts,errMsgTypes,1,ignoreAmbiguities)},Parser.prototype.OR2=function(alts,errMsgTypes,ignoreAmbiguities){return void 0===ignoreAmbiguities&&(ignoreAmbiguities=!1),this.orInternal(alts,errMsgTypes,2,ignoreAmbiguities)},Parser.prototype.OR3=function(alts,errMsgTypes,ignoreAmbiguities){return void 0===ignoreAmbiguities&&(ignoreAmbiguities=!1),this.orInternal(alts,errMsgTypes,3,ignoreAmbiguities)},Parser.prototype.OR4=function(alts,errMsgTypes,ignoreAmbiguities){return void 0===ignoreAmbiguities&&(ignoreAmbiguities=!1),this.orInternal(alts,errMsgTypes,4,ignoreAmbiguities)},Parser.prototype.OR5=function(alts,errMsgTypes,ignoreAmbiguities){return void 0===ignoreAmbiguities&&(ignoreAmbiguities=!1),this.orInternal(alts,errMsgTypes,5,ignoreAmbiguities)},Parser.prototype.MANY=function(laFuncOrAction,action){return this.MANY1.call(this,laFuncOrAction,action)},Parser.prototype.MANY1=function(laFuncOrAction,action){this.manyInternal(this.MANY1,"MANY1",1,laFuncOrAction,action)},Parser.prototype.MANY2=function(laFuncOrAction,action){this.manyInternal(this.MANY2,"MANY2",2,laFuncOrAction,action)},Parser.prototype.MANY3=function(laFuncOrAction,action){this.manyInternal(this.MANY3,"MANY3",3,laFuncOrAction,action)},Parser.prototype.MANY4=function(laFuncOrAction,action){this.manyInternal(this.MANY4,"MANY4",4,laFuncOrAction,action)},Parser.prototype.MANY5=function(laFuncOrAction,action){this.manyInternal(this.MANY5,"MANY5",5,laFuncOrAction,action)},Parser.prototype.MANY_SEP=function(separator,laFuncOrAction,action){return this.MANY_SEP1.call(this,separator,laFuncOrAction,action)},Parser.prototype.MANY_SEP1=function(separator,laFuncOrAction,action){return this.manySepFirstInternal(this.MANY_SEP1,"MANY_SEP1",1,separator,laFuncOrAction,action)},Parser.prototype.MANY_SEP2=function(separator,laFuncOrAction,action){return this.manySepFirstInternal(this.MANY_SEP2,"MANY_SEP2",2,separator,laFuncOrAction,action)},Parser.prototype.MANY_SEP3=function(separator,laFuncOrAction,action){return this.manySepFirstInternal(this.MANY_SEP3,"MANY_SEP3",3,separator,laFuncOrAction,action)},Parser.prototype.MANY_SEP4=function(separator,laFuncOrAction,action){return this.manySepFirstInternal(this.MANY_SEP4,"MANY_SEP4",4,separator,laFuncOrAction,action)},Parser.prototype.MANY_SEP5=function(separator,laFuncOrAction,action){return this.manySepFirstInternal(this.MANY_SEP5,"MANY_SEP5",5,separator,laFuncOrAction,action)},Parser.prototype.AT_LEAST_ONE=function(laFuncOrAction,action,errMsg){return this.AT_LEAST_ONE1.call(this,laFuncOrAction,action,errMsg)},Parser.prototype.AT_LEAST_ONE1=function(laFuncOrAction,action,errMsg){this.atLeastOneInternal(this.AT_LEAST_ONE1,"AT_LEAST_ONE1",1,laFuncOrAction,action,errMsg)},Parser.prototype.AT_LEAST_ONE2=function(laFuncOrAction,action,errMsg){this.atLeastOneInternal(this.AT_LEAST_ONE2,"AT_LEAST_ONE2",2,laFuncOrAction,action,errMsg)},Parser.prototype.AT_LEAST_ONE3=function(laFuncOrAction,action,errMsg){this.atLeastOneInternal(this.AT_LEAST_ONE3,"AT_LEAST_ONE3",3,laFuncOrAction,action,errMsg)},Parser.prototype.AT_LEAST_ONE4=function(laFuncOrAction,action,errMsg){this.atLeastOneInternal(this.AT_LEAST_ONE4,"AT_LEAST_ONE4",4,laFuncOrAction,action,errMsg)},Parser.prototype.AT_LEAST_ONE5=function(laFuncOrAction,action,errMsg){this.atLeastOneInternal(this.AT_LEAST_ONE5,"AT_LEAST_ONE5",5,laFuncOrAction,action,errMsg)},Parser.prototype.AT_LEAST_ONE_SEP=function(separator,laFuncOrAction,action,errMsg){return this.AT_LEAST_ONE_SEP1.call(this,separator,laFuncOrAction,action,errMsg)},Parser.prototype.AT_LEAST_ONE_SEP1=function(separator,laFuncOrAction,action,errMsg){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,"AT_LEAST_ONE_SEP1",1,separator,laFuncOrAction,action,errMsg)},Parser.prototype.AT_LEAST_ONE_SEP2=function(separator,laFuncOrAction,action,errMsg){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,"AT_LEAST_ONE_SEP2",2,separator,laFuncOrAction,action,errMsg)},Parser.prototype.AT_LEAST_ONE_SEP3=function(separator,laFuncOrAction,action,errMsg){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,"AT_LEAST_ONE_SEP3",3,separator,laFuncOrAction,action,errMsg)},Parser.prototype.AT_LEAST_ONE_SEP4=function(separator,laFuncOrAction,action,errMsg){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,"AT_LEAST_ONE_SEP4",4,separator,laFuncOrAction,action,errMsg)},Parser.prototype.AT_LEAST_ONE_SEP5=function(separator,laFuncOrAction,action,errMsg){return this.atLeastOneSepFirstInternal(this.atLeastOneSepFirstInternal,"AT_LEAST_ONE_SEP5",5,separator,laFuncOrAction,action,errMsg)},Parser.prototype.RULE_NO_RESYNC=function(ruleName,impl,invalidRet){return this.RULE(ruleName,impl,invalidRet,!1)},Parser.prototype.RULE=function(ruleName,impl,invalidRet,doReSync){void 0===invalidRet&&(invalidRet=this.defaultInvalidReturn),void 0===doReSync&&(doReSync=!0);var ruleNameErrors=checks_1.validateRuleName(ruleName,this.definedRulesNames,this.className);this.definedRulesNames.push(ruleName),this.definitionErrors.push.apply(this.definitionErrors,ruleNameErrors);var parserClassProductions=cache.getProductionsForClass(this.className);if(!parserClassProductions.containsKey(ruleName)){var gastProduction=gast_builder_1.buildTopProduction(impl.toString(),ruleName,this.tokensMap);parserClassProductions.put(ruleName,gastProduction)}var wrappedGrammarRule=function(idxInCallingRule,args){void 0===idxInCallingRule&&(idxInCallingRule=1),void 0===args&&(args=[]),this.ruleInvocationStateUpdate(ruleName,idxInCallingRule);try{return impl.apply(this,args)}catch(e){var isFirstInvokedRule=1===this.RULE_STACK.length,reSyncEnabled=isFirstInvokedRule||doReSync&&!this.isBackTracking()&&this.isErrorRecoveryEnabled;if(reSyncEnabled&&exceptions_public_1.exceptions.isRecognitionException(e)){var reSyncTokType=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(reSyncTokType))return this.reSyncTo(reSyncTokType),invalidRet();throw e}throw e}finally{this.ruleFinallyStateUpdate()}},ruleNamePropName="ruleName";return wrappedGrammarRule[ruleNamePropName]=ruleName,wrappedGrammarRule},Parser.prototype.ruleInvocationStateUpdate=function(ruleName,idxInCallingRule){this.RULE_OCCURRENCE_STACK.push(idxInCallingRule),this.RULE_STACK.push(ruleName)},Parser.prototype.ruleFinallyStateUpdate=function(){this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop();var maxInputIdx=this._input.length-1;if(0===this.RULE_STACK.length&&this.inputIdx<maxInputIdx){var firstRedundantTok=this.NEXT_TOKEN();this.SAVE_ERROR(new exceptions_public_1.exceptions.NotAllInputParsedException("Redundant input, expecting EOF but found: "+firstRedundantTok.image,firstRedundantTok))}},Parser.prototype.getTokenToInsert=function(tokClass){return new tokClass(-1,-1)},Parser.prototype.canTokenTypeBeInsertedInRecovery=function(tokClass){return!0},Parser.prototype.defaultInvalidReturn=function(){},Parser.prototype.tryInRepetitionRecovery=function(grammarRule,grammarRuleArgs,lookAheadFunc,expectedTokType){for(var reSyncTokType=this.findReSyncTokenType(),orgInputIdx=this.inputIdx,nextTokenWithoutResync=this.NEXT_TOKEN(),currToken=this.NEXT_TOKEN(),passedResyncPoint=!1;!passedResyncPoint;){if(lookAheadFunc.call(this)){var expectedTokName=tokens_public_1.tokenName(expectedTokType),msg="Expecting token of type -->"+expectedTokName+"<-- but found -->'"+nextTokenWithoutResync.image+"'<--";return this.SAVE_ERROR(new exceptions_public_1.exceptions.MismatchedTokenException(msg,nextTokenWithoutResync)),void grammarRule.apply(this,grammarRuleArgs)}currToken instanceof reSyncTokType&&(passedResyncPoint=!0),currToken=this.SKIP_TOKEN()}this.inputIdx=orgInputIdx},Parser.prototype.shouldInRepetitionRecoveryBeTried=function(expectTokAfterLastMatch,nextTokIdx){return void 0===expectTokAfterLastMatch||void 0===nextTokIdx?!1:this.NEXT_TOKEN()instanceof expectTokAfterLastMatch?!1:this.isBackTracking()?!1:this.canPerformInRuleRecovery(expectTokAfterLastMatch,this.getFollowsForInRuleRecovery(expectTokAfterLastMatch,nextTokIdx))?!1:!0},Parser.prototype.getFollowsForInRuleRecovery=function(tokClass,tokIdxInRule){var pathRuleStack=utils_1.cloneArr(this.RULE_STACK),pathOccurrenceStack=utils_1.cloneArr(this.RULE_OCCURRENCE_STACK),grammarPath={ruleStack:pathRuleStack,occurrenceStack:pathOccurrenceStack,lastTok:tokClass,lastTokOccurrence:tokIdxInRule},topRuleName=utils_1.first(pathRuleStack),gastProductions=this.getGAstProductions(),topProduction=gastProductions.get(topRuleName),follows=new interpreter_1.NextAfterTokenWalker(topProduction,grammarPath).startWalking();return follows},Parser.prototype.tryInRuleRecovery=function(expectedTokType,follows){if(this.canRecoverWithSingleTokenInsertion(expectedTokType,follows)){var tokToInsert=this.getTokenToInsert(expectedTokType);return tokToInsert.isInsertedInRecovery=!0,tokToInsert}if(this.canRecoverWithSingleTokenDeletion(expectedTokType)){var nextTok=this.SKIP_TOKEN();return this.inputIdx++,nextTok}throw new InRuleRecoveryException("sad sad panda")},Parser.prototype.canPerformInRuleRecovery=function(expectedToken,follows){return this.canRecoverWithSingleTokenInsertion(expectedToken,follows)||this.canRecoverWithSingleTokenDeletion(expectedToken)},Parser.prototype.canRecoverWithSingleTokenInsertion=function(expectedTokType,follows){if(!this.canTokenTypeBeInsertedInRecovery(expectedTokType))return!1;if(utils_1.isEmpty(follows))return!1;var mismatchedTok=this.NEXT_TOKEN(),isMisMatchedTokInFollows=void 0!==utils_1.find(follows,function(possibleFollowsTokType){return mismatchedTok instanceof possibleFollowsTokType});return isMisMatchedTokInFollows},Parser.prototype.canRecoverWithSingleTokenDeletion=function(expectedTokType){var isNextTokenWhatIsExpected=this.LA(2)instanceof expectedTokType;return isNextTokenWhatIsExpected},Parser.prototype.isInCurrentRuleReSyncSet=function(token){var followKey=this.getCurrFollowKey(),currentRuleReSyncSet=this.getFollowSetFromFollowKey(followKey);return utils_1.contains(currentRuleReSyncSet,token)},Parser.prototype.findReSyncTokenType=function(){for(var allPossibleReSyncTokTypes=this.flattenFollowSet(),nextToken=this.NEXT_TOKEN(),k=2;;){var nextTokenType=nextToken.constructor;if(utils_1.contains(allPossibleReSyncTokTypes,nextTokenType))return nextTokenType;nextToken=this.LA(k),k++}},Parser.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return EOF_FOLLOW_KEY;var currRuleIdx=this.RULE_STACK.length-1,currRuleOccIdx=currRuleIdx,prevRuleIdx=currRuleIdx-1;return{ruleName:this.RULE_STACK[currRuleIdx],idxInCallingRule:this.RULE_OCCURRENCE_STACK[currRuleOccIdx],inRule:this.RULE_STACK[prevRuleIdx]}},Parser.prototype.buildFullFollowKeyStack=function(){var _this=this;return utils_1.map(this.RULE_STACK,function(ruleName,idx){return 0===idx?EOF_FOLLOW_KEY:{ruleName:ruleName,idxInCallingRule:_this.RULE_OCCURRENCE_STACK[idx],inRule:_this.RULE_STACK[idx-1]}})},Parser.prototype.flattenFollowSet=function(){var _this=this,followStack=utils_1.map(this.buildFullFollowKeyStack(),function(currKey){return _this.getFollowSetFromFollowKey(currKey)});return utils_1.flatten(followStack)},Parser.prototype.getFollowSetFromFollowKey=function(followKey){if(followKey===EOF_FOLLOW_KEY)return[tokens_public_1.EOF];var followName=followKey.ruleName+followKey.idxInCallingRule+constants_1.IN+followKey.inRule;return cache.getResyncFollowsForClass(this.className).get(followName)},Parser.prototype.reSyncTo=function(tokClass){for(var nextTok=this.NEXT_TOKEN();nextTok instanceof tokClass==!1;)nextTok=this.SKIP_TOKEN()},Parser.prototype.attemptInRepetitionRecovery=function(prodFunc,args,lookaheadFunc,prodName,prodOccurrence,nextToksWalker,prodKeys){var key=this.getKeyForAutomaticLookahead(prodName,prodKeys,prodOccurrence),firstAfterRepInfo=this.firstAfterRepMap.get(key);if(void 0===firstAfterRepInfo){var currRuleName=utils_1.last(this.RULE_STACK),ruleGrammar=this.getGAstProductions().get(currRuleName),walker=new nextToksWalker(ruleGrammar,prodOccurrence);firstAfterRepInfo=walker.startWalking(),this.firstAfterRepMap.put(key,firstAfterRepInfo)}var expectTokAfterLastMatch=firstAfterRepInfo.token,nextTokIdx=firstAfterRepInfo.occurrence,isEndOfRule=firstAfterRepInfo.isEndOfRule;1===this.RULE_STACK.length&&isEndOfRule&&void 0===expectTokAfterLastMatch&&(expectTokAfterLastMatch=tokens_public_1.EOF,nextTokIdx=1),this.shouldInRepetitionRecoveryBeTried(expectTokAfterLastMatch,nextTokIdx)&&this.tryInRepetitionRecovery(prodFunc,args,lookaheadFunc,expectTokAfterLastMatch)},Parser.prototype.optionInternal=function(condition,action){return condition.call(this)?(action.call(this),!0):!1},Parser.prototype.atLeastOneInternal=function(prodFunc,prodName,prodOccurrence,lookAheadFunc,action,errMsg){if(utils_1.isString(action)&&(errMsg=action,action=lookAheadFunc,lookAheadFunc=this.getLookaheadFuncForAtLeastOne(prodOccurrence)),!lookAheadFunc.call(this))throw this.SAVE_ERROR(new exceptions_public_1.exceptions.EarlyExitException("expecting at least one: "+errMsg,this.NEXT_TOKEN()));for(action.call(this);lookAheadFunc.call(this);)action.call(this);this.isErrorRecoveryEnabled&&this.attemptInRepetitionRecovery(prodFunc,[lookAheadFunc,action,errMsg],lookAheadFunc,prodName,prodOccurrence,interpreter_1.NextTerminalAfterAtLeastOneWalker,this.atLeastOneLookaheadKeys)},Parser.prototype.atLeastOneSepFirstInternal=function(prodFunc,prodName,prodOccurrence,separator,firstIterationLookAheadFunc,action,errMsg){var _this=this,separatorsResult=[];if(utils_1.isString(action)&&(errMsg=action,action=firstIterationLookAheadFunc,firstIterationLookAheadFunc=this.getLookaheadFuncForAtLeastOneSep(prodOccurrence)),!firstIterationLookAheadFunc.call(this))throw this.SAVE_ERROR(new exceptions_public_1.exceptions.EarlyExitException("expecting at least one: "+errMsg,this.NEXT_TOKEN()));action.call(this);for(var separatorLookAheadFunc=function(){return _this.NEXT_TOKEN()instanceof separator};separatorLookAheadFunc();)separatorsResult.push(this.CONSUME(separator)),action.call(this);return this.isErrorRecoveryEnabled&&this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[prodName,prodOccurrence,separator,separatorLookAheadFunc,action,separatorsResult,this.atLeastOneSepLookaheadKeys,interpreter_1.NextTerminalAfterAtLeastOneSepWalker],separatorLookAheadFunc,prodName,prodOccurrence,interpreter_1.NextTerminalAfterAtLeastOneSepWalker,this.atLeastOneSepLookaheadKeys),separatorsResult},Parser.prototype.manyInternal=function(prodFunc,prodName,prodOccurrence,lookAheadFunc,action){for(void 0===action&&(action=lookAheadFunc,lookAheadFunc=this.getLookaheadFuncForMany(prodOccurrence));lookAheadFunc.call(this);)action.call(this);this.isErrorRecoveryEnabled&&this.attemptInRepetitionRecovery(prodFunc,[lookAheadFunc,action],lookAheadFunc,prodName,prodOccurrence,interpreter_1.NextTerminalAfterManyWalker,this.manyLookaheadKeys)},Parser.prototype.manySepFirstInternal=function(prodFunc,prodName,prodOccurrence,separator,firstIterationLookAheadFunc,action){var _this=this,separatorsResult=[];if(void 0===action&&(action=firstIterationLookAheadFunc,firstIterationLookAheadFunc=this.getLookaheadFuncForManySep(prodOccurrence)),firstIterationLookAheadFunc.call(this)){action.call(this);for(var separatorLookAheadFunc=function(){return _this.NEXT_TOKEN()instanceof separator};separatorLookAheadFunc();)separatorsResult.push(this.CONSUME(separator)),action.call(this);this.isErrorRecoveryEnabled&&this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[prodName,prodOccurrence,separator,separatorLookAheadFunc,action,separatorsResult,this.manySepLookaheadKeys,interpreter_1.NextTerminalAfterManySepWalker],separatorLookAheadFunc,prodName,prodOccurrence,interpreter_1.NextTerminalAfterManySepWalker,this.manySepLookaheadKeys)}return separatorsResult},Parser.prototype.repetitionSepSecondInternal=function(prodName,prodOccurrence,separator,separatorLookAheadFunc,action,separatorsResult,laKeys,nextTerminalAfterWalker){for(;separatorLookAheadFunc();)separatorsResult.push(this.CONSUME(separator)),action.call(this);this.isErrorRecoveryEnabled&&this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[prodName,prodOccurrence,separator,separatorLookAheadFunc,action,separatorsResult,laKeys,nextTerminalAfterWalker],separatorLookAheadFunc,prodName,prodOccurrence,nextTerminalAfterWalker,laKeys)},Parser.prototype.orInternal=function(alts,errMsgTypes,occurrence,ignoreAmbiguities){if(void 0!==alts[0].WHEN){for(var i=0;i<alts.length;i++)if(alts[i].WHEN.call(this)){var res=alts[i].THEN_DO();return res}this.raiseNoAltException(occurrence,errMsgTypes)}var laFunc=this.getLookaheadFuncForOr(occurrence,ignoreAmbiguities),altToTake=laFunc.call(this);return-1!==altToTake?alts[altToTake].ALT.call(this):void this.raiseNoAltException(occurrence,errMsgTypes)},Parser.prototype.consumeInternal=function(tokClass,idx){try{return this.consumeInternalOptimized(tokClass)}catch(eFromConsumption){if(!(this.isErrorRecoveryEnabled&&eFromConsumption instanceof exceptions_public_1.exceptions.MismatchedTokenException)||this.isBackTracking())throw eFromConsumption;var follows=this.getFollowsForInRuleRecovery(tokClass,idx);try{return this.tryInRuleRecovery(tokClass,follows)}catch(eFromInRuleRecovery){throw eFromConsumption instanceof InRuleRecoveryException?eFromConsumption:eFromInRuleRecovery}}},Parser.prototype.consumeInternalOptimized=function(tokClass){var nextToken=this.NEXT_TOKEN();if(this.NEXT_TOKEN()instanceof tokClass)return this.inputIdx++,nextToken;var expectedTokType=tokens_public_1.tokenName(tokClass),msg="Expecting token of type -->"+expectedTokType+"<-- but found -->'"+nextToken.image+"'<--";throw this.SAVE_ERROR(new exceptions_public_1.exceptions.MismatchedTokenException(msg,nextToken))},Parser.prototype.getKeyForAutomaticLookahead=function(prodName,prodKeys,occurrence){var occuMap=prodKeys[occurrence-1],currRule=utils_1.last(this.RULE_STACK),key=occuMap[currRule];return void 0===key&&(key=prodName+occurrence+constants_1.IN+currRule,occuMap[currRule]=key),key},Parser.prototype.getLookaheadFuncForOption=function(occurence){var key=this.getKeyForAutomaticLookahead("OPTION",this.optionLookaheadKeys,occurence);return this.getLookaheadFuncFor(key,occurence,lookahead_1.buildLookaheadForOption)},Parser.prototype.getLookaheadFuncForOr=function(occurence,ignoreErrors){var key=this.getKeyForAutomaticLookahead("OR",this.orLookaheadKeys,occurence);return this.getLookaheadFuncFor(key,occurence,lookahead_1.buildLookaheadForOr,[ignoreErrors])},Parser.prototype.getLookaheadFuncForMany=function(occurence){var key=this.getKeyForAutomaticLookahead("MANY",this.manyLookaheadKeys,occurence);return this.getLookaheadFuncFor(key,occurence,lookahead_1.buildLookaheadForMany)},Parser.prototype.getLookaheadFuncForManySep=function(occurence){var key=this.getKeyForAutomaticLookahead("MANY_SEP",this.manySepLookaheadKeys,occurence);return this.getLookaheadFuncFor(key,occurence,lookahead_1.buildLookaheadForManySep)},Parser.prototype.getLookaheadFuncForAtLeastOne=function(occurence){var key=this.getKeyForAutomaticLookahead("AT_LEAST_ONE",this.atLeastOneLookaheadKeys,occurence);return this.getLookaheadFuncFor(key,occurence,lookahead_1.buildLookaheadForAtLeastOne)},Parser.prototype.getLookaheadFuncForAtLeastOneSep=function(occurence){var key=this.getKeyForAutomaticLookahead("AT_LEAST_ONE_SEP",this.atLeastOneSepLookaheadKeys,occurence);return this.getLookaheadFuncFor(key,occurence,lookahead_1.buildLookaheadForAtLeastOneSep)},Parser.prototype.getLookaheadFuncFor=function(key,occurrence,laFuncBuilder,extraArgs){void 0===extraArgs&&(extraArgs=[]);var ruleName=utils_1.last(this.RULE_STACK),condition=this.classLAFuncs.get(key);if(void 0===condition){var ruleGrammar=this.getGAstProductions().get(ruleName);condition=laFuncBuilder.apply(null,[occurrence,ruleGrammar].concat(extraArgs)),this.classLAFuncs.put(key,condition)}return condition},Parser.prototype.saveRecogState=function(){var savedErrors=utils_1.cloneArr(this.errors),savedRuleStack=utils_1.cloneArr(this.RULE_STACK);return{errors:savedErrors,inputIdx:this.inputIdx,RULE_STACK:savedRuleStack}},Parser.prototype.reloadRecogState=function(newState){this.errors=newState.errors,this.inputIdx=newState.inputIdx,
this.RULE_STACK=newState.RULE_STACK},Parser.prototype.raiseNoAltException=function(occurrence,errMsgTypes){var errSuffix=" but found: '"+this.NEXT_TOKEN().image+"'";if(void 0===errMsgTypes){var ruleName=utils_1.last(this.RULE_STACK),ruleGrammar=this.getGAstProductions().get(ruleName),nextTokens=new interpreter_1.NextInsideOrWalker(ruleGrammar,occurrence).startWalking(),nextTokensFlat=utils_1.flatten(nextTokens),nextTokensNames=utils_1.map(nextTokensFlat,function(currTokenClass){return tokens_public_1.tokenName(currTokenClass)});errMsgTypes="one of: <"+nextTokensNames.join(" ,")+">"}throw this.SAVE_ERROR(new exceptions_public_1.exceptions.NoViableAltException("expecting: "+errMsgTypes+" "+errSuffix,this.NEXT_TOKEN()))},Parser.IGNORE_AMBIGUITIES=!0,Parser.NO_RESYNC=!1,Parser.DEFER_DEFINITION_ERRORS_HANDLING=!1,Parser}();exports.Parser=Parser,InRuleRecoveryException.prototype=Error.prototype},function(module,exports,__webpack_require__){function getProductionsForClass(className){return getFromNestedHashTable(className,exports.CLASS_TO_GRAMMAR_PRODUCTIONS)}function getResyncFollowsForClass(className){return getFromNestedHashTable(className,exports.CLASS_TO_RESYNC_FOLLOW_SETS)}function setResyncFollowsForClass(className,followSet){exports.CLASS_TO_RESYNC_FOLLOW_SETS.put(className,followSet)}function getLookaheadFuncsForClass(className){return getFromNestedHashTable(className,exports.CLASS_TO_LOOKAHEAD_FUNCS)}function getFirstAfterRepForClass(className){return getFromNestedHashTable(className,exports.CLASS_TO_FIRST_AFTER_REPETITION)}function initLookAheadKeyCache(className){exports.CLASS_TO_OR_LA_CACHE[className]=new Array(exports.MAX_OCCURRENCE_INDEX),exports.CLASS_TO_MANY_LA_CACHE[className]=new Array(exports.MAX_OCCURRENCE_INDEX),exports.CLASS_TO_MANY_SEP_LA_CACHE[className]=new Array(exports.MAX_OCCURRENCE_INDEX),exports.CLASS_TO_AT_LEAST_ONE_LA_CACHE[className]=new Array(exports.MAX_OCCURRENCE_INDEX),exports.CLASS_TO_AT_LEAST_ONE_SEP_LA_CACHE[className]=new Array(exports.MAX_OCCURRENCE_INDEX),exports.CLASS_TO_OPTION_LA_CACHE[className]=new Array(exports.MAX_OCCURRENCE_INDEX),initSingleLookAheadKeyCache(exports.CLASS_TO_OR_LA_CACHE[className]),initSingleLookAheadKeyCache(exports.CLASS_TO_MANY_LA_CACHE[className]),initSingleLookAheadKeyCache(exports.CLASS_TO_MANY_SEP_LA_CACHE[className]),initSingleLookAheadKeyCache(exports.CLASS_TO_AT_LEAST_ONE_LA_CACHE[className]),initSingleLookAheadKeyCache(exports.CLASS_TO_AT_LEAST_ONE_SEP_LA_CACHE[className]),initSingleLookAheadKeyCache(exports.CLASS_TO_OPTION_LA_CACHE[className])}function initSingleLookAheadKeyCache(laCache){for(var i=0;i<exports.MAX_OCCURRENCE_INDEX;i++)laCache[i]=new lang_extensions_1.HashTable}function getFromNestedHashTable(className,hashTable){var result=hashTable.get(className);return void 0===result&&(hashTable.put(className,new lang_extensions_1.HashTable),result=hashTable.get(className)),result}function clearCache(){var hasTables=utils_1.filter(utils_1.values(module.exports),function(currHashTable){return currHashTable instanceof lang_extensions_1.HashTable});utils_1.forEach(hasTables,function(currHashTable){return currHashTable.clear()})}var lang_extensions_1=__webpack_require__(3),utils_1=__webpack_require__(4);exports.CLASS_TO_DEFINITION_ERRORS=new lang_extensions_1.HashTable,exports.CLASS_TO_SELF_ANALYSIS_DONE=new lang_extensions_1.HashTable,exports.CLASS_TO_GRAMMAR_PRODUCTIONS=new lang_extensions_1.HashTable,exports.getProductionsForClass=getProductionsForClass,exports.CLASS_TO_RESYNC_FOLLOW_SETS=new lang_extensions_1.HashTable,exports.getResyncFollowsForClass=getResyncFollowsForClass,exports.setResyncFollowsForClass=setResyncFollowsForClass,exports.CLASS_TO_LOOKAHEAD_FUNCS=new lang_extensions_1.HashTable,exports.getLookaheadFuncsForClass=getLookaheadFuncsForClass,exports.CLASS_TO_FIRST_AFTER_REPETITION=new lang_extensions_1.HashTable,exports.getFirstAfterRepForClass=getFirstAfterRepForClass,exports.CLASS_TO_OR_LA_CACHE=new lang_extensions_1.HashTable,exports.CLASS_TO_MANY_LA_CACHE=new lang_extensions_1.HashTable,exports.CLASS_TO_MANY_SEP_LA_CACHE=new lang_extensions_1.HashTable,exports.CLASS_TO_AT_LEAST_ONE_LA_CACHE=new lang_extensions_1.HashTable,exports.CLASS_TO_AT_LEAST_ONE_SEP_LA_CACHE=new lang_extensions_1.HashTable,exports.CLASS_TO_OPTION_LA_CACHE=new lang_extensions_1.HashTable,exports.MAX_OCCURRENCE_INDEX=5,exports.initLookAheadKeyCache=initLookAheadKeyCache,exports.clearCache=clearCache},function(module,exports,__webpack_require__){function classNameFromInstance(instance){return functionName(instance.constructor)}function functionName(func){if(hasNativeName)return func.name;if(func.rdtFuncNameCache666)return func.rdtFuncNameCache666;var name_1=func.toString().match(nameRegex)[1];return func.rdtFuncNameCache666=name_1,name_1}var utils=__webpack_require__(4),nameRegex=/^\s*function\s*(\S*)\s*\(/,hasNativeName="undefined"!=typeof function(){}.name;exports.classNameFromInstance=classNameFromInstance,exports.functionName=functionName;var HashTable=function(){function HashTable(){this._state={}}return HashTable.prototype.keys=function(){return utils.keys(this._state)},HashTable.prototype.values=function(){return utils.values(this._state)},HashTable.prototype.put=function(key,value){this._state[key]=value},HashTable.prototype.putAll=function(other){this._state=utils.assign(this._state,other._state)},HashTable.prototype.get=function(key){return this._state[key]},HashTable.prototype.containsKey=function(key){return utils.has(this._state,key)},HashTable.prototype.clear=function(){this._state={}},HashTable}();exports.HashTable=HashTable},function(module,exports){function isEmpty(arr){return arr&&0===arr.length}function keys(obj){return Object.keys(obj)}function values(obj){for(var vals=[],keys=Object.keys(obj),i=0;i<keys.length;i++)vals.push(obj[keys[i]]);return vals}function map(arr,callback){for(var result=[],idx=0;idx<arr.length;idx++)result.push(callback.call(null,arr[idx],idx));return result}function flatten(arr){for(var result=[],idx=0;idx<arr.length;idx++){var currItem=arr[idx];Array.isArray(currItem)?result=result.concat(flatten(currItem)):result.push(currItem)}return result}function first(arr){return isEmpty(arr)?void 0:arr[0]}function last(arr){var len=arr&&arr.length;return len?arr[len-1]:void 0}function forEach(arr,iteratorCallback){if(Array.isArray(arr))for(var i=0;i<arr.length;i++)iteratorCallback.call(null,arr[i],i)}function isString(item){return"string"==typeof item}function isUndefined(item){return void 0===item}function isFunction(item){return item instanceof Function}function drop(arr,howMuch){return void 0===howMuch&&(howMuch=1),arr.slice(howMuch,arr.length)}function dropRight(arr,howMuch){return void 0===howMuch&&(howMuch=1),arr.slice(0,arr.length-howMuch)}function filter(arr,predicate){var result=[];if(Array.isArray(arr))for(var i=0;i<arr.length;i++){var item=arr[i];predicate.call(null,item)&&result.push(item)}return result}function reject(arr,predicate){return filter(arr,function(item){return!predicate(item)})}function pick(obj,predicate){for(var keys=Object.keys(obj),result={},i=0;i<keys.length;i++){var currKey=keys[i],currItem=obj[currKey];predicate(currItem)&&(result[currKey]=currItem)}return result}function has(obj,prop){return obj.hasOwnProperty(prop)}function contains(arr,item){return find(arr,function(currItem){return currItem===item})?!0:!1}function cloneArr(arr){return map(arr,function(item){return item})}function cloneObj(obj){var clonedObj={};for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(clonedObj[key]=obj[key]);return clonedObj}function find(arr,predicate){for(var i=0;i<arr.length;i++){var item=arr[i];if(predicate.call(null,item))return item}}function reduce(arrOrObj,iterator,initial){for(var vals=Array.isArray(arrOrObj)?arrOrObj:values(arrOrObj),accumulator=initial,i=0;i<vals.length;i++)accumulator=iterator.call(null,accumulator,vals[i]);return accumulator}function compact(arr){return reject(arr,function(item){return null===item||void 0===item})}function uniq(arr,identity){void 0===identity&&(identity=function(item){return item});var identities=[];return reduce(arr,function(result,currItem){var currIdentity=identity(currItem);return contains(identities,currIdentity)?result:(identities.push(currIdentity),result.concat(currItem))},[])}function partial(func){for(var restArgs=[],_i=1;_i<arguments.length;_i++)restArgs[_i-1]=arguments[_i];var firstArg=[null],allArgs=firstArg.concat(restArgs);return Function.bind.apply(func,allArgs)}function isArray(obj){return Array.isArray(obj)}function isRegExp(obj){return obj instanceof RegExp}function isObject(obj){return obj instanceof Object}function every(arr,predicate){for(var i=0;i<arr.length;i++)if(!predicate(arr[i]))return!1;return!0}function difference(arr,values){return reject(arr,function(item){return contains(values,item)})}function some(arr,predicate){for(var i=0;i<arr.length;i++)if(predicate(arr[i]))return!0;return!1}function indexOf(arr,value){for(var i=0;i<arr.length;i++)if(arr[i]===value)return i;return-1}function sortBy(arr,orderFunc){var result=cloneArr(arr);return result.sort(function(a,b){return orderFunc(a)-orderFunc(b)}),result}function zipObject(keys,values){if(keys.length!==values.length)throw Error("can't zipObject with different number of keys and values!");for(var result={},i=0;i<keys.length;i++)result[keys[i]]=values[i];return result}function assign(target){for(var sources=[],_i=1;_i<arguments.length;_i++)sources[_i-1]=arguments[_i];for(var i=0;i<sources.length;i++)for(var curSource=sources[i],currSourceKeys=keys(curSource),j=0;j<currSourceKeys.length;j++){var currKey=currSourceKeys[j];target[currKey]=curSource[currKey]}return target}function groupBy(arr,groupKeyFunc){var result={};return forEach(arr,function(item){var currGroupKey=groupKeyFunc(item),currGroupArr=result[currGroupKey];currGroupArr?currGroupArr.push(item):result[currGroupKey]=[item]}),result}exports.isEmpty=isEmpty,exports.keys=keys,exports.values=values,exports.map=map,exports.flatten=flatten,exports.first=first,exports.last=last,exports.forEach=forEach,exports.isString=isString,exports.isUndefined=isUndefined,exports.isFunction=isFunction,exports.drop=drop,exports.dropRight=dropRight,exports.filter=filter,exports.reject=reject,exports.pick=pick,exports.has=has,exports.contains=contains,exports.cloneArr=cloneArr,exports.cloneObj=cloneObj,exports.find=find,exports.reduce=reduce,exports.compact=compact,exports.uniq=uniq,exports.partial=partial,exports.isArray=isArray,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.every=every,exports.difference=difference,exports.some=some,exports.indexOf=indexOf,exports.sortBy=sortBy,exports.zipObject=zipObject,exports.assign=assign,exports.groupBy=groupBy},function(module,exports,__webpack_require__){var exceptions,lang_extensions_1=__webpack_require__(3),utils_1=__webpack_require__(4);!function(exceptions){function isRecognitionException(error){var recognitionExceptions=[lang_extensions_1.functionName(MismatchedTokenException),lang_extensions_1.functionName(NoViableAltException),lang_extensions_1.functionName(EarlyExitException),lang_extensions_1.functionName(NotAllInputParsedException)];return utils_1.contains(recognitionExceptions,error.name)}function MismatchedTokenException(message,token){this.name=lang_extensions_1.functionName(MismatchedTokenException),this.message=message,this.token=token}function NoViableAltException(message,token){this.name=lang_extensions_1.functionName(NoViableAltException),this.message=message,this.token=token}function NotAllInputParsedException(message,token){this.name=lang_extensions_1.functionName(NotAllInputParsedException),this.message=message,this.token=token}function EarlyExitException(message,token){this.name=lang_extensions_1.functionName(EarlyExitException),this.message=message,this.token=token}exceptions.isRecognitionException=isRecognitionException,exceptions.MismatchedTokenException=MismatchedTokenException,MismatchedTokenException.prototype=Error.prototype,exceptions.NoViableAltException=NoViableAltException,NoViableAltException.prototype=Error.prototype,exceptions.NotAllInputParsedException=NotAllInputParsedException,NotAllInputParsedException.prototype=Error.prototype,exceptions.EarlyExitException=EarlyExitException,EarlyExitException.prototype=Error.prototype}(exceptions=exports.exceptions||(exports.exceptions={}))},function(module,exports,__webpack_require__){function resolveGrammar(topLevels){var refResolver=new GastRefResolverVisitor(topLevels);return refResolver.resolveRefs(),refResolver.errors}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},parser_public_1=__webpack_require__(1),gast_public_1=__webpack_require__(7),utils_1=__webpack_require__(4);exports.resolveGrammar=resolveGrammar;var GastRefResolverVisitor=function(_super){function GastRefResolverVisitor(nameToTopRule){_super.call(this),this.nameToTopRule=nameToTopRule,this.errors=[]}return __extends(GastRefResolverVisitor,_super),GastRefResolverVisitor.prototype.resolveRefs=function(){var _this=this;utils_1.forEach(this.nameToTopRule.values(),function(prod){_this.currTopLevel=prod,prod.accept(_this)})},GastRefResolverVisitor.prototype.visitNonTerminal=function(node){var ref=this.nameToTopRule.get(node.nonTerminalName);if(ref)node.referencedRule=ref;else{var msg="Invalid grammar, reference to rule which is not defined --> "+node.nonTerminalName;this.errors.push({message:msg,type:parser_public_1.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:node.nonTerminalName})}},GastRefResolverVisitor}(gast_public_1.gast.GAstVisitor);exports.GastRefResolverVisitor=GastRefResolverVisitor},function(module,exports,__webpack_require__){var gast,__extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},utils_1=__webpack_require__(4);!function(gast){var AbstractProduction=function(){function AbstractProduction(definition){this.definition=definition,this.implicitOccurrenceIndex=!1}return AbstractProduction.prototype.accept=function(visitor){visitor.visit(this),utils_1.forEach(this.definition,function(prod){prod.accept(visitor)})},AbstractProduction}();gast.AbstractProduction=AbstractProduction;var NonTerminal=function(_super){function NonTerminal(nonTerminalName,referencedRule,occurrenceInParent){void 0===referencedRule&&(referencedRule=void 0),void 0===occurrenceInParent&&(occurrenceInParent=1),_super.call(this,[]),this.nonTerminalName=nonTerminalName,this.referencedRule=referencedRule,this.occurrenceInParent=occurrenceInParent}return __extends(NonTerminal,_super),Object.defineProperty(NonTerminal.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(definition){},enumerable:!0,configurable:!0}),NonTerminal.prototype.accept=function(visitor){visitor.visit(this)},NonTerminal}(AbstractProduction);gast.NonTerminal=NonTerminal;var Rule=function(_super){function Rule(name,definition,orgText){void 0===orgText&&(orgText=""),_super.call(this,definition),this.name=name,this.orgText=orgText}return __extends(Rule,_super),Rule}(AbstractProduction);gast.Rule=Rule;var Flat=function(_super){function Flat(definition){_super.call(this,definition)}return __extends(Flat,_super),Flat}(AbstractProduction);gast.Flat=Flat;var Option=function(_super){function Option(definition,occurrenceInParent){void 0===occurrenceInParent&&(occurrenceInParent=1),_super.call(this,definition),this.occurrenceInParent=occurrenceInParent}return __extends(Option,_super),Option}(AbstractProduction);gast.Option=Option;var RepetitionMandatory=function(_super){function RepetitionMandatory(definition,occurrenceInParent){void 0===occurrenceInParent&&(occurrenceInParent=1),_super.call(this,definition),this.occurrenceInParent=occurrenceInParent}return __extends(RepetitionMandatory,_super),RepetitionMandatory}(AbstractProduction);gast.RepetitionMandatory=RepetitionMandatory;var RepetitionMandatoryWithSeparator=function(_super){function RepetitionMandatoryWithSeparator(definition,separator,occurrenceInParent){void 0===occurrenceInParent&&(occurrenceInParent=1),_super.call(this,definition),this.separator=separator,this.occurrenceInParent=occurrenceInParent}return __extends(RepetitionMandatoryWithSeparator,_super),RepetitionMandatoryWithSeparator}(AbstractProduction);gast.RepetitionMandatoryWithSeparator=RepetitionMandatoryWithSeparator;var Repetition=function(_super){function Repetition(definition,occurrenceInParent){void 0===occurrenceInParent&&(occurrenceInParent=1),_super.call(this,definition),this.occurrenceInParent=occurrenceInParent}return __extends(Repetition,_super),Repetition}(AbstractProduction);gast.Repetition=Repetition;var RepetitionWithSeparator=function(_super){function RepetitionWithSeparator(definition,separator,occurrenceInParent){void 0===occurrenceInParent&&(occurrenceInParent=1),_super.call(this,definition),this.separator=separator,this.occurrenceInParent=occurrenceInParent}return __extends(RepetitionWithSeparator,_super),RepetitionWithSeparator}(AbstractProduction);gast.RepetitionWithSeparator=RepetitionWithSeparator;var Alternation=function(_super){function Alternation(definition,occurrenceInParent){void 0===occurrenceInParent&&(occurrenceInParent=1),_super.call(this,definition),this.occurrenceInParent=occurrenceInParent}return __extends(Alternation,_super),Alternation}(AbstractProduction);gast.Alternation=Alternation;var Terminal=function(){function Terminal(terminalType,occurrenceInParent){void 0===occurrenceInParent&&(occurrenceInParent=1),this.terminalType=terminalType,this.occurrenceInParent=occurrenceInParent,this.implicitOccurrenceIndex=!1}return Terminal.prototype.accept=function(visitor){visitor.visit(this)},Terminal}();gast.Terminal=Terminal;var GAstVisitor=function(){function GAstVisitor(){}return GAstVisitor.prototype.visit=function(node){node instanceof NonTerminal?this.visitNonTerminal(node):node instanceof Flat?this.visitFlat(node):node instanceof Option?this.visitOption(node):node instanceof RepetitionMandatory?this.visitRepetitionMandatory(node):node instanceof RepetitionMandatoryWithSeparator?this.visitRepetitionMandatoryWithSeparator(node):node instanceof RepetitionWithSeparator?this.visitRepetitionWithSeparator(node):node instanceof Repetition?this.visitRepetition(node):node instanceof Alternation?this.visitAlternation(node):node instanceof Terminal&&this.visitTerminal(node)},GAstVisitor.prototype.visitNonTerminal=function(node){},GAstVisitor.prototype.visitFlat=function(node){},GAstVisitor.prototype.visitOption=function(node){},GAstVisitor.prototype.visitRepetition=function(node){},GAstVisitor.prototype.visitRepetitionMandatory=function(node){},GAstVisitor.prototype.visitRepetitionMandatoryWithSeparator=function(node){},GAstVisitor.prototype.visitRepetitionWithSeparator=function(node){},GAstVisitor.prototype.visitAlternation=function(node){},GAstVisitor.prototype.visitTerminal=function(node){},GAstVisitor}();gast.GAstVisitor=GAstVisitor}(gast=exports.gast||(exports.gast={}))},function(module,exports,__webpack_require__){function validateGrammar(topLevels){var duplicateErrors=utils.map(topLevels,validateDuplicateProductions),leftRecursionErrors=utils.map(topLevels,function(currTopRule){return validateNoLeftRecursion(currTopRule,currTopRule)}),emptyAltErrors=utils.map(topLevels,validateEmptyOrAlternative);return utils.flatten(duplicateErrors.concat(leftRecursionErrors,emptyAltErrors))}function validateDuplicateProductions(topLevelRule){var collectorVisitor=new OccurrenceValidationCollector;topLevelRule.accept(collectorVisitor);var allRuleProductions=collectorVisitor.allProductions,productionGroups=utils.groupBy(allRuleProductions,identifyProductionForDuplicates),duplicates=utils.pick(productionGroups,function(currGroup){return currGroup.length>1}),errors=utils.map(utils.values(duplicates),function(currDuplicates){var firstProd=utils.first(currDuplicates),msg=createDuplicatesErrorMessage(currDuplicates,topLevelRule.name),dslName=gast_1.getProductionDslName(firstProd),defError={message:msg,type:parser_public_1.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:topLevelRule.name,dslName:dslName,occurrence:firstProd.occurrenceInParent},param=getExtraProductionArgument(firstProd);return param&&(defError.parameter=param),defError});return errors}function createDuplicatesErrorMessage(duplicateProds,topLevelName){var firstProd=utils.first(duplicateProds),index=firstProd.occurrenceInParent,dslName=gast_1.getProductionDslName(firstProd),extraArgument=getExtraProductionArgument(firstProd),msg="->"+dslName+"<- with occurrence index: ->"+index+"<-\n                  "+(extraArgument?"and argument: "+extraArgument:"")+"\n                  appears more than once ("+duplicateProds.length+" times) in the top level rule: "+topLevelName+".\n                  "+(1===index?"note that "+dslName+" and "+dslName+"1 both have the same occurrence index 1}":"")+"}\n                  to fix this make sure each usage of "+dslName+" "+(extraArgument?"with the argument: "+extraArgument:"")+"\n                  in the rule "+topLevelName+" has a different occurrence index (1-5), as that combination acts as a unique\n                  position key in the grammar, which is needed by the parsing engine.";return msg=msg.replace(/[ \t]+/g," "),msg=msg.replace(/\s\s+/g,"\n")}function identifyProductionForDuplicates(prod){return gast_1.getProductionDslName(prod)+"_#_"+prod.occurrenceInParent+"_#_"+getExtraProductionArgument(prod)}function getExtraProductionArgument(prod){return prod instanceof gast_public_1.gast.Terminal?tokens_public_1.tokenName(prod.terminalType):prod instanceof gast_public_1.gast.NonTerminal?prod.nonTerminalName:""}function validateRuleName(ruleName,definedRulesNames,className){var errMsg,errors=[];return ruleName.match(ruleNamePattern)||(errMsg="Invalid Grammar rule name --> "+ruleName+" it must match the pattern: "+ruleNamePattern.toString(),errors.push({message:errMsg,type:parser_public_1.ParserDefinitionErrorType.INVALID_RULE_NAME,ruleName:ruleName})),utils.contains(definedRulesNames,ruleName)&&(errMsg="Duplicate definition, rule: "+ruleName+" is already defined in the grammar: "+className,errors.push({message:errMsg,type:parser_public_1.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:ruleName})),errors}function validateNoLeftRecursion(topRule,currRule,path){void 0===path&&(path=[]);var errors=[],nextNonTerminals=getFirstNoneTerminal(currRule.definition);if(utils.isEmpty(nextNonTerminals))return[];var ruleName=topRule.name,foundLeftRecursion=utils.contains(nextNonTerminals,topRule),pathNames=utils.map(path,function(currRule){return currRule.name}),leftRecursivePath=ruleName+" --> "+pathNames.concat([ruleName]).join(" --> ");if(foundLeftRecursion){var errMsg="Left Recursion found in grammar.\n"+("rule: <"+ruleName+"> can be invoked from itself (directly or indirectly)\n")+("without consuming any Tokens. The grammar path that causes this is: \n "+leftRecursivePath+"\n")+" To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.";errors.push({message:errMsg,type:parser_public_1.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:ruleName})}var validNextSteps=utils.difference(nextNonTerminals,path.concat([topRule])),errorsFromNextSteps=utils.map(validNextSteps,function(currRefRule){var newPath=utils.cloneArr(path);return newPath.push(currRefRule),validateNoLeftRecursion(topRule,currRefRule,newPath)});return errors.concat(utils.flatten(errorsFromNextSteps))}function getFirstNoneTerminal(definition){var result=[];if(utils.isEmpty(definition))return result;var firstProd=utils.first(definition);if(firstProd instanceof gast_public_1.gast.NonTerminal){if(void 0===firstProd.referencedRule)return result;result.push(firstProd.referencedRule)}else if(firstProd instanceof gast_public_1.gast.Flat||firstProd instanceof gast_public_1.gast.Option||firstProd instanceof gast_public_1.gast.RepetitionMandatory||firstProd instanceof gast_public_1.gast.RepetitionMandatoryWithSeparator||firstProd instanceof gast_public_1.gast.RepetitionWithSeparator||firstProd instanceof gast_public_1.gast.Repetition)result=result.concat(getFirstNoneTerminal(firstProd.definition));else if(firstProd instanceof gast_public_1.gast.Alternation)result=utils.flatten(utils.map(firstProd.definition,function(currSubDef){return getFirstNoneTerminal(currSubDef.definition)}));else if(!(firstProd instanceof gast_public_1.gast.Terminal))throw Error("non exhaustive match");var isFirstOptional=gast_1.isOptionalProd(firstProd),hasMore=definition.length>1;if(isFirstOptional&&hasMore){var rest=utils.drop(definition);return result.concat(getFirstNoneTerminal(rest))}return result}function validateEmptyOrAlternative(topLevelRule){var orCollector=new OrCollector;topLevelRule.accept(orCollector);var ors=orCollector.alternations,errors=utils.reduce(ors,function(errors,currOr){var exceptLast=utils.dropRight(currOr.definition),currErrors=utils.map(exceptLast,function(currAlternative,currAltIdx){return utils.isEmpty(first_1.first(currAlternative))?{message:"Ambiguous empty alternative: <"+(currAltIdx+1)+">"+(" in <OR"+currOr.occurrenceInParent+"> inside <"+topLevelRule.name+"> Rule.\n")+"Only the last alternative may be an empty alternative.",type:parser_public_1.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:topLevelRule.name,occurrence:currOr.occurrenceInParent,alternative:currAltIdx+1}:null});return errors.concat(utils.compact(currErrors))},[]);return errors}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},utils=__webpack_require__(4),parser_public_1=__webpack_require__(1),gast_public_1=__webpack_require__(7),gast_1=__webpack_require__(9),tokens_public_1=__webpack_require__(10),first_1=__webpack_require__(13);exports.validateGrammar=validateGrammar,exports.identifyProductionForDuplicates=identifyProductionForDuplicates;var OccurrenceValidationCollector=function(_super){function OccurrenceValidationCollector(){_super.apply(this,arguments),this.allProductions=[]}return __extends(OccurrenceValidationCollector,_super),OccurrenceValidationCollector.prototype.visitNonTerminal=function(subrule){this.allProductions.push(subrule)},OccurrenceValidationCollector.prototype.visitOption=function(option){this.allProductions.push(option)},OccurrenceValidationCollector.prototype.visitRepetitionWithSeparator=function(manySep){this.allProductions.push(manySep)},OccurrenceValidationCollector.prototype.visitRepetitionMandatory=function(atLeastOne){this.allProductions.push(atLeastOne)},OccurrenceValidationCollector.prototype.visitRepetitionMandatoryWithSeparator=function(atLeastOneSep){this.allProductions.push(atLeastOneSep)},OccurrenceValidationCollector.prototype.visitRepetition=function(many){this.allProductions.push(many)},OccurrenceValidationCollector.prototype.visitAlternation=function(or){this.allProductions.push(or)},OccurrenceValidationCollector.prototype.visitTerminal=function(terminal){this.allProductions.push(terminal)},OccurrenceValidationCollector}(gast_public_1.gast.GAstVisitor);exports.OccurrenceValidationCollector=OccurrenceValidationCollector;var ruleNamePattern=/^[a-zA-Z_]\w*$/;exports.validateRuleName=validateRuleName,exports.validateNoLeftRecursion=validateNoLeftRecursion,exports.getFirstNoneTerminal=getFirstNoneTerminal;var OrCollector=function(_super){function OrCollector(){_super.apply(this,arguments),this.alternations=[]}return __extends(OrCollector,_super),OrCollector.prototype.visitAlternation=function(node){this.alternations.push(node)},OrCollector}(gast_public_1.gast.GAstVisitor);exports.validateEmptyOrAlternative=validateEmptyOrAlternative},function(module,exports,__webpack_require__){function isSequenceProd(prod){return prod instanceof gast_public_1.gast.Flat||prod instanceof gast_public_1.gast.Option||prod instanceof gast_public_1.gast.Repetition||prod instanceof gast_public_1.gast.RepetitionMandatory||prod instanceof gast_public_1.gast.RepetitionMandatoryWithSeparator||prod instanceof gast_public_1.gast.RepetitionWithSeparator||prod instanceof gast_public_1.gast.Terminal||prod instanceof gast_public_1.gast.Rule}function isOptionalProd(prod,alreadyVisited){void 0===alreadyVisited&&(alreadyVisited=[]);var isDirectlyOptional=prod instanceof gast_public_1.gast.Option||prod instanceof gast_public_1.gast.Repetition||prod instanceof gast_public_1.gast.RepetitionWithSeparator;return isDirectlyOptional?!0:prod instanceof gast_public_1.gast.Alternation?utils_1.some(prod.definition,function(subProd){return isOptionalProd(subProd,alreadyVisited)}):prod instanceof gast_public_1.gast.NonTerminal&&utils_1.contains(alreadyVisited,prod)?!1:prod instanceof gast_public_1.gast.AbstractProduction?(prod instanceof gast_public_1.gast.NonTerminal&&alreadyVisited.push(prod),utils_1.every(prod.definition,function(subProd){return isOptionalProd(subProd,alreadyVisited)})):!1}function isBranchingProd(prod){return prod instanceof gast_public_1.gast.Alternation}function getProductionDslName(prod){var clazz=prod.constructor,prodName=lang_extensions_1.functionName(clazz);return productionToDslName[prodName]}var gast_public_1=__webpack_require__(7),utils_1=__webpack_require__(4),lang_extensions_1=__webpack_require__(3);exports.isSequenceProd=isSequenceProd,exports.isOptionalProd=isOptionalProd,exports.isBranchingProd=isBranchingProd;var productionToDslName={};productionToDslName[lang_extensions_1.functionName(gast_public_1.gast.NonTerminal)]="SUBRULE",productionToDslName[lang_extensions_1.functionName(gast_public_1.gast.Option)]="OPTION",productionToDslName[lang_extensions_1.functionName(gast_public_1.gast.RepetitionMandatory)]="AT_LEAST_ONE",productionToDslName[lang_extensions_1.functionName(gast_public_1.gast.RepetitionMandatoryWithSeparator)]="AT_LEAST_ONE_SEP",productionToDslName[lang_extensions_1.functionName(gast_public_1.gast.RepetitionWithSeparator)]="MANY_SEP",productionToDslName[lang_extensions_1.functionName(gast_public_1.gast.Repetition)]="MANY",productionToDslName[lang_extensions_1.functionName(gast_public_1.gast.Alternation)]="OR",productionToDslName[lang_extensions_1.functionName(gast_public_1.gast.Terminal)]="CONSUME",exports.getProductionDslName=getProductionDslName},function(module,exports,__webpack_require__){function tokenName(clazz){return utils_1.isString(clazz.tokenName)?clazz.tokenName:lang_extensions_1.functionName(clazz)}function extendToken(tokenName,patternOrParent,parentConstructor){void 0===patternOrParent&&(patternOrParent=void 0),void 0===parentConstructor&&(parentConstructor=Token);var pattern;utils_1.isRegExp(patternOrParent)||patternOrParent===lexer_public_1.Lexer.SKIPPED||patternOrParent===lexer_public_1.Lexer.NA?pattern=patternOrParent:utils_1.isFunction(patternOrParent)&&(parentConstructor=patternOrParent,pattern=void 0);var derivedCostructor=function(){parentConstructor.apply(this,arguments)};return derivedCostructor=utils_1.assign(derivedCostructor,parentConstructor),derivedCostructor.tokenName=tokenName,derivedCostructor.prototype=Object.create(parentConstructor.prototype),derivedCostructor.prototype.constructor=derivedCostructor,utils_1.isUndefined(pattern)||(derivedCostructor.PATTERN=pattern),derivedCostructor}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},utils_1=__webpack_require__(4),lang_extensions_1=__webpack_require__(3),lexer_public_1=__webpack_require__(11);exports.tokenName=tokenName,
exports.extendToken=extendToken;var Token=function(){function Token(image,offset,startLine,startColumn,endLine,endColumn){void 0===endLine&&(endLine=startLine),void 0===endColumn&&(endColumn=startColumn+image.length-1),this.image=image,this.offset=offset,this.startLine=startLine,this.startColumn=startColumn,this.endLine=endLine,this.endColumn=endColumn,this.isInsertedInRecovery=!1}return Token}();exports.Token=Token;var VirtualToken=function(_super){function VirtualToken(){_super.call(this,"",-1,-1,-1,-1,-1)}return __extends(VirtualToken,_super),VirtualToken}(Token);exports.VirtualToken=VirtualToken;var EOF=function(_super){function EOF(){_super.apply(this,arguments)}return __extends(EOF,_super),EOF}(VirtualToken);exports.EOF=EOF},function(module,exports,__webpack_require__){var lexer_1=__webpack_require__(12),utils_1=__webpack_require__(4);!function(LexerDefinitionErrorType){LexerDefinitionErrorType[LexerDefinitionErrorType.MISSING_PATTERN=0]="MISSING_PATTERN",LexerDefinitionErrorType[LexerDefinitionErrorType.INVALID_PATTERN=1]="INVALID_PATTERN",LexerDefinitionErrorType[LexerDefinitionErrorType.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",LexerDefinitionErrorType[LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",LexerDefinitionErrorType[LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",LexerDefinitionErrorType[LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND"}(exports.LexerDefinitionErrorType||(exports.LexerDefinitionErrorType={}));var Lexer=(exports.LexerDefinitionErrorType,function(){function Lexer(tokenClasses,deferDefinitionErrorsHandling){if(void 0===deferDefinitionErrorsHandling&&(deferDefinitionErrorsHandling=!1),this.tokenClasses=tokenClasses,this.lexerDefinitionErrors=[],this.lexerDefinitionErrors=lexer_1.validatePatterns(tokenClasses),!utils_1.isEmpty(this.lexerDefinitionErrors)&&!deferDefinitionErrorsHandling){var allErrMessages=utils_1.map(this.lexerDefinitionErrors,function(error){return error.message}),allErrMessagesString=allErrMessages.join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+allErrMessagesString)}if(utils_1.isEmpty(this.lexerDefinitionErrors)){var analyzeResult=lexer_1.analyzeTokenClasses(tokenClasses);this.allPatterns=analyzeResult.allPatterns,this.patternIdxToClass=analyzeResult.patternIdxToClass,this.patternIdxToGroup=analyzeResult.patternIdxToGroup,this.patternIdxToLongerAltIdx=analyzeResult.patternIdxToLongerAltIdx,this.patternIdxToCanLineTerminator=analyzeResult.patternIdxToCanLineTerminator,this.emptyGroups=analyzeResult.emptyGroups}}return Lexer.prototype.tokenize=function(text){var match,i,j,matchAlt,longerAltIdx,matchedImage,imageLength,group,tokClass,newToken,errLength,canMatchedContainLineTerminator,fixForEndingInLT,c,droppedChar,lastLTIdx,errorMessage,lastCharIsLT,orgInput=text,offset=0,matchedTokens=[],errors=[],line=1,column=1,groups=utils_1.cloneObj(this.emptyGroups);if(!utils_1.isEmpty(this.lexerDefinitionErrors)){var allErrMessages=utils_1.map(this.lexerDefinitionErrors,function(error){return error.message}),allErrMessagesString=allErrMessages.join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+allErrMessagesString)}for(;text.length>0;){for(match=null,i=0;i<this.allPatterns.length;i++)if(match=this.allPatterns[i].exec(text),null!==match){longerAltIdx=this.patternIdxToLongerAltIdx[i],longerAltIdx&&(matchAlt=this.allPatterns[longerAltIdx].exec(text),matchAlt&&matchAlt[0].length>match[0].length&&(match=matchAlt,i=longerAltIdx));break}if(null!==match){if(matchedImage=match[0],imageLength=matchedImage.length,group=this.patternIdxToGroup[i],void 0!==group&&(tokClass=this.patternIdxToClass[i],newToken=new tokClass(matchedImage,offset,line,column),"default"===group?matchedTokens.push(newToken):groups[group].push(newToken)),text=text.slice(imageLength),offset+=imageLength,column+=imageLength,canMatchedContainLineTerminator=this.patternIdxToCanLineTerminator[i]){var lineTerminatorsInMatch=lexer_1.countLineTerminators(matchedImage);if(0!==lineTerminatorsInMatch){for(line+=lineTerminatorsInMatch,lastLTIdx=imageLength-1;lastLTIdx>=0&&(c=matchedImage.charCodeAt(lastLTIdx),13!==c&&10!==c);)lastLTIdx--;column=imageLength-lastLTIdx,void 0!==group&&(lastCharIsLT=lastLTIdx===imageLength-1,fixForEndingInLT=lastCharIsLT?-1:0,1===lineTerminatorsInMatch&&lastCharIsLT||(newToken.endLine=line+fixForEndingInLT,newToken.endColumn=column-1+-fixForEndingInLT))}}}else{for(var errorStartOffset=offset,errorLine=line,errorColumn=column,foundResyncPoint=!1;!foundResyncPoint&&text.length>0;)for(droppedChar=text.charCodeAt(0),10===droppedChar||13===droppedChar&&(1===text.length||text.length>1&&10!==text.charCodeAt(1))?(line++,column=1):column++,text=text.substr(1),offset++,j=0;j<this.allPatterns.length&&!(foundResyncPoint=this.allPatterns[j].test(text));j++);errLength=offset-errorStartOffset,errorMessage="unexpected character: ->"+orgInput.charAt(errorStartOffset)+"<- at offset: "+errorStartOffset+","+(" skipped "+(offset-errorStartOffset)+" characters."),errors.push({line:errorLine,column:errorColumn,length:errLength,message:errorMessage})}}return{tokens:matchedTokens,groups:groups,errors:errors}},Lexer.SKIPPED={description:"This marks a skipped Token pattern, this means each token identified by it willbe consumed and then throw into oblivion, this can be used to for example: skip whitespace."},Lexer.NA=/NOT_APPLICABLE/,Lexer}());exports.Lexer=Lexer},function(module,exports,__webpack_require__){function analyzeTokenClasses(tokenClasses){var onlyRelevantClasses=utils_1.reject(tokenClasses,function(currClass){return currClass[PATTERN]===lexer_public_1.Lexer.NA}),allTransformedPatterns=utils_1.map(onlyRelevantClasses,function(currClass){return addStartOfInput(currClass[PATTERN])}),allPatternsToClass=utils_1.zipObject(allTransformedPatterns,onlyRelevantClasses),patternIdxToClass=utils_1.map(allTransformedPatterns,function(pattern){return allPatternsToClass[pattern.toString()]}),patternIdxToGroup=utils_1.map(onlyRelevantClasses,function(clazz){var groupName=clazz.GROUP;if(groupName!==lexer_public_1.Lexer.SKIPPED){if(utils_1.isString(groupName))return groupName;if(utils_1.isUndefined(groupName))return"default";throw Error("non exhaustive match")}}),patternIdxToLongerAltIdx=utils_1.map(onlyRelevantClasses,function(clazz){var longerAltClass=clazz.LONGER_ALT;if(longerAltClass){var longerAltIdx=utils_1.indexOf(onlyRelevantClasses,longerAltClass);return longerAltIdx}}),patternIdxToCanLineTerminator=utils_1.map(allTransformedPatterns,function(pattern){return/\\n|\\r|\\s/g.test(pattern.source)}),emptyGroups=utils_1.reduce(onlyRelevantClasses,function(acc,clazz){var groupName=clazz.GROUP;return utils_1.isString(groupName)&&(acc[groupName]=[]),acc},{});return{allPatterns:allTransformedPatterns,patternIdxToClass:patternIdxToClass,patternIdxToGroup:patternIdxToGroup,patternIdxToLongerAltIdx:patternIdxToLongerAltIdx,patternIdxToCanLineTerminator:patternIdxToCanLineTerminator,emptyGroups:emptyGroups}}function validatePatterns(tokenClasses){var errors=[],missingResult=findMissingPatterns(tokenClasses),validTokenClasses=missingResult.validTokenClasses;errors=errors.concat(missingResult.errors);var invalidResult=findInvalidPatterns(validTokenClasses);return validTokenClasses=invalidResult.validTokenClasses,errors=errors.concat(invalidResult.errors),errors=errors.concat(findEndOfInputAnchor(validTokenClasses)),errors=errors.concat(findUnsupportedFlags(validTokenClasses)),errors=errors.concat(findDuplicatePatterns(validTokenClasses)),errors=errors.concat(findInvalidGroupType(validTokenClasses))}function findMissingPatterns(tokenClasses){var tokenClassesWithMissingPattern=utils_1.filter(tokenClasses,function(currClass){return!utils_1.has(currClass,PATTERN)}),errors=utils_1.map(tokenClassesWithMissingPattern,function(currClass){return{message:"Token class: ->"+tokens_public_1.tokenName(currClass)+"<- missing static 'PATTERN' property",type:lexer_public_1.LexerDefinitionErrorType.MISSING_PATTERN,tokenClasses:[currClass]}}),validTokenClasses=utils_1.difference(tokenClasses,tokenClassesWithMissingPattern);return{errors:errors,validTokenClasses:validTokenClasses}}function findInvalidPatterns(tokenClasses){var tokenClassesWithInvalidPattern=utils_1.filter(tokenClasses,function(currClass){var pattern=currClass[PATTERN];return!utils_1.isRegExp(pattern)}),errors=utils_1.map(tokenClassesWithInvalidPattern,function(currClass){return{message:"Token class: ->"+tokens_public_1.tokenName(currClass)+"<- static 'PATTERN' can only be a RegExp",type:lexer_public_1.LexerDefinitionErrorType.INVALID_PATTERN,tokenClasses:[currClass]}}),validTokenClasses=utils_1.difference(tokenClasses,tokenClassesWithInvalidPattern);return{errors:errors,validTokenClasses:validTokenClasses}}function findEndOfInputAnchor(tokenClasses){var invalidRegex=utils_1.filter(tokenClasses,function(currClass){var pattern=currClass[PATTERN];return end_of_input.test(pattern.source)}),errors=utils_1.map(invalidRegex,function(currClass){return{message:"Token class: ->"+tokens_public_1.tokenName(currClass)+"<- static 'PATTERN' cannot contain end of input anchor '$'",type:lexer_public_1.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenClasses:[currClass]}});return errors}function findUnsupportedFlags(tokenClasses){var invalidFlags=utils_1.filter(tokenClasses,function(currClass){var pattern=currClass[PATTERN];return pattern instanceof RegExp&&(pattern.multiline||pattern.global)}),errors=utils_1.map(invalidFlags,function(currClass){return{message:"Token class: ->"+tokens_public_1.tokenName(currClass)+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:lexer_public_1.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenClasses:[currClass]}});return errors}function findDuplicatePatterns(tokenClasses){var found=[],identicalPatterns=utils_1.map(tokenClasses,function(outerClass){return utils_1.reduce(tokenClasses,function(result,innerClass){return outerClass.PATTERN.source!==innerClass.PATTERN.source||utils_1.contains(found,innerClass)||innerClass.PATTERN===lexer_public_1.Lexer.NA?result:(found.push(innerClass),result.push(innerClass),result)},[])});identicalPatterns=utils_1.compact(identicalPatterns);var duplicatePatterns=utils_1.filter(identicalPatterns,function(currIdenticalSet){return currIdenticalSet.length>1}),errors=utils_1.map(duplicatePatterns,function(setOfIdentical){var classNames=utils_1.map(setOfIdentical,function(currClass){return tokens_public_1.tokenName(currClass)}),dupPatternSrc=utils_1.first(setOfIdentical).PATTERN;return{message:"The same RegExp pattern ->"+dupPatternSrc+"<-"+("has been used in all the following classes: "+classNames.join(", ")+" <-"),type:lexer_public_1.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenClasses:setOfIdentical}});return errors}function findInvalidGroupType(tokenClasses){var invalidTypes=utils_1.filter(tokenClasses,function(clazz){if(!utils_1.has(clazz,"GROUP"))return!1;var group=clazz.GROUP;return group!==lexer_public_1.Lexer.SKIPPED&&group!==lexer_public_1.Lexer.NA&&!utils_1.isString(group)}),errors=utils_1.map(invalidTypes,function(currClass){return{message:"Token class: ->"+tokens_public_1.tokenName(currClass)+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:lexer_public_1.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenClasses:[currClass]}});return errors}function addStartOfInput(pattern){var flags=pattern.ignoreCase?"i":"";return new RegExp("^(?:"+pattern.source+")",flags)}function countLineTerminators(text){for(var lineTerminators=0,currOffset=0;currOffset<text.length;){var c=text.charCodeAt(currOffset);10===c?lineTerminators++:13===c&&(currOffset!==text.length-1&&10===text.charCodeAt(currOffset+1)||lineTerminators++),currOffset++}return lineTerminators}var tokens_public_1=__webpack_require__(10),lexer_public_1=__webpack_require__(11),utils_1=__webpack_require__(4),PATTERN="PATTERN";exports.analyzeTokenClasses=analyzeTokenClasses,exports.validatePatterns=validatePatterns,exports.findMissingPatterns=findMissingPatterns,exports.findInvalidPatterns=findInvalidPatterns;var end_of_input=/[^\\][\$]/;exports.findEndOfInputAnchor=findEndOfInputAnchor,exports.findUnsupportedFlags=findUnsupportedFlags,exports.findDuplicatePatterns=findDuplicatePatterns,exports.findInvalidGroupType=findInvalidGroupType,exports.addStartOfInput=addStartOfInput,exports.countLineTerminators=countLineTerminators},function(module,exports,__webpack_require__){function first(prod){if(prod instanceof gast_public_1.gast.NonTerminal)return first(prod.referencedRule);if(prod instanceof gast_public_1.gast.Terminal)return firstForTerminal(prod);if(gast_1.isSequenceProd(prod))return firstForSequence(prod);if(gast_1.isBranchingProd(prod))return firstForBranching(prod);throw Error("non exhaustive match")}function firstForSequence(prod){for(var currSubProd,firstSet=[],seq=prod.definition,nextSubProdIdx=0,hasInnerProdsRemaining=seq.length>nextSubProdIdx,isLastInnerProdOptional=!0;hasInnerProdsRemaining&&isLastInnerProdOptional;)currSubProd=seq[nextSubProdIdx],isLastInnerProdOptional=gast_1.isOptionalProd(currSubProd),firstSet=firstSet.concat(first(currSubProd)),nextSubProdIdx+=1,hasInnerProdsRemaining=seq.length>nextSubProdIdx;return utils_1.uniq(firstSet)}function firstForBranching(prod){var allAlternativesFirsts=utils_1.map(prod.definition,function(innerProd){return first(innerProd)});return utils_1.uniq(utils_1.flatten(allAlternativesFirsts))}function firstForTerminal(terminal){return[terminal.terminalType]}var gast_public_1=__webpack_require__(7),gast_1=__webpack_require__(9),utils_1=__webpack_require__(4);exports.first=first,exports.firstForSequence=firstForSequence,exports.firstForBranching=firstForBranching,exports.firstForTerminal=firstForTerminal},function(module,exports,__webpack_require__){function computeAllProdsFollows(topProductions){var reSyncFollows=new lang_extensions_1.HashTable;return utils_1.forEach(topProductions,function(topProd){var currRefsFollow=new ResyncFollowsWalker(topProd).startWalking();reSyncFollows.putAll(currRefsFollow)}),reSyncFollows}function buildBetweenProdsFollowPrefix(inner,occurenceInParent){return inner.name+occurenceInParent+constants_1.IN}function buildInProdFollowPrefix(terminal){var terminalName=tokens_public_1.tokenName(terminal.terminalType);return terminalName+terminal.occurrenceInParent+constants_1.IN}var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},rest_1=__webpack_require__(15),lang_extensions_1=__webpack_require__(3),gast_public_1=__webpack_require__(7),first_1=__webpack_require__(13),utils_1=__webpack_require__(4),constants_1=__webpack_require__(16),tokens_public_1=__webpack_require__(10),ResyncFollowsWalker=function(_super){function ResyncFollowsWalker(topProd){_super.call(this),this.topProd=topProd,this.follows=new lang_extensions_1.HashTable}return __extends(ResyncFollowsWalker,_super),ResyncFollowsWalker.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},ResyncFollowsWalker.prototype.walkTerminal=function(terminal,currRest,prevRest){},ResyncFollowsWalker.prototype.walkProdRef=function(refProd,currRest,prevRest){var followName=buildBetweenProdsFollowPrefix(refProd.referencedRule,refProd.occurrenceInParent)+this.topProd.name,fullRest=currRest.concat(prevRest),restProd=new gast_public_1.gast.Flat(fullRest),t_in_topProd_follows=first_1.first(restProd);this.follows.put(followName,t_in_topProd_follows)},ResyncFollowsWalker}(rest_1.RestWalker);exports.ResyncFollowsWalker=ResyncFollowsWalker,exports.computeAllProdsFollows=computeAllProdsFollows,exports.buildBetweenProdsFollowPrefix=buildBetweenProdsFollowPrefix,exports.buildInProdFollowPrefix=buildInProdFollowPrefix},function(module,exports,__webpack_require__){function restForRepetitionWithSeparator(repSepProd,currRest,prevRest){var repSepRest=[new gast_public_1.gast.Option([new gast_public_1.gast.Terminal(repSepProd.separator)].concat(repSepProd.definition))],fullRepSepRest=repSepRest.concat(currRest,prevRest);return fullRepSepRest}var gast_public_1=__webpack_require__(7),utils_1=__webpack_require__(4),RestWalker=function(){function RestWalker(){}return RestWalker.prototype.walk=function(prod,prevRest){var _this=this;void 0===prevRest&&(prevRest=[]),utils_1.forEach(prod.definition,function(subProd,index){var currRest=utils_1.drop(prod.definition,index+1);if(subProd instanceof gast_public_1.gast.NonTerminal)_this.walkProdRef(subProd,currRest,prevRest);else if(subProd instanceof gast_public_1.gast.Terminal)_this.walkTerminal(subProd,currRest,prevRest);else if(subProd instanceof gast_public_1.gast.Flat)_this.walkFlat(subProd,currRest,prevRest);else if(subProd instanceof gast_public_1.gast.Option)_this.walkOption(subProd,currRest,prevRest);else if(subProd instanceof gast_public_1.gast.RepetitionMandatory)_this.walkAtLeastOne(subProd,currRest,prevRest);else if(subProd instanceof gast_public_1.gast.RepetitionMandatoryWithSeparator)_this.walkAtLeastOneSep(subProd,currRest,prevRest);else if(subProd instanceof gast_public_1.gast.RepetitionWithSeparator)_this.walkManySep(subProd,currRest,prevRest);else if(subProd instanceof gast_public_1.gast.Repetition)_this.walkMany(subProd,currRest,prevRest);else{if(!(subProd instanceof gast_public_1.gast.Alternation))throw Error("non exhaustive match");_this.walkOr(subProd,currRest,prevRest)}})},RestWalker.prototype.walkTerminal=function(terminal,currRest,prevRest){},RestWalker.prototype.walkProdRef=function(refProd,currRest,prevRest){},RestWalker.prototype.walkFlat=function(flatProd,currRest,prevRest){var fullOrRest=currRest.concat(prevRest);this.walk(flatProd,fullOrRest)},RestWalker.prototype.walkOption=function(optionProd,currRest,prevRest){var fullOrRest=currRest.concat(prevRest);this.walk(optionProd,fullOrRest)},RestWalker.prototype.walkAtLeastOne=function(atLeastOneProd,currRest,prevRest){var fullAtLeastOneRest=[new gast_public_1.gast.Option(atLeastOneProd.definition)].concat(currRest,prevRest);this.walk(atLeastOneProd,fullAtLeastOneRest)},RestWalker.prototype.walkAtLeastOneSep=function(atLeastOneSepProd,currRest,prevRest){var fullAtLeastOneSepRest=restForRepetitionWithSeparator(atLeastOneSepProd,currRest,prevRest);this.walk(atLeastOneSepProd,fullAtLeastOneSepRest)},RestWalker.prototype.walkMany=function(manyProd,currRest,prevRest){var fullManyRest=[new gast_public_1.gast.Option(manyProd.definition)].concat(currRest,prevRest);this.walk(manyProd,fullManyRest)},RestWalker.prototype.walkManySep=function(manySepProd,currRest,prevRest){var fullManySepRest=restForRepetitionWithSeparator(manySepProd,currRest,prevRest);this.walk(manySepProd,fullManySepRest)},RestWalker.prototype.walkOr=function(orProd,currRest,prevRest){var _this=this,fullOrRest=currRest.concat(prevRest);utils_1.forEach(orProd.definition,function(alt){var prodWrapper=new gast_public_1.gast.Flat([alt]);_this.walk(prodWrapper,fullOrRest)})},RestWalker}();exports.RestWalker=RestWalker},function(module,exports){exports.IN="_~IN~_"},function(module,exports,__webpack_require__){function buildLookaheadForTopLevel(rule){var restProd=new gast_public_1.gast.Flat(rule.definition),possibleTokTypes=first_1.first(restProd);return getSimpleLookahead(possibleTokTypes)}function buildLookaheadForOption(optionOccurrence,ruleGrammar){return buildLookAheadForGrammarProd(interpreter_1.NextInsideOptionWalker,optionOccurrence,ruleGrammar)}function buildLookaheadForMany(manyOccurrence,ruleGrammar){return buildLookAheadForGrammarProd(interpreter_1.NextInsideManyWalker,manyOccurrence,ruleGrammar)}function buildLookaheadForManySep(manyOccurrence,ruleGrammar){return buildLookAheadForGrammarProd(interpreter_1.NextInsideManySepWalker,manyOccurrence,ruleGrammar)}function buildLookaheadForAtLeastOne(manyOccurrence,ruleGrammar){return buildLookAheadForGrammarProd(interpreter_1.NextInsideAtLeastOneWalker,manyOccurrence,ruleGrammar)}function buildLookaheadForAtLeastOneSep(manyOccurrence,ruleGrammar){return buildLookAheadForGrammarProd(interpreter_1.NextInsideAtLeastOneSepWalker,manyOccurrence,ruleGrammar)}function buildLookaheadForOr(orOccurrence,ruleGrammar,ignoreAmbiguities){void 0===ignoreAmbiguities&&(ignoreAmbiguities=!1);var alternativesTokens=new interpreter_1.NextInsideOrWalker(ruleGrammar,orOccurrence).startWalking();ignoreAmbiguities||checkForOrAmbiguities(alternativesTokens,orOccurrence,ruleGrammar);var hasLastAnEmptyAlt=utils_1.isEmpty(utils_1.last(alternativesTokens));if(hasLastAnEmptyAlt){var lastIdx=alternativesTokens.length-1;return function(){for(var nextToken=this.NEXT_TOKEN(),i=0;lastIdx>i;i++)for(var currAltTokens=alternativesTokens[i],j=0;j<currAltTokens.length;j++)if(nextToken instanceof currAltTokens[j])return i;return lastIdx}}return function(){for(var nextToken=this.NEXT_TOKEN(),i=0;i<alternativesTokens.length;i++)for(var currAltTokens=alternativesTokens[i],j=0;j<currAltTokens.length;j++)if(nextToken instanceof currAltTokens[j])return i;return-1}}function checkForOrAmbiguities(alternativesTokens,orOccurrence,ruleGrammar){var altsAmbiguityErrors=checkAlternativesAmbiguities(alternativesTokens);if(!utils_1.isEmpty(altsAmbiguityErrors)){var errorMessages=utils_1.map(altsAmbiguityErrors,function(currAmbiguity){return"Ambiguous alternatives: <"+currAmbiguity.alts.join(" ,")+"> in <OR"+orOccurrence+"> inside <"+ruleGrammar.name+"> "+("Rule, <"+tokens_public_1.tokenName(currAmbiguity.token)+"> may appears as the first Terminal in all these alternatives.\n")});throw new Error(errorMessages.join("\n ---------------- \n")+"To Resolve this, either: \n1. refactor your grammar to be LL(1)\n2. provide explicit lookahead functions in the form {WHEN:laFunc, THEN_DO:...}\n3. Add ignore arg to this OR Production:\nOR([], 'msg', recognizer.IGNORE_AMBIGUITIES)\nIn that case the parser will always pick the first alternative that matches and ignore all the others")}}function checkAlternativesAmbiguities(alternativesTokens){var allTokensFlat=utils_1.flatten(alternativesTokens),uniqueTokensFlat=utils_1.uniq(allTokensFlat),tokensToAltsIndicesItAppearsIn=utils_1.map(uniqueTokensFlat,function(seekToken){var altsCurrTokenAppearsIn=utils_1.pick(alternativesTokens,function(altToLookIn){return utils_1.find(altToLookIn,function(currToken){return currToken===seekToken})}),altsIndicesTokenAppearsIn=utils_1.map(utils_1.keys(altsCurrTokenAppearsIn),function(index){return parseInt(index,10)+1});return{token:seekToken,alts:altsIndicesTokenAppearsIn}}),tokensToAltsIndicesWithAmbiguity=utils_1.filter(tokensToAltsIndicesItAppearsIn,function(tokAndAltsItAppearsIn){return tokAndAltsItAppearsIn.alts.length>1});return tokensToAltsIndicesWithAmbiguity}function buildLookAheadForGrammarProd(prodWalkerConstructor,ruleOccurrence,ruleGrammar){var path={ruleStack:[ruleGrammar.name],occurrenceStack:[1],occurrence:ruleOccurrence},walker=new prodWalkerConstructor(ruleGrammar,path),possibleNextTokTypes=walker.startWalking();return getSimpleLookahead(possibleNextTokTypes)}function getSimpleLookahead(possibleNextTokTypes){return function(){for(var nextToken=this.NEXT_TOKEN(),j=0;j<possibleNextTokTypes.length;j++)if(nextToken instanceof possibleNextTokTypes[j])return!0;return!1}}var gast_public_1=__webpack_require__(7),first_1=__webpack_require__(13),interpreter_1=__webpack_require__(18),utils_1=__webpack_require__(4),tokens_public_1=__webpack_require__(10);exports.buildLookaheadForTopLevel=buildLookaheadForTopLevel,exports.buildLookaheadForOption=buildLookaheadForOption,exports.buildLookaheadForMany=buildLookaheadForMany,exports.buildLookaheadForManySep=buildLookaheadForManySep,exports.buildLookaheadForAtLeastOne=buildLookaheadForAtLeastOne,exports.buildLookaheadForAtLeastOneSep=buildLookaheadForAtLeastOneSep,exports.buildLookaheadForOr=buildLookaheadForOr,exports.checkForOrAmbiguities=checkForOrAmbiguities,exports.checkAlternativesAmbiguities=checkAlternativesAmbiguities},function(module,exports,__webpack_require__){var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},rest_1=__webpack_require__(15),gast_public_1=__webpack_require__(7),utils_1=__webpack_require__(4),tokens_public_1=__webpack_require__(10),first_1=__webpack_require__(13),AbstractNextPossibleTokensWalker=function(_super){function AbstractNextPossibleTokensWalker(topProd,path){_super.call(this),this.topProd=topProd,this.path=path,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}return __extends(AbstractNextPossibleTokensWalker,_super),AbstractNextPossibleTokensWalker.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=utils_1.cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=utils_1.cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},AbstractNextPossibleTokensWalker.prototype.walk=function(prod,prevRest){void 0===prevRest&&(prevRest=[]),this.found||_super.prototype.walk.call(this,prod,prevRest)},AbstractNextPossibleTokensWalker.prototype.walkProdRef=function(refProd,currRest,prevRest){if(refProd.referencedRule.name===this.nextProductionName&&refProd.occurrenceInParent===this.nextProductionOccurrence){var fullRest=currRest.concat(prevRest);this.updateExpectedNext(),this.walk(refProd.referencedRule,fullRest)}},AbstractNextPossibleTokensWalker.prototype.updateExpectedNext=function(){utils_1.isEmpty(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},AbstractNextPossibleTokensWalker}(rest_1.RestWalker);exports.AbstractNextPossibleTokensWalker=AbstractNextPossibleTokensWalker;var NextAfterTokenWalker=function(_super){function NextAfterTokenWalker(topProd,path){_super.call(this,topProd,path),this.path=path,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=tokens_public_1.tokenName(this.path.lastTok),this.nextTerminalOccurrence=this.path.lastTokOccurrence}return __extends(NextAfterTokenWalker,_super),NextAfterTokenWalker.prototype.walkTerminal=function(terminal,currRest,prevRest){if(this.isAtEndOfPath&&tokens_public_1.tokenName(terminal.terminalType)===this.nextTerminalName&&terminal.occurrenceInParent===this.nextTerminalOccurrence&&!this.found){var fullRest=currRest.concat(prevRest),restProd=new gast_public_1.gast.Flat(fullRest);this.possibleTokTypes=first_1.first(restProd),this.found=!0}},NextAfterTokenWalker}(AbstractNextPossibleTokensWalker);exports.NextAfterTokenWalker=NextAfterTokenWalker;var NextInsideOptionWalker=function(_super){function NextInsideOptionWalker(topProd,path){_super.call(this,topProd,path),this.path=path,this.nextOptionOccurrence=0,this.nextOptionOccurrence=this.path.occurrence}return __extends(NextInsideOptionWalker,_super),NextInsideOptionWalker.prototype.walkOption=function(optionProd,currRest,prevRest){if(this.isAtEndOfPath&&optionProd.occurrenceInParent===this.nextOptionOccurrence&&!this.found){var restProd=new gast_public_1.gast.Flat(optionProd.definition);this.possibleTokTypes=first_1.first(restProd),this.found=!0}else _super.prototype.walkOption.call(this,optionProd,currRest,prevRest)},NextInsideOptionWalker}(AbstractNextPossibleTokensWalker);exports.NextInsideOptionWalker=NextInsideOptionWalker;var NextInsideManyWalker=function(_super){function NextInsideManyWalker(topProd,path){_super.call(this,topProd,path),this.path=path,this.nextOccurrence=0,this.nextOccurrence=this.path.occurrence}return __extends(NextInsideManyWalker,_super),NextInsideManyWalker.prototype.walkMany=function(manyProd,currRest,prevRest){if(this.isAtEndOfPath&&manyProd.occurrenceInParent===this.nextOccurrence&&!this.found){var restProd=new gast_public_1.gast.Flat(manyProd.definition);this.possibleTokTypes=first_1.first(restProd),this.found=!0}else _super.prototype.walkMany.call(this,manyProd,currRest,prevRest)},NextInsideManyWalker}(AbstractNextPossibleTokensWalker);exports.NextInsideManyWalker=NextInsideManyWalker;var NextInsideManySepWalker=function(_super){function NextInsideManySepWalker(topProd,path){_super.call(this,topProd,path),this.path=path,this.nextOccurrence=0,this.nextOccurrence=this.path.occurrence}return __extends(NextInsideManySepWalker,_super),NextInsideManySepWalker.prototype.walkManySep=function(manySepProd,currRest,prevRest){if(this.isAtEndOfPath&&manySepProd.occurrenceInParent===this.nextOccurrence&&!this.found){var restProd=new gast_public_1.gast.Flat(manySepProd.definition);this.possibleTokTypes=first_1.first(restProd),this.found=!0}else _super.prototype.walkManySep.call(this,manySepProd,currRest,prevRest)},NextInsideManySepWalker}(AbstractNextPossibleTokensWalker);exports.NextInsideManySepWalker=NextInsideManySepWalker;var NextInsideAtLeastOneWalker=function(_super){function NextInsideAtLeastOneWalker(topProd,path){_super.call(this,topProd,path),this.path=path,this.nextOccurrence=0,this.nextOccurrence=this.path.occurrence}return __extends(NextInsideAtLeastOneWalker,_super),NextInsideAtLeastOneWalker.prototype.walkAtLeastOne=function(atLeastOneProd,currRest,prevRest){if(this.isAtEndOfPath&&atLeastOneProd.occurrenceInParent===this.nextOccurrence&&!this.found){var restProd=new gast_public_1.gast.Flat(atLeastOneProd.definition);this.possibleTokTypes=first_1.first(restProd),this.found=!0}else _super.prototype.walkAtLeastOne.call(this,atLeastOneProd,currRest,prevRest)},NextInsideAtLeastOneWalker}(AbstractNextPossibleTokensWalker);exports.NextInsideAtLeastOneWalker=NextInsideAtLeastOneWalker;var NextInsideAtLeastOneSepWalker=function(_super){function NextInsideAtLeastOneSepWalker(topProd,path){_super.call(this,topProd,path),this.path=path,this.nextOccurrence=0,this.nextOccurrence=this.path.occurrence}return __extends(NextInsideAtLeastOneSepWalker,_super),NextInsideAtLeastOneSepWalker.prototype.walkAtLeastOneSep=function(atLeastOneSepProd,currRest,prevRest){if(this.isAtEndOfPath&&atLeastOneSepProd.occurrenceInParent===this.nextOccurrence&&!this.found){var restProd=new gast_public_1.gast.Flat(atLeastOneSepProd.definition);this.possibleTokTypes=first_1.first(restProd),this.found=!0}else _super.prototype.walkAtLeastOneSep.call(this,atLeastOneSepProd,currRest,prevRest)},NextInsideAtLeastOneSepWalker}(AbstractNextPossibleTokensWalker);exports.NextInsideAtLeastOneSepWalker=NextInsideAtLeastOneSepWalker;var NextInsideOrWalker=function(_super){function NextInsideOrWalker(topRule,occurrence){_super.call(this),this.topRule=topRule,this.occurrence=occurrence,this.result=[]}return __extends(NextInsideOrWalker,_super),NextInsideOrWalker.prototype.startWalking=function(){return this.walk(this.topRule),this.result},NextInsideOrWalker.prototype.walkOr=function(orProd,currRest,prevRest){orProd.occurrenceInParent===this.occurrence?this.result=utils_1.map(orProd.definition,function(alt){var altWrapper=new gast_public_1.gast.Flat([alt]);return first_1.first(altWrapper)}):_super.prototype.walkOr.call(this,orProd,currRest,prevRest)},NextInsideOrWalker}(rest_1.RestWalker);exports.NextInsideOrWalker=NextInsideOrWalker;var AbstractNextTerminalAfterProductionWalker=function(_super){function AbstractNextTerminalAfterProductionWalker(topRule,occurrence){_super.call(this),this.topRule=topRule,this.occurrence=occurrence,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}return __extends(AbstractNextTerminalAfterProductionWalker,_super),AbstractNextTerminalAfterProductionWalker.prototype.startWalking=function(){
return this.walk(this.topRule),this.result},AbstractNextTerminalAfterProductionWalker}(rest_1.RestWalker);exports.AbstractNextTerminalAfterProductionWalker=AbstractNextTerminalAfterProductionWalker;var NextTerminalAfterManyWalker=function(_super){function NextTerminalAfterManyWalker(){_super.apply(this,arguments)}return __extends(NextTerminalAfterManyWalker,_super),NextTerminalAfterManyWalker.prototype.walkMany=function(manyProd,currRest,prevRest){if(manyProd.occurrenceInParent===this.occurrence){var firstAfterMany=utils_1.first(currRest.concat(prevRest));this.result.isEndOfRule=void 0===firstAfterMany,firstAfterMany instanceof gast_public_1.gast.Terminal&&(this.result.token=firstAfterMany.terminalType,this.result.occurrence=firstAfterMany.occurrenceInParent)}else _super.prototype.walkMany.call(this,manyProd,currRest,prevRest)},NextTerminalAfterManyWalker}(AbstractNextTerminalAfterProductionWalker);exports.NextTerminalAfterManyWalker=NextTerminalAfterManyWalker;var NextTerminalAfterManySepWalker=function(_super){function NextTerminalAfterManySepWalker(){_super.apply(this,arguments)}return __extends(NextTerminalAfterManySepWalker,_super),NextTerminalAfterManySepWalker.prototype.walkManySep=function(manySepProd,currRest,prevRest){if(manySepProd.occurrenceInParent===this.occurrence){var firstAfterManySep=utils_1.first(currRest.concat(prevRest));this.result.isEndOfRule=void 0===firstAfterManySep,firstAfterManySep instanceof gast_public_1.gast.Terminal&&(this.result.token=firstAfterManySep.terminalType,this.result.occurrence=firstAfterManySep.occurrenceInParent)}else _super.prototype.walkManySep.call(this,manySepProd,currRest,prevRest)},NextTerminalAfterManySepWalker}(AbstractNextTerminalAfterProductionWalker);exports.NextTerminalAfterManySepWalker=NextTerminalAfterManySepWalker;var NextTerminalAfterAtLeastOneWalker=function(_super){function NextTerminalAfterAtLeastOneWalker(){_super.apply(this,arguments)}return __extends(NextTerminalAfterAtLeastOneWalker,_super),NextTerminalAfterAtLeastOneWalker.prototype.walkAtLeastOne=function(atLeastOneProd,currRest,prevRest){if(atLeastOneProd.occurrenceInParent===this.occurrence){var firstAfterAtLeastOne=utils_1.first(currRest.concat(prevRest));this.result.isEndOfRule=void 0===firstAfterAtLeastOne,firstAfterAtLeastOne instanceof gast_public_1.gast.Terminal&&(this.result.token=firstAfterAtLeastOne.terminalType,this.result.occurrence=firstAfterAtLeastOne.occurrenceInParent)}else _super.prototype.walkAtLeastOne.call(this,atLeastOneProd,currRest,prevRest)},NextTerminalAfterAtLeastOneWalker}(AbstractNextTerminalAfterProductionWalker);exports.NextTerminalAfterAtLeastOneWalker=NextTerminalAfterAtLeastOneWalker;var NextTerminalAfterAtLeastOneSepWalker=function(_super){function NextTerminalAfterAtLeastOneSepWalker(){_super.apply(this,arguments)}return __extends(NextTerminalAfterAtLeastOneSepWalker,_super),NextTerminalAfterAtLeastOneSepWalker.prototype.walkAtLeastOneSep=function(atleastOneSepProd,currRest,prevRest){if(atleastOneSepProd.occurrenceInParent===this.occurrence){var firstAfterfirstAfterAtLeastOneSep=utils_1.first(currRest.concat(prevRest));this.result.isEndOfRule=void 0===firstAfterfirstAfterAtLeastOneSep,firstAfterfirstAfterAtLeastOneSep instanceof gast_public_1.gast.Terminal&&(this.result.token=firstAfterfirstAfterAtLeastOneSep.terminalType,this.result.occurrence=firstAfterfirstAfterAtLeastOneSep.occurrenceInParent)}else _super.prototype.walkAtLeastOneSep.call(this,atleastOneSepProd,currRest,prevRest)},NextTerminalAfterAtLeastOneSepWalker}(AbstractNextTerminalAfterProductionWalker);exports.NextTerminalAfterAtLeastOneSepWalker=NextTerminalAfterAtLeastOneSepWalker},function(module,exports,__webpack_require__){function buildTopProduction(impelText,name,terminals){exports.terminalNameToConstructor=terminals;var spacedImpelText=" "+impelText,txtWithoutComments=removeComments(" "+spacedImpelText),textWithoutCommentsAndStrings=removeStringLiterals(txtWithoutComments),prodRanges=createRanges(textWithoutCommentsAndStrings),topRange=new range_1.Range(0,impelText.length+2);return buildTopLevel(name,topRange,prodRanges,impelText)}function buildTopLevel(name,topRange,allRanges,orgText){var topLevelProd=new gast_public_1.gast.Rule(name,[],orgText);return buildAbstractProd(topLevelProd,topRange,allRanges)}function buildProdGast(prodRange,allRanges){"use strict";switch(prodRange.type){case ProdType.AT_LEAST_ONE:return buildAtLeastOneProd(prodRange,allRanges);case ProdType.AT_LEAST_ONE_SEP:return buildAtLeastOneSepProd(prodRange,allRanges);case ProdType.MANY_SEP:return buildManySepProd(prodRange,allRanges);case ProdType.MANY:return buildManyProd(prodRange,allRanges);case ProdType.OPTION:return buildOptionProd(prodRange,allRanges);case ProdType.OR:return buildOrProd(prodRange,allRanges);case ProdType.FLAT:return buildAbstractProd(new gast_public_1.gast.Flat([]),prodRange.range,allRanges);case ProdType.REF:return buildRefProd(prodRange);case ProdType.TERMINAL:return buildTerminalProd(prodRange);default:throw Error("non exhaustive match")}}function buildRefProd(prodRange){var reResult=refRegEx.exec(prodRange.text),isImplicitOccurrenceIdx=void 0===reResult[1],refOccurrence=isImplicitOccurrenceIdx?1:parseInt(reResult[1],10),refProdName=reResult[2],newRef=new gast_public_1.gast.NonTerminal(refProdName,void 0,refOccurrence);return newRef.implicitOccurrenceIndex=isImplicitOccurrenceIdx,newRef}function buildTerminalProd(prodRange){var reResult=terminalRegEx.exec(prodRange.text),isImplicitOccurrenceIdx=void 0===reResult[1],terminalOccurrence=isImplicitOccurrenceIdx?1:parseInt(reResult[1],10),terminalName=reResult[2],terminalType=exports.terminalNameToConstructor[terminalName];if(!terminalType)throw Error("Terminal Token name: "+terminalName+" not found");var newTerminal=new gast_public_1.gast.Terminal(terminalType,terminalOccurrence);return newTerminal.implicitOccurrenceIndex=isImplicitOccurrenceIdx,newTerminal}function buildProdWithOccurrence(regEx,prodInstance,prodRange,allRanges){var reResult=regEx.exec(prodRange.text),isImplicitOccurrenceIdx=void 0===reResult[1];return prodInstance.occurrenceInParent=isImplicitOccurrenceIdx?1:parseInt(reResult[1],10),prodInstance.implicitOccurrenceIndex=isImplicitOccurrenceIdx,buildAbstractProd(prodInstance,prodRange.range,allRanges)}function buildAtLeastOneProd(prodRange,allRanges){return buildProdWithOccurrence(atLeastOneRegEx,new gast_public_1.gast.RepetitionMandatory([]),prodRange,allRanges)}function buildAtLeastOneSepProd(prodRange,allRanges){return buildRepetitionWithSep(prodRange,allRanges,gast_public_1.gast.RepetitionMandatoryWithSeparator,atLeastOneWithSeparatorRegEx)}function buildManyProd(prodRange,allRanges){return buildProdWithOccurrence(manyRegEx,new gast_public_1.gast.Repetition([]),prodRange,allRanges)}function buildManySepProd(prodRange,allRanges){return buildRepetitionWithSep(prodRange,allRanges,gast_public_1.gast.RepetitionWithSeparator,manyWithSeparatorRegEx)}function buildRepetitionWithSep(prodRange,allRanges,repConstructor,regExp){var reResult=regExp.exec(prodRange.text),isImplicitOccurrenceIdx=void 0===reResult[1],occurrenceIdx=isImplicitOccurrenceIdx?1:parseInt(reResult[1],10),sepName=reResult[2],separatorType=exports.terminalNameToConstructor[sepName];if(!separatorType)throw Error("Separator Terminal Token name: "+sepName+" not found");var repetitionInstance=new repConstructor([],separatorType,occurrenceIdx);return repetitionInstance.implicitOccurrenceIndex=isImplicitOccurrenceIdx,buildAbstractProd(repetitionInstance,prodRange.range,allRanges)}function buildOptionProd(prodRange,allRanges){return buildProdWithOccurrence(optionRegEx,new gast_public_1.gast.Option([]),prodRange,allRanges)}function buildOrProd(prodRange,allRanges){return buildProdWithOccurrence(orRegEx,new gast_public_1.gast.Alternation([]),prodRange,allRanges)}function buildAbstractProd(prod,topLevelRange,allRanges){var secondLevelProds=getDirectlyContainedRanges(topLevelRange,allRanges),secondLevelInOrder=utils_1.sortBy(secondLevelProds,function(prodRng){return prodRng.range.start}),definition=[];return utils_1.forEach(secondLevelInOrder,function(prodRng){definition.push(buildProdGast(prodRng,allRanges))}),prod.definition=definition,prod}function getDirectlyContainedRanges(y,prodRanges){return utils_1.filter(prodRanges,function(x){var isXDescendantOfY=y.strictlyContainsRange(x.range),xDoesNotHaveAnyAncestorWhichIsDecendantOfY=utils_1.every(prodRanges,function(maybeAnotherParent){var isParentOfX=maybeAnotherParent.range.strictlyContainsRange(x.range),isChildOfY=maybeAnotherParent.range.isStrictlyContainedInRange(y);return!(isParentOfX&&isChildOfY)});return isXDescendantOfY&&xDoesNotHaveAnyAncestorWhichIsDecendantOfY})}function removeComments(text){var noSingleLine=text.replace(singleLineCommentRegEx,""),noComments=noSingleLine.replace(multiLineCommentRegEx,"");return noComments}function removeStringLiterals(text){var noDoubleQuotes=text.replace(doubleQuoteStringLiteralRegEx,""),noSingleQuotes=noDoubleQuotes.replace(singleQuoteStringLiteralRegEx,"");return noSingleQuotes}function createRanges(text){var terminalRanges=createTerminalRanges(text),refsRanges=createRefsRanges(text),atLeastOneRanges=createAtLeastOneRanges(text),atLeastOneSepRanges=createAtLeastOneSepRanges(text),manyRanges=createManyRanges(text),manySepRanges=createManySepRanges(text),optionRanges=createOptionRanges(text),orRanges=createOrRanges(text);return[].concat(terminalRanges,refsRanges,atLeastOneRanges,atLeastOneSepRanges,manyRanges,manySepRanges,optionRanges,orRanges)}function createTerminalRanges(text){return createRefOrTerminalProdRangeInternal(text,ProdType.TERMINAL,terminalRegGlobal)}function createRefsRanges(text){return createRefOrTerminalProdRangeInternal(text,ProdType.REF,refRegExGlobal)}function createAtLeastOneRanges(text){return createOperatorProdRangeParenthesis(text,ProdType.AT_LEAST_ONE,atLeastOneRegExGlobal)}function createAtLeastOneSepRanges(text){return createOperatorProdRangeParenthesis(text,ProdType.AT_LEAST_ONE_SEP,atLeastOneWithSeparatorRegExGlobal)}function createManyRanges(text){return createOperatorProdRangeParenthesis(text,ProdType.MANY,manyRegExGlobal)}function createManySepRanges(text){return createOperatorProdRangeParenthesis(text,ProdType.MANY_SEP,manyWithSeparatorRegExGlobal)}function createOptionRanges(text){return createOperatorProdRangeParenthesis(text,ProdType.OPTION,optionRegExGlobal)}function createOrRanges(text){var orRanges=createOperatorProdRangeParenthesis(text,ProdType.OR,orRegExGlobal),orSubPartsRanges=createOrPartRanges(orRanges);return orRanges.concat(orSubPartsRanges)}function createOrPartRanges(orRanges){var orPartRanges=[];utils_1.forEach(orRanges,function(orRange){var currOrParts=createOperatorProdRangeInternal(orRange.text,ProdType.FLAT,orPartRegEx,findClosingCurly),currOrRangeStart=orRange.range.start;utils_1.forEach(currOrParts,function(orPart){orPart.range.start+=currOrRangeStart,orPart.range.end+=currOrRangeStart}),orPartRanges=orPartRanges.concat(currOrParts)});var uniqueOrPartRanges=utils_1.uniq(orPartRanges,function(prodRange){return prodRange.type+"~"+prodRange.range.start+"~"+prodRange.range.end+"~"+prodRange.text});return uniqueOrPartRanges}function createRefOrTerminalProdRangeInternal(text,prodType,pattern){for(var matched,prodRanges=[];matched=pattern.exec(text);){var start=matched.index,stop=pattern.lastIndex,currRange=new range_1.Range(start,stop),currText=matched[0];prodRanges.push({range:currRange,text:currText,type:prodType})}return prodRanges}function createOperatorProdRangeParenthesis(text,prodType,pattern){return createOperatorProdRangeInternal(text,prodType,pattern,findClosingParen)}function createOperatorProdRangeInternal(text,prodType,pattern,findTerminatorOffSet){for(var matched,operatorRanges=[];matched=pattern.exec(text);){var start=matched.index,stop=findTerminatorOffSet(start+matched[0].length,text),currRange=new range_1.Range(start,stop),currText=text.substr(start,stop-start+1);operatorRanges.push({range:currRange,text:currText,type:prodType})}return operatorRanges}function findClosingOffset(opening,closing,start,text){for(var parenthesisStack=[1],i=-1;!utils_1.isEmpty(parenthesisStack)&&i+start<text.length;){i++;var nextChar=text.charAt(start+i);nextChar===opening?parenthesisStack.push(1):nextChar===closing&&parenthesisStack.pop()}if(utils_1.isEmpty(parenthesisStack))return i+start;throw new Error("INVALID INPUT TEXT, UNTERMINATED PARENTHESIS")}var range_1=__webpack_require__(20),gast_public_1=__webpack_require__(7),utils_1=__webpack_require__(4);!function(ProdType){ProdType[ProdType.OPTION=0]="OPTION",ProdType[ProdType.OR=1]="OR",ProdType[ProdType.MANY=2]="MANY",ProdType[ProdType.MANY_SEP=3]="MANY_SEP",ProdType[ProdType.AT_LEAST_ONE=4]="AT_LEAST_ONE",ProdType[ProdType.AT_LEAST_ONE_SEP=5]="AT_LEAST_ONE_SEP",ProdType[ProdType.REF=6]="REF",ProdType[ProdType.TERMINAL=7]="TERMINAL",ProdType[ProdType.FLAT=8]="FLAT"}(exports.ProdType||(exports.ProdType={}));var ProdType=exports.ProdType,terminalRegEx=/\.\s*CONSUME(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,terminalRegGlobal=new RegExp(terminalRegEx.source,"g"),refRegEx=/\.\s*SUBRULE(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,refRegExGlobal=new RegExp(refRegEx.source,"g"),optionRegEx=/\.\s*OPTION(\d)?\s*\(/,optionRegExGlobal=new RegExp(optionRegEx.source,"g"),manyRegEx=/\.\s*MANY(\d)?\s*\(/,manyRegExGlobal=new RegExp(manyRegEx.source,"g"),manyWithSeparatorRegEx=/\.\s*MANY_SEP(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,manyWithSeparatorRegExGlobal=new RegExp(manyWithSeparatorRegEx.source,"g"),atLeastOneWithSeparatorRegEx=/\.\s*AT_LEAST_ONE_SEP(\d)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,atLeastOneWithSeparatorRegExGlobal=new RegExp(atLeastOneWithSeparatorRegEx.source,"g"),atLeastOneRegEx=/\.\s*AT_LEAST_ONE(\d)?\s*\(/,atLeastOneRegExGlobal=new RegExp(atLeastOneRegEx.source,"g"),orRegEx=/\.\s*OR(\d)?\s*\(/,orRegExGlobal=new RegExp(orRegEx.source,"g"),orPartRegEx=/{\s*(WHEN|ALT)\s*:/g;exports.terminalNameToConstructor={},exports.buildTopProduction=buildTopProduction,exports.buildProdGast=buildProdGast,exports.getDirectlyContainedRanges=getDirectlyContainedRanges;var singleLineCommentRegEx=/\/\/.*/g,multiLineCommentRegEx=/\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\//g,doubleQuoteStringLiteralRegEx=/"([^\\"]+|\\([bfnrtv"\\/]|u[0-9a-fA-F]{4}))*"/g,singleQuoteStringLiteralRegEx=/'([^\\']+|\\([bfnrtv'\\/]|u[0-9a-fA-F]{4}))*'/g;exports.removeComments=removeComments,exports.removeStringLiterals=removeStringLiterals,exports.createRanges=createRanges,exports.createTerminalRanges=createTerminalRanges,exports.createRefsRanges=createRefsRanges,exports.createAtLeastOneRanges=createAtLeastOneRanges,exports.createAtLeastOneSepRanges=createAtLeastOneSepRanges,exports.createManyRanges=createManyRanges,exports.createManySepRanges=createManySepRanges,exports.createOptionRanges=createOptionRanges,exports.createOrRanges=createOrRanges;var findClosingCurly=utils_1.partial(findClosingOffset,"{","}"),findClosingParen=utils_1.partial(findClosingOffset,"(",")");exports.createOrPartRanges=createOrPartRanges,exports.findClosingOffset=findClosingOffset},function(module,exports){function isValidRange(start,end){return!(0>start||start>end)}var Range=function(){function Range(start,end){if(this.start=start,this.end=end,!isValidRange(start,end))throw new Error("INVALID RANGE")}return Range.prototype.contains=function(num){return this.start<=num&&this.end>=num},Range.prototype.containsRange=function(other){return this.start<=other.start&&this.end>=other.end},Range.prototype.isContainedInRange=function(other){return other.containsRange(this)},Range.prototype.strictlyContainsRange=function(other){return this.start<other.start&&this.end>other.end},Range.prototype.isStrictlyContainedInRange=function(other){return other.strictlyContainsRange(this)},Range}();exports.Range=Range,exports.isValidRange=isValidRange},function(module,exports,__webpack_require__){function clearCache(){cache_1.clearCache()}var cache_1=__webpack_require__(2);exports.clearCache=clearCache}])});